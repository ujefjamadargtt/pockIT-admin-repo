<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />
<nz-layout *ngIf="isLogedIn && pageName == 'job-completed'; else maindisplayBlock" class="job-completion-layout">
  <app-job-completionpopup></app-job-completionpopup>
</nz-layout>
<ng-template #maindisplayBlock>
  <nz-layout class="app-layout" *ngIf="isLogedIn">
    <nz-layout>
      <nz-header>
        <div nz-row class="app-header-container">
          <div nz-col nzSpan="8" class="header-left-section">
            <div class="header-left-content">
              <div *ngIf="decreptedroleId !== 27">
                <span class="menu-icon" nz-tooltip nzTooltipPlacement="bottom" nzTooltipTitle="Master Menu" nz-icon
                  nzType="menu" nzTheme="outline" (click)="open()">
                </span>
              </div>
              <div class="logo-section">
                <span class="logo-container">
                  <img (click)="openDashboard()" src="/assets/PockIT_Logo.png" alt="Logo" class="logo-image" />
                </span>
                <span *ngIf="
                    appUrl === 'https://20.197.51.80:7849/' ||
                    appUrl === 'https://pockit.pockitengineers.com/auth/'
                  ">
                  <nz-tag nzColor="#cd201f" class="pre-production-tag">
                    <span class="tag-text">Pre-Production</span>
                    <span class="tag-text">
                      V.{{ currentApplicationVersion }}</span>
                  </nz-tag>
                </span>
              </div>
            </div>
          </div>
          <div nz-col nzSpan="8" class="header-center-section" *ngIf="decreptedroleId !== 27">
            <nz-select [(ngModel)]="selectedMaster1" name="category" class="master-select">
              <nz-option *ngFor="let master of masters" [nzValue]="master" [nzLabel]="master"></nz-option>
            </nz-select>
            <nz-input-group nzSearch [nzAddOnAfter]="suffixIconButton" class="search-input-group">
              <input nz-input placeholder="Type min 3 characters and press enter to search...." class="search-input"
                name="searchQuery" autocomplete="off" [(ngModel)]="searchQuery" (keydown)="onKeyDown($event)"
                (focus)="showResults = true" (blur)="hideResults($event)" />
              <ng-template #suffixIconButton>
                <button (click)="onKeyDown3()" class="search-button" nz-button nzType="primary" nzSearch>
                  <span nz-icon nzType="search"></span>
                </button>
              </ng-template>
            </nz-input-group>
            <div class="search-results" *ngIf="showResults">
              <nz-spin [nzSpinning]="isSpining">
                <div>
                  <div class="search-results-container">
                    <div>
                      <div class="card-container">
                        <div *ngIf="
                            searchQuery != '' &&
                            searchQuery.length >= 3 &&
                            matchedRecord.length == 0
                          ">
                          <nz-empty [nzNotFoundContent]="contentTpl" class="no-results-empty"></nz-empty>
                          <ng-template #contentTpl>
                            <span> No Matching Records Found. </span>
                          </ng-template>
                        </div>
                        <div class="search-instruction" *ngIf="searchQuery == '' || searchQuery.length < 3">
                          <span>Type min 3 characters and press enter to
                            search....</span>
                        </div>
                        <div *ngIf="
                            searchQuery != '' &&
                            searchQuery.length >= 3 &&
                            matchedRecord.length > 0
                          ">
                          <div class="search-results-all" *ngIf="selectedMaster == 'All'">
                            <div *ngFor="let record of matchedRecord">
                              <div class="category-title">
                                <span>{{ record["CATEGORY"] }}s</span>
                              </div>
                              <div *ngFor="
                                  let record2 of record['MATCHED_RECORDS']
                                " class="cardstyle">
                                <div nz-row class="matched-record-item" (click)="onMatchedRecordClick(record2)">
                                  <div nz-col nzSpan="24" *ngIf="
                                      record['CATEGORY'] != 'Job' &&
                                      record['CATEGORY'] != 'Order'
                                    " class="record-title">
                                    {{ record2.TITLE }}
                                  </div>
                                  <div *ngIf="record['CATEGORY'] == 'Customer'" nz-col nzSpan="24"
                                    class="customer-details">
                                    {{
                                    record2.DATA.CUSTOMER_TYPE == "I"
                                    ? ""
                                    : record2.DATA.COMPANY_NAME
                                    }}
                                    {{ record2.DATA.EMAIL }},
                                    {{ record2.DATA.MOBILE_NO }}, Type-{{
                                    record2.DATA.CUSTOMER_TYPE == "I"
                                    ? "Individual(B2C)"
                                    : "Business(B2B)"
                                    }}
                                  </div>
                                  <div *ngIf="record['CATEGORY'] == 'Vendor'" nz-col nzSpan="24" class="vendor-details">
                                    {{ record2.DATA.EMAIL_ID }},
                                    {{ record2.DATA.MOBILE_NUMBER }},
                                    {{ record2.DATA.DISTRICT_NAME }}-
                                    {{ record2.DATA.PINCODE }}
                                  </div>
                                  <div *ngIf="record['CATEGORY'] == 'Technician'" nz-col nzSpan="24"
                                    class="technician-details">
                                    {{ record2.DATA.EMAIL_ID }},
                                    {{ record2.DATA.MOBILE_NUMBER }},
                                    {{ record2.DATA.DISTRICT_NAME }}-
                                    {{ record2.DATA.PINCODE }}
                                  </div>
                                  <div *ngIf="record['CATEGORY'] == 'Jobbbb'" nz-col nzSpan="24" class="jobbbb-details">
                                    {{ record2.DATA.CUSTOMER_NAME }},
                                    {{ record2.DATA.ORDER_NO }},
                                    {{ record2.DATA.SERVICE_NAME }}, Address-{{
                                    record2.DATA.SERVICE_ADDRESS
                                    }}
                                    ({{ record2.DATA.TERRITORY_NAME }}),
                                  </div>
                                  <div nz-col nzSpan="24" *ngIf="record['CATEGORY'] == 'Job'">
                                    <div nz-row class="job-record-content">
                                      <div class="mainnam" nz-col nzSpan="9" class="order-no-container">
                                        <span [attr.title]="record2.DATA.ORDER_NO" class="order-no-tag">
                                          {{ record2.DATA.ORDER_NO }}</span>
                                      </div>
                                      <div class="subnam" nz-col nzSpan="6" class="job-status-container">
                                        <nz-tag *ngIf="record2.DATA.STATUS == 'P'" [nzColor]="'orange'">Pending</nz-tag>
                                        <nz-tag *ngIf="
                                            record2.DATA.STATUS == 'AS' ||
                                            record2.DATA.STATUS == 'AC'
                                          " [nzColor]="'blue'">Assigned</nz-tag>
                                        <nz-tag *ngIf="record2.DATA.STATUS == 'CO'"
                                          [nzColor]="'green'">Completed</nz-tag>
                                      </div>
                                      <div class="mainnam" nz-col nzSpan="9" class="job-card-container">
                                        <span [attr.title]="
                                            record2.DATA.JOB_CARD_NO
                                          " class="job-card-tag">
                                          {{ record2.DATA.JOB_CARD_NO }}</span>
                                      </div>
                                      <div class="subnam" nz-col nzSpan="16" class="customer-name">
                                        <span nz-icon nzType="user" nzTheme="outline"></span>
                                        {{ record2.DATA.CUSTOMER_NAME }}
                                      </div>
                                      <div nz-col nzSpan="24">
                                        <div nz-row>
                                          <div nz-col nzSpan="1" class="location-icon-container">
                                            <svg viewBox="0 0 600 600" xml:space="preserve"
                                              xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 600 600">
                                              <path
                                                d="M256.08 54.999c84.87 0 153.81 68.94 153.81 153.96 0 77.059-87.02 195.03-153.2 246.04-85.33-69.24-154.58-167.75-154.58-246.04 0-85.021 68.94-153.96 153.97-153.96zm74.79 150.799c0-41.34-33.521-74.86-74.87-74.86-41.35 0-74.86 33.52-74.86 74.86 0 41.35 33.51 74.87 74.86 74.87s74.87-33.52 74.87-74.87z"
                                                fill="#ff1612" class="fill-ff7979"></path>
                                            </svg>
                                          </div>
                                          <div class="subnam" nz-col nzSpan="23" class="service-address">
                                            <span class="subnam service-address-text" *ngIf="
                                                record2.DATA[
                                                  'SERVICE_ADDRESS'
                                                ] != null
                                              ">
                                              <span class="service-address-truncated" *ngIf="
                                                  record2.DATA[
                                                    'SERVICE_ADDRESS'
                                                  ].length >= 65
                                                " nz-popover [nzPopoverContent]="
                                                  record2.DATA[
                                                    'SERVICE_ADDRESS'
                                                  ]
                                                " nzPopoverPlacement="topLeft">
                                                {{
                                                record2.DATA[
                                                "SERVICE_ADDRESS"
                                                ] == null
                                                ? "-"
                                                : (record2.DATA[
                                                "SERVICE_ADDRESS"
                                                ] | slice : 0 : 65)
                                                }}{{
                                                record2.DATA[
                                                "SERVICE_ADDRESS"
                                                ].length > 65
                                                ? "..."
                                                : ""
                                                }}
                                              </span>
                                              <span class="service-address-full" *ngIf="
                                                  record2.DATA[
                                                    'SERVICE_ADDRESS'
                                                  ].length < 65
                                                ">
                                                {{
                                                record2.DATA[
                                                "SERVICE_ADDRESS"
                                                ] == null
                                                ? "-"
                                                : (record2.DATA[
                                                "SERVICE_ADDRESS"
                                                ] | slice : 0 : 65)
                                                }}
                                                {{
                                                record2.DATA[
                                                "SERVICE_ADDRESS"
                                                ].length > 65
                                                ? "..."
                                                : ""
                                                }}
                                              </span>
                                            </span>
                                            <span *ngIf="
                                                record2.DATA[
                                                  'SERVICE_ADDRESS'
                                                ] == null
                                              ">-</span>
                                          </div>
                                        </div>
                                      </div>
                                      <div class="subnam" nz-col nzSpan="24" class="service-name">
                                        Service :
                                        {{ record2.DATA.SERVICE_NAME }}
                                      </div>
                                      <div class="subnam" nz-col nzSpan="24" class="territory-name">
                                        Territory Name :
                                        {{ record2.DATA.TERRITORY_NAME }}
                                      </div>
                                    </div>
                                  </div>
                                  <div *ngIf="record['CATEGORY'] == 'Orderrrr'" nz-col nzSpan="24"
                                    class="orderrrr-details">
                                    {{ record2.DATA.CUSTOMER_NAME }},
                                    {{ record2.DATA.EMAIL }},
                                    {{ record2.DATA.MOBILE_NO }}, Address-{{
                                    record2.DATA.SERVICE_ADDRESS
                                    }}
                                    ({{ record2.DATA.TERRITORY_NAME }}),
                                  </div>
                                  <div nz-col nzSpan="24" *ngIf="record['CATEGORY'] == 'Order'">
                                    <div nz-row class="order-record-content">
                                      <div nz-col nzSpan="24">
                                        <div nz-row>
                                          <div class="mainnam" nz-col nzSpan="24" class="order-number-container">
                                            <span class="order-number-tag" [attr.title]="
                                                record2.DATA.ORDER_NUMBER
                                              ">
                                              {{
                                              record2.DATA.ORDER_NUMBER
                                              }}</span>
                                          </div>
                                          <div class="subnam" nz-col nzSpan="16" class="order-customer-name">
                                            <span nz-icon nzType="user" nzTheme="outline"></span>
                                            {{ record2.DATA.CUSTOMER_NAME }}
                                          </div>
                                          <div class="subnam" nz-col nzSpan="8" class="order-mobile-number">
                                            <span nz-icon nzType="phone" nzTheme="fill"></span>
                                            <a class="mobile-link" href="tel:+9762417537">
                                              {{ record2.DATA.MOBILE_NO }}</a>
                                          </div>
                                          <div nz-col nzSpan="24" class="order-address-container">
                                            <div nz-row>
                                              <div nz-col nzSpan="1" class="order-location-icon-container">
                                                <svg viewBox="0 0 600 600" xml:space="preserve"
                                                  xmlns="http://www.w3.org/2000/svg"
                                                  enable-background="new 0 0 512 512">
                                                  <path
                                                    d="M256.08 54.999c84.87 0 153.81 68.94 153.81 153.96 0 77.059-87.02 195.03-153.2 246.04-85.33-69.24-154.58-167.75-154.58-246.04 0-85.021 68.94-153.96 153.97-153.96zm74.79 150.799c0-41.34-33.521-74.86-74.87-74.86-41.35 0-74.86 33.52-74.86 74.86 0 41.35 33.51 74.87 74.86 74.87s74.87-33.52 74.87-74.87z"
                                                    fill="#ff1612" class="fill-ff7979"></path>
                                                </svg>
                                              </div>
                                              <div class="subnam" nz-col nzSpan="23" class="order-service-address">
                                                <span class="subnam order-service-address-text" *ngIf="
                                                    record2.DATA[
                                                      'SERVICE_ADDRESS'
                                                    ] != null
                                                  ">
                                                  <span class="order-service-address-truncated" *ngIf="
                                                      record2.DATA[
                                                        'SERVICE_ADDRESS'
                                                      ].length >= 55
                                                    " nz-popover [nzPopoverContent]="
                                                      record2.DATA[
                                                        'SERVICE_ADDRESS'
                                                      ]
                                                    " nzPopoverPlacement="topLeft">
                                                    {{
                                                    record2.DATA[
                                                    "SERVICE_ADDRESS"
                                                    ] == null
                                                    ? "-"
                                                    : (record2.DATA[
                                                    "SERVICE_ADDRESS"
                                                    ] | slice : 0 : 55)
                                                    }}{{
                                                    record2.DATA[
                                                    "SERVICE_ADDRESS"
                                                    ].length > 55
                                                    ? "..."
                                                    : ""
                                                    }}
                                                  </span>
                                                  <span class="order-service-address-full" *ngIf="
                                                      record2.DATA[
                                                        'SERVICE_ADDRESS'
                                                      ].length < 55
                                                    ">
                                                    {{
                                                    record2.DATA[
                                                    "SERVICE_ADDRESS"
                                                    ] == null
                                                    ? "-"
                                                    : (record2.DATA[
                                                    "SERVICE_ADDRESS"
                                                    ] | slice : 0 : 55)
                                                    }}
                                                    {{
                                                    record2.DATA[
                                                    "SERVICE_ADDRESS"
                                                    ].length > 55
                                                    ? "..."
                                                    : ""
                                                    }}
                                                  </span>
                                                </span>
                                                <span *ngIf="
                                                    record2.DATA[
                                                      'SERVICE_ADDRESS'
                                                    ] == null
                                                  ">-</span>
                                              </div>
                                            </div>
                                          </div>
                                          <div class="subnam" nz-col nzSpan="24" class="order-territory-name">
                                            Territory:
                                            {{ record2.DATA.TERRITORY_NAME }}
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <nz-divider class="custom-divider"></nz-divider>
                            </div>
                            <div class="load-more-container" *ngIf="totaldataLength < totalRecord">
                              <button nz-button nzType="primary" nzSize="small" (click)="loadMore()">
                                Show More Results
                              </button>
                            </div>
                          </div>
                          <div class="search-results-specific" *ngIf="selectedMaster != 'All'">
                            <div *ngFor="let record of matchedRecord">
                              <div *ngFor="
                                  let record2 of record['MATCHED_RECORDS']
                                " class="cardstyle">
                                <div nz-row class="matched-record-item" (click)="onMatchedRecordClick(record2)">
                                  <div nz-col nzSpan="24" *ngIf="
                                      record['CATEGORY'] != 'Job' &&
                                      record['CATEGORY'] != 'Order'
                                    " class="record-title">
                                    {{ record2.TITLE }}
                                  </div>
                                  <div *ngIf="record['CATEGORY'] == 'Customer'" nz-col nzSpan="24"
                                    class="customer-details">
                                    {{
                                    record2.DATA.CUSTOMER_TYPE == "I"
                                    ? ""
                                    : record2.DATA.COMPANY_NAME
                                    }}
                                    {{ record2.DATA.EMAIL }},
                                    {{ record2.DATA.MOBILE_NO }}, Type-{{
                                    record2.DATA.CUSTOMER_TYPE == "I"
                                    ? "Individual(B2C)"
                                    : "Business(B2B)"
                                    }}
                                  </div>
                                  <div *ngIf="record['CATEGORY'] == 'Vendor'" nz-col nzSpan="24" class="vendor-details">
                                    {{ record2.DATA.EMAIL_ID }},
                                    {{ record2.DATA.MOBILE_NUMBER }},
                                    {{ record2.DATA.DISTRICT_NAME }}-
                                    {{ record2.DATA.PINCODE }}
                                  </div>
                                  <div *ngIf="record['CATEGORY'] == 'Technician'" nz-col nzSpan="24"
                                    class="technician-details">
                                    {{ record2.DATA.EMAIL_ID }},
                                    {{ record2.DATA.MOBILE_NUMBER }},
                                    {{ record2.DATA.DISTRICT_NAME }}-
                                    {{ record2.DATA.PINCODE }}
                                  </div>
                                  <div *ngIf="record['CATEGORY'] == 'Jobbb'" nz-col nzSpan="24" class="jobbb-details">
                                    {{ record2.DATA.CUSTOMER_NAME }},
                                    {{ record2.DATA.ORDER_NO }},
                                    {{ record2.DATA.SERVICE_NAME }}, Address-{{
                                    record2.DATA.SERVICE_ADDRESS
                                    }}
                                    ({{ record2.DATA.TERRITORY_NAME }}),
                                  </div>
                                  <div nz-col nzSpan="24" *ngIf="record['CATEGORY'] == 'Job'">
                                    <div nz-row class="job-record-content">
                                      <div class="mainnam" nz-col nzSpan="9" class="order-no-container">
                                        <span class="order-no-tag" [attr.title]="record2.DATA.ORDER_NO">
                                          {{ record2.DATA.ORDER_NO }}</span>
                                      </div>
                                      <div class="subnam" nz-col nzSpan="6" class="job-status-container">
                                        <nz-tag *ngIf="record2.DATA.STATUS == 'P'" [nzColor]="'orange'">Pending</nz-tag>
                                        <nz-tag *ngIf="
                                            record2.DATA.STATUS == 'AS' ||
                                            record2.DATA.STATUS == 'AC'
                                          " [nzColor]="'blue'">Assigned</nz-tag>
                                        <nz-tag *ngIf="record2.DATA.STATUS == 'CO'"
                                          [nzColor]="'green'">Completed</nz-tag>
                                      </div>
                                      <div class="mainnam" nz-col nzSpan="9" class="job-card-container">
                                        <span class="job-card-tag" [attr.title]="
                                            record2.DATA.JOB_CARD_NO
                                          ">
                                          {{ record2.DATA.JOB_CARD_NO }}</span>
                                      </div>
                                      <div class="subnam" nz-col nzSpan="24" class="customer-name">
                                        <span *ngIf="
                                            record2.DATA.CUSTOMER_TYPE == 'I'
                                          " nz-icon nzType="user" nzTheme="outline"></span>
                                        <svg *ngIf="
                                            record2.DATA.CUSTOMER_TYPE != 'I'
                                          " enable-background="new 0 0 55 55" height="17px" id="Layer_1" version="1.1"
                                          viewBox="0 0 55 55" width="17px" xml:space="preserve"
                                          xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                          <path clip-rule="evenodd"
                                            d="M6,47V20c0-2.209,1.791-4,4-4l0,0v-4c0-1.104,0.896-2,2-2h2V2c0-0.552,0.447-1,1-1  s1,0.448,1,1v8h2c1.104,0,2,0.896,2,2v4l0,0l0,0c2.209,0,4,1.791,4,4v8h7v-6h4v-3h6v3h1v25H6z M18,13c0-0.552-0.447-1-1-1h-4  c-0.553,0-1,0.448-1,1v3h6V13z M22,20c0-1.104-0.896-2-2-2H10c-1.104,0-2,0.896-2,2v25h14V20z M31,30h-7v15h7V30z M40,24h-7v21h7V24  z M36,27h1c0.553,0,1,0.447,1,1v1c0,0.553-0.447,1-1,1h-1c-0.553,0-1-0.447-1-1v-1C35,27.447,35.447,27,36,27z M36,33h1  c0.553,0,1,0.447,1,1v1c0,0.553-0.447,1-1,1h-1c-0.553,0-1-0.447-1-1v-1C35,33.447,35.447,33,36,33z M36,39h1c0.553,0,1,0.447,1,1v1  c0,0.553-0.447,1-1,1h-1c-0.553,0-1-0.447-1-1v-1C35,39.447,35.447,39,36,39z M27,33h1c0.553,0,1,0.447,1,1v1c0,0.553-0.447,1-1,1  h-1c-0.553,0-1-0.447-1-1v-1C26,33.447,26.447,33,27,33z M27,39h1c0.553,0,1,0.447,1,1v1c0,0.553-0.447,1-1,1h-1  c-0.553,0-1-0.447-1-1v-1C26,39.447,26.447,39,27,39z M18,42h-1c-0.553,0-1-0.447-1-1v-1c0-0.552,0.447-1,1-1h1c0.553,0,1,0.448,1,1  v1C19,41.553,18.553,42,18,42z M18,36h-1c-0.553,0-1-0.447-1-1v-1c0-0.552,0.447-1,1-1h1c0.553,0,1,0.448,1,1v1  C19,35.553,18.553,36,18,36z M18,30h-1c-0.553,0-1-0.447-1-1v-1c0-0.552,0.447-1,1-1h1c0.553,0,1,0.448,1,1v1  C19,29.553,18.553,30,18,30z M18,24h-1c-0.553,0-1-0.447-1-1v-1c0-0.552,0.447-1,1-1h1c0.553,0,1,0.448,1,1v1  C19,23.553,18.553,24,18,24z M13,42h-1c-0.553,0-1-0.447-1-1v-1c0-0.553,0.447-1,1-1h1c0.553,0,1,0.447,1,1v1  C14,41.553,13.553,42,13,42z M13,36h-1c-0.553,0-1-0.447-1-1v-1c0-0.553,0.447-1,1-1h1c0.553,0,1,0.447,1,1v1  C14,35.553,13.553,36,13,36z M13,30h-1c-0.553,0-1-0.447-1-1v-1c0-0.552,0.447-1,1-1h1c0.553,0,1,0.448,1,1v1  C14,29.553,13.553,30,13,30z M13,24h-1c-0.553,0-1-0.447-1-1v-1c0-0.552,0.447-1,1-1h1c0.553,0,1,0.448,1,1v1  C14,23.553,13.553,24,13,24z"
                                            fill-rule="evenodd" />
                                        </svg>
                                        {{ record2.DATA.CUSTOMER_NAME }}
                                      </div>
                                      <div nz-col nzSpan="24">
                                        <div nz-row>
                                          <div nz-col nzSpan="1" class="location-icon-container">
                                            <svg viewBox="0 0 600 600" xml:space="preserve"
                                              xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 600 600">
                                              <path
                                                d="M256.08 54.999c84.87 0 153.81 68.94 153.81 153.96 0 77.059-87.02 195.03-153.2 246.04-85.33-69.24-154.58-167.75-154.58-246.04 0-85.021 68.94-153.96 153.97-153.96zm74.79 150.799c0-41.34-33.521-74.86-74.87-74.86-41.35 0-74.86 33.52-74.86 74.86 0 41.35 33.51 74.87 74.86 74.87s74.87-33.52 74.87-74.87z"
                                                fill="#ff1612" class="fill-ff7979"></path>
                                            </svg>
                                          </div>
                                          <div class="subnam" nz-col nzSpan="23" class="service-address">
                                            <span class="subnam service-address-text" *ngIf="
                                                record2.DATA[
                                                  'SERVICE_ADDRESS'
                                                ] != null
                                              ">
                                              <span class="service-address-truncated" *ngIf="
                                                  record2.DATA[
                                                    'SERVICE_ADDRESS'
                                                  ].length >= 65
                                                " nz-popover [nzPopoverContent]="
                                                  record2.DATA[
                                                    'SERVICE_ADDRESS'
                                                  ]
                                                " nzPopoverPlacement="topLeft">
                                                {{
                                                record2.DATA[
                                                "SERVICE_ADDRESS"
                                                ] == null
                                                ? "-"
                                                : (record2.DATA[
                                                "SERVICE_ADDRESS"
                                                ] | slice : 0 : 65)
                                                }}{{
                                                record2.DATA[
                                                "SERVICE_ADDRESS"
                                                ].length > 65
                                                ? "..."
                                                : ""
                                                }}
                                              </span>
                                              <span class="service-address-full" *ngIf="
                                                  record2.DATA[
                                                    'SERVICE_ADDRESS'
                                                  ].length < 65
                                                ">
                                                {{
                                                record2.DATA[
                                                "SERVICE_ADDRESS"
                                                ] == null
                                                ? "-"
                                                : (record2.DATA[
                                                "SERVICE_ADDRESS"
                                                ] | slice : 0 : 65)
                                                }}
                                                {{
                                                record2.DATA[
                                                "SERVICE_ADDRESS"
                                                ].length > 65
                                                ? "..."
                                                : ""
                                                }}
                                              </span>
                                            </span>
                                            <span *ngIf="
                                                record2.DATA[
                                                  'SERVICE_ADDRESS'
                                                ] == null
                                              ">-</span>
                                          </div>
                                        </div>
                                      </div>
                                      <div class="subnam" nz-col nzSpan="24" class="service-name">
                                        Service :
                                        {{ record2.DATA.SERVICE_NAME }}
                                      </div>
                                      <div class="subnam" nz-col nzSpan="24" class="territory-name">
                                        Territory Name :
                                        {{ record2.DATA.TERRITORY_NAME }}
                                      </div>
                                    </div>
                                  </div>
                                  <div *ngIf="record['CATEGORY'] == 'Orderrrr'" nz-col nzSpan="24"
                                    class="orderrrr-details">
                                    {{ record2.DATA.CUSTOMER_NAME }},
                                    {{ record2.DATA.EMAIL }},
                                    {{ record2.DATA.MOBILE_NO }}, Address-{{
                                    record2.DATA.SERVICE_ADDRESS
                                    }}
                                    ({{ record2.DATA.TERRITORY_NAME }}),
                                  </div>
                                  <div nz-col nzSpan="24" *ngIf="record['CATEGORY'] == 'Order'">
                                    <div nz-row class="order-record-content">
                                      <div nz-col nzSpan="24">
                                        <div nz-row>
                                          <div class="mainnam" nz-col nzSpan="12" class="order-number-container">
                                            <span class="order-number-tag" [attr.title]="
                                                record2.DATA.ORDER_NUMBER
                                              ">
                                              {{
                                              record2.DATA.ORDER_NUMBER
                                              }}</span>
                                          </div>
                                          <div class="subnam" nz-col nzSpan="16" class="order-customer-name">
                                            <span nz-icon nzType="user" nzTheme="outline"></span>
                                            {{ record2.DATA.CUSTOMER_NAME }}
                                          </div>
                                          <div class="subnam" nz-col nzSpan="8" class="order-mobile-number">
                                            <span nz-icon nzType="mobile" nzTheme="outline"></span>
                                            <a class="mobile-link" href="tel:+9762417537">
                                              {{ record2.DATA.MOBILE_NO }}</a>
                                          </div>
                                          <div nz-col nzSpan="24" class="order-address-container">
                                            <div nz-row>
                                              <div nz-col nzSpan="1" class="order-location-icon-container">
                                                <svg viewBox="0 0 600 600" xml:space="preserve"
                                                  xmlns="http://www.w3.org/2000/svg"
                                                  enable-background="new 0 0 512 512">
                                                  <path
                                                    d="M256.08 54.999c84.87 0 153.81 68.94 153.81 153.96 0 77.059-87.02 195.03-153.2 246.04-85.33-69.24-154.58-167.75-154.58-246.04 0-85.021 68.94-153.96 153.97-153.96zm74.79 150.799c0-41.34-33.521-74.86-74.87-74.86-41.35 0-74.86 33.52-74.86 74.86 0 41.35 33.51 74.87 74.86 74.87s74.87-33.52 74.87-74.87z"
                                                    fill="#ff1612" class="fill-ff7979"></path>
                                                </svg>
                                              </div>
                                              <div class="subnam" nz-col nzSpan="23" class="order-service-address">
                                                <span class="subnam order-service-address-text" *ngIf="
                                                    record2.DATA[
                                                      'SERVICE_ADDRESS'
                                                    ] != null
                                                  ">
                                                  <span class="order-service-address-truncated" *ngIf="
                                                      record2.DATA[
                                                        'SERVICE_ADDRESS'
                                                      ].length >= 55
                                                    " nz-popover [nzPopoverContent]="
                                                      record2.DATA[
                                                        'SERVICE_ADDRESS'
                                                      ]
                                                    " nzPopoverPlacement="topLeft">
                                                    {{
                                                    record2.DATA[
                                                    "SERVICE_ADDRESS"
                                                    ] == null
                                                    ? "-"
                                                    : (record2.DATA[
                                                    "SERVICE_ADDRESS"
                                                    ] | slice : 0 : 55)
                                                    }}{{
                                                    record2.DATA[
                                                    "SERVICE_ADDRESS"
                                                    ].length > 55
                                                    ? "..."
                                                    : ""
                                                    }}
                                                  </span>
                                                  <span class="order-service-address-full" *ngIf="
                                                      record2.DATA[
                                                        'SERVICE_ADDRESS'
                                                      ].length < 55
                                                    ">
                                                    {{
                                                    record2.DATA[
                                                    "SERVICE_ADDRESS"
                                                    ] == null
                                                    ? "-"
                                                    : (record2.DATA[
                                                    "SERVICE_ADDRESS"
                                                    ] | slice : 0 : 55)
                                                    }}
                                                    {{
                                                    record2.DATA[
                                                    "SERVICE_ADDRESS"
                                                    ].length > 55
                                                    ? "..."
                                                    : ""
                                                    }}
                                                  </span>
                                                </span>
                                                <span *ngIf="
                                                    record2.DATA[
                                                      'SERVICE_ADDRESS'
                                                    ] == null
                                                  ">-</span>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <div class="load-more-container" *ngIf="totaldataLength < totalRecord">
                              <button nz-button nzType="primary" nzSize="small" (click)="loadMore()">
                                Show More Results
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </nz-spin>
            </div>
          </div>
          <div nz-col class="header-right-section" [nzSpan]="decreptedroleId !== 27 ? 8 : 16">
            <ng-container *ngFor="let menu of clickedIcons; let i = index">
              <span class="icon-container">
                <span nz-tooltip nzTooltipTitle="{{ menu.title }}" (click)="onIconClick(menu)"
                  nzTooltipPlacement="bottom" class="icon-wrapper">
                  <nz-avatar [nzIcon]="menu.icon" class="avatar-icon">
                  </nz-avatar>
                  <span class="cross-icon" (click)="onCrossClick(menu, i)">âœ–</span>
                </span>
              </span>
            </ng-container>
            <span *ngIf="decreptedroleId !== 27" nzTooltipPlacement="bottom" nz-tooltip nzTooltipTitle="Add Form"
              (click)="toggleDropdown()" nz-dropdown nzTrigger="click" nzPlacement="bottomRight" [nzDropdownMenu]="menu"
              class="add-form-icon">
              <nz-avatar nzIcon="plus" class="plus-avatar"></nz-avatar>
              <nz-dropdown-menu #menu="nzDropdownMenu">
                <ul nz-menu>
                  <ng-container *ngFor="let menu of menus">
                    <li *ngIf="menu.children && menu.children.length" nz-submenu [nzTitle]="menu.title"
                      [ngClass]="{ 'selected-item': isSelectedParent(menu) }">
                      <ul class="custom-submenu">
                        <li *ngFor="let child of menu.children" nz-menu-item (click)="onChildMenuClick(child, menu)"
                          [ngClass]="{ 'selected-item': isSelected(child) }">
                          <a>{{ child.title }}</a>
                        </li>
                      </ul>
                    </li>
                    <li *ngIf="!menu.children || !menu.children.length" nz-menu-item
                      (click)="onChildMenuClick(menu, null)" [ngClass]="{ 'selected-item': isSelected(menu) }">
                      <a>{{ menu.title }}</a>
                    </li>
                  </ng-container>
                </ul>
              </nz-dropdown-menu>
            </span>
            <span *ngIf="decreptedroleId == 8" (click)="showApkVersionModal()" class="apk-version-icon">
              <nz-avatar nzIcon="android" nz-tooltip nzTooltipTitle="APK Version" class="android-avatar">
              </nz-avatar>
            </span>
            <span *ngIf="decreptedroleId !== 27" nz-tooltip nzTooltipTitle="Notifications" (click)="isNotification()"
              class="notification-icon">
              <nz-badge [nzCount]="notificationCount" [nzOverflowCount]="10" nzSize="small" [nzShowZero]="false">
                <nz-avatar nzIcon="bell" class="bell-avatar"> </nz-avatar>
              </nz-badge>
            </span>
            <span *ngIf="
                imagePath != null && imagePath != undefined && imagePath != '';
                else showAvtar
              " (click)="isProfile()" nz-tooltip nzTooltipTitle="Profile" class="profile-avatar-container">
              <nz-avatar nzIcon="user" [nzSrc]="imagePath" class="profile-avatar"></nz-avatar>
            </span>
            <ng-template #showAvtar>
              <span class="default-avatar" nz-tooltip nzTooltipTitle="Profile" nz-icon nzType="user" nzTheme="outline"
                (click)="isProfile()">
              </span>
            </ng-template>
          </div>
        </div>
      </nz-header>
      <nz-content [ngClass]="screenwidth > 768 ? '' : 'mobile-content'">
        <div class="inner-content">
          <router-outlet></router-outlet>
        </div>
      </nz-content>
    </nz-layout>
  </nz-layout>
</ng-template>
<nz-layout *ngIf="!isLogedIn" class="login-layout">
  <app-login></app-login>
</nz-layout>
<nz-drawer nzMaskClosable="false" [nzClosable]="true" [nzVisible]="isNotificationVisible" nzPlacement="right"
  nzTitle="Notifications" (nzOnClose)="isNotificationCancel()" nzWidth="40%">
  <ng-container *nzDrawerContent>
    <div class="notification-header">
      <button *ngIf="decreptedroleId == 8" nz-button nzType="primary" nzTooltipTitle="Push Notifications"
        nzTooltipPlacement="bottom" [nzSize]="'small'" nz-tooltip (click)="openSendNotiDrawer()"
        class="push-notification-btn">
        Push Notifications &nbsp;
        <img src="/assets/sendIcon.png" class="send-icon" />
      </button>
    </div>
    <div>
      <form nz-form #resetform="ngForm" *ngIf="!showConfirmPassword">
        <nz-spin [nzSpinning]="resetPasswordLoading">
          <div class="notification-filter-tabs">
            <button class="tab-btn" [class.active]="selectedType === 'All'" (click)="filterNotificationstab('All')">
              All
            </button>
            <button class="tab-btn" [class.active]="selectedType === 'O'" (click)="filterNotificationstab('O')">
              Order
            </button>
            <button class="tab-btn" [class.active]="selectedType === 'SH'" (click)="filterNotificationstab('SH')">
              Shop
            </button>
            <button class="tab-btn" [class.active]="selectedType === 'J'" (click)="filterNotificationstab('J')">
              Job
            </button>
            <button class="tab-btn" [class.active]="selectedType === 'PJ'" (click)="filterNotificationstab('PJ')">
              Pending Job
            </button>
            <button class="tab-btn" [class.active]="selectedType === 'TA'" (click)="filterNotificationstab('TA')">
              Approval Requests
            </button>
            <button class="tab-btn" [class.active]="selectedType === 'IR'" (click)="filterNotificationstab('IR')">
              Inventory Requests
            </button>
            <button class="tab-btn" [class.active]="selectedType === 'F'" (click)="filterNotificationstab('F')">
              Feedbacks
            </button>
          </div>
          <nz-input-group nzSearch class="notification-search">
            <input type="text" name="notification" id="notification" (keyup)="onKeyupS($event)"
              (keydown.enter)="searchNotification($event)" (keydown.enter)="onEnterKey($event)" [(ngModel)]="searchTerm"
              autocomplete="off" nz-input placeholder="Search notifications" />
          </nz-input-group>
          <ng-container *ngIf="notifications.length > 0; else noNotifications">
            <div class="notifications-list">
              <div *ngFor="let notification of notifications" class="notification-item">
                <nz-card [nzBordered]="false" class="notification-card">
                  <div class="notification-content">
                    <div class="notification-icon-wrapper" [ngClass]="getNotificationIconClass(notification)">
                      <i [class]="getNotificationIcon(notification)"></i>
                    </div>
                    <div class="notification-details">
                      <div class="notification-title-row">
                        <span class="notification-title" nz-popover [nzPopoverTitle]="
                            notification?.TITLE.length > 60
                              ? notification?.TITLE
                              : ''
                          ">
                          {{
                          notification?.TITLE.length > 60
                          ? (notification?.TITLE | slice : 0 : 60) + "..."
                          : notification?.TITLE
                          }}
                        </span>
                        <button *ngIf="notification?.ATTACHMENT?.trim() !== ''" nz-button nzType="default"
                          nzShape="circle" nz-tooltip="Download Attachment"
                          (click)="downloadDocument(notification.ATTACHMENT)" class="attachment-download-btn">
                          <i nz-icon nzType="download" nzTheme="outline"></i>
                        </button>
                      </div>
                      <p class="notification-description">
                        <span *ngIf="!expandedNotifications[notification?.ID]">
                          {{ getTruncatedText(notification?.DESCRIPTION) }}
                          <a *ngIf="notification?.DESCRIPTION.length > 100" (click)="toggleExpand(notification?.ID)"
                            class="read-more-link">
                            Read More
                          </a>
                        </span>
                        <span *ngIf="expandedNotifications[notification?.ID]">
                          {{ notification?.DESCRIPTION }}
                          <a *ngIf="notification?.DESCRIPTION.length > 100" (click)="toggleExpand(notification?.ID)"
                            class="read-more-link">
                            Read Less
                          </a>
                        </span>
                      </p>
                      <p *ngIf="notification?.ORDER_NO" class="notification-order-no">
                        Order No.: {{ notification?.ORDER_NO }}
                      </p>
                      <p *ngIf="notification?.JOB_CARD_NO" class="notification-job-no">
                        Job No.: {{ notification?.JOB_CARD_NO }}
                      </p>
                      <p *ngIf="notification?.CREATED_MODIFIED_DATE" class="notification-date">
                        {{
                        notification?.CREATED_MODIFIED_DATE
                        | date : "dd/MM/yyyy HH:mm a"
                        }}
                      </p>
                    </div>
                  </div>
                </nz-card>
              </div>
              <div class="load-more-notifications" *ngIf="totalRecords > notifications.length">
                <button nz-button nzType="primary" (click)="loadMore1()">
                  Load More
                </button>
              </div>
            </div>
          </ng-container>
          <ng-template #noNotifications>
            <div class="no-notifications-container">
              <nz-spin nzSimple [nzSize]="'large'"></nz-spin>
              <div class="no-notifications-text">
                <h3>Notifications Not Available</h3>
              </div>
            </div>
          </ng-template>
        </nz-spin>
      </form>
    </div>
  </ng-container>
</nz-drawer>
<nz-drawer nzMaskClosable="false" [nzClosable]="false" [nzVisible]="isProfileVisible" nzPlacement="right"
  (nzOnClose)="isProfileCancel()" nzWidth="30%" [nzBodyStyle]="{ padding: '0' }">
  <ng-container *nzDrawerContent>
    <form nz-form #resetform="ngForm" *ngIf="!showConfirmPassword">
      <nz-card class="profile-header-card">
        <button nz-button nzType="text" nzShape="circle" class="profile-close-btn" (click)="isProfileCancel()">
          <span nz-icon nzType="close" nzTheme="outline"></span>
        </button>
        <nz-card-meta [nzAvatar]="avatarTemplate" [nzTitle]="titleTemplate"
          [nzDescription]="descriptionTemplate"></nz-card-meta>
        <ng-template #titleTemplate>
          <h5 class="profile-user-name">
            {{ decreptedUserName }}
          </h5>
        </ng-template>
        <ng-template #descriptionTemplate>
          <div class="profile-email">
            {{ "Email ID: " + decryptedEmail }}
          </div>
          <div class="profile-action-buttons">
            <button nz-button nzType="primary" *ngIf="decreptedroleId !== 27" class="change-password-btn"
              (click)="isChangePassword()">
              Change Password
            </button>
            <button nz-button class="logout-btn" [nzLoading]="loadlogout" (click)="logout()">
              <span nz-icon nzType="logout" nzTheme="outline"></span> Logout
            </button>
          </div>
        </ng-template>
        <ng-template #avatarTemplate>
          <nz-avatar [nzSize]="70" class="profile-avatar-large" [nzShape]="'circle'" [nzSrc]="imagePath" [nzText]="
              !imagePath && decreptedUserName
                ? decreptedUserName.charAt(0).toUpperCase()
                : ''
            "></nz-avatar>
        </ng-template>
      </nz-card>
      <nz-card *ngIf="decreptedroleId !== 27" class="help-card">
        <h5 class="help-title"><b>Need Help?</b></h5>
        <div class="help-options">
          <div class="help-options-container">
            <div class="help-option-item" (click)="viewHelpGuide()">
              <span nz-icon nztype="read" nztheme="outline" class="help-icon read-icon">
                <svg viewBox="64 64 896 896" focusable="false" fill="currentColor" width="2em" height="2em"
                  data-icon="read" aria-hidden="true">
                  <path
                    d="M928 161H699.2c-49.1 0-97.1 14.1-138.4 40.7L512 233l-48.8-31.3A255.2 255.2 0 00324.8 161H96c-17.7 0-32 14.3-32 32v568c0 17.7 14.3 32 32 32h228.8c49.1 0 97.1 14.1 138.4 40.7l44.4 28.6c1.3.8 2.8 1.3 4.3 1.3s3-.4 4.3-1.3l44.4-28.6C602 807.1 650.1 793 699.2 793H928c17.7 0 32-14.3 32-32V193c0-17.7-14.3-32-32-32zM324.8 721H136V233h188.8c35.4 0 69.8 10.1 99.5 29.2l48.8 31.3 6.9 4.5v462c-47.6-25.6-100.8-39-155.2-39zm563.2 0H699.2c-54.4 0-107.6 13.4-155.2 39V298l6.9-4.5 48.8-31.3c29.7-19.1 64.1-29.2 99.5-29.2H888v488zM396.9 361H211.1c-3.9 0-7.1 3.4-7.1 7.5v45c0 4.1 3.2 7.5 7.1 7.5h185.7c3.9 0 7.1-3.4 7.1-7.5v-45c.1-4.1-3.1-7.5-7-7.5zm223.1 7.5v45c0 4.1 3.2 7.5 7.1 7.5h185.7c3.9 0 7.1-3.4 7.1-7.5v-45c0-4.1-3.2-7.5-7.1-7.5H627.1c-3.9 0-7.1 3.4-7.1 7.5zM396.9 501H211.1c-3.9 0-7.1 3.4-7.1 7.5v45c0 4.1 3.2 7.5 7.1 7.5h185.7c3.9 0 7.1-3.4 7.1-7.5v-45c.1-4.1-3.1-7.5-7-7.5zm416 0H627.1c-3.9 0-7.1 3.4-7.1 7.5v45c0 4.1 3.2 7.5 7.1 7.5h185.7c3.9 0 7.1-3.4 7.1-7.5v-45c.1-4.1-3.1-7.5-7-7.5z">
                  </path>
                </svg>
              </span>
              Help Guide
            </div>
            <div class="help-option-item" (click)="viewknowledge()">
              <span (click)="viewknowledge()" nz-icon nztype="read" nztheme="outline" class="help-icon knowledge-icon">
                <svg xmlns="http://www.w3.org/2000/svg" fill="#000000" width="3em" height="3em" viewBox="0 0 100 100">
                  <path
                    d="m32 59h13c1.1 0 2-0.9 2-2v-30c0-2.2-2-4-4-4h-10.7c-1.3 0-2.3 1-2.3 2.3v31.7c0 1.1 0.9 2 2 2z m44-30v32c0 2.2-1.8 4-4 4h-44c-2.2 0-4-1.8-4-4v-32c-3.3 0-6 2.7-6 6v30c0 3.3 2.7 6 6 6h19c1.1 0 2 0.9 2 2s0.9 2 2 2h6c1.1 0 2-0.9 2-2s0.9-2 2-2h19c3.3 0 6-2.7 6-6v-30c0-3.3-2.7-6-6-6z m-21 30h12.7c1.3 0 2.3-1 2.3-2.3v-31.7c0-1.1-0.9-2-2-2h-11c-2 0-4 1.8-4 4v30c0 1.1 0.9 2 2 2z" />
                </svg>
              </span>
              Knowledge Base
            </div>
            <div class="help-option-item" (click)="openDrawer()">
              <span class="help-icon time-slot-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" viewBox="0 0 24 24" fill="none">
                  <path
                    d="M12 7V12H15M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z"
                    stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </span>
              Time Slot
            </div>
          </div>
        </div>
      </nz-card>
      <nz-card *ngIf="decreptedroleId === 9" class="earnings-card">
        <div class="earnings-header">
          <h5 class="earnings-title"><b>Earnings</b></h5>
          <nz-tag nzColor="#051856" (click)="ViewVendorReport()" class="view-details-tag" nz-tooltip
            nzTooltipTitle="View Details">
            <span nz-icon nzType="eye" nzTheme="outline" class="eye-icon"></span>
            &nbsp;&nbsp;View Details
          </nz-tag>
        </div>
        <div nz-row class="earnings-content">
          <div nz-col nzSpan="11">
            <div class="earnings-box-container">
              <div class="earnings-box">
                <p class="earnings-amount">
                  {{ earningdata[0]?.TODAYS_EARNINGS ?? 0 }}
                </p>
                <p class="earnings-label">Today's</p>
              </div>
            </div>
          </div>
          <div nz-col nzSpan="2" class="earnings-spacer"></div>
          <div nz-col nzSpan="11">
            <div class="earnings-box-container">
              <div class="earnings-box">
                <p class="earnings-amount">
                  {{ earningdata[0]?.TOTAL_EARNINGS ?? 0 }}
                </p>
                <p class="earnings-label">Total</p>
              </div>
            </div>
          </div>
        </div>
      </nz-card>
      <div *ngIf="drawerVendorReportVisible">
        <nz-drawer [nzBodyStyle]="{
            height: 'calc(100% - 55px)',
            overflow: 'auto',
            'padding-bottom': '53px',
            'padding-top': '0px',
            'padding-left': '15px',
            'padding-right': '15px'
          }" [nzClosable]="true" [nzMask]="true" [nzMaskClosable]="false" [nzWidth]="'100%'"
          [nzVisible]="drawerVendorReportVisible" [nzTitle]="drawerTitle" (nzOnClose)="drawerCloseVendorReport()"
          (nzKeyboard)="(true)">
          <ng-container *nzDrawerContent>
            <app-vendor-detailed-report [drawerClose]="closeCallbackVendorReport"
              [drawerVisible]="drawerVendorReportVisible" [data]="drawerDataVendor">
            </app-vendor-detailed-report>
          </ng-container>
        </nz-drawer>
      </div>
    </form>
  </ng-container>
</nz-drawer>
<nz-modal [nzStyle]="{ top: '30px' }" nzWidth="400px" nzMaskClosable="false" [(nzVisible)]="visiblesave"
  nzTitle="Change Password" (nzOnCancel)="handleCancelTop()" (nzOnOk)="handleOkTop()" [nzOkText]="'Save'">
  <ng-container *nzModalContent>
    <form nz-form #resetform="ngForm">
      <nz-spin [nzSpinning]="resetPasswordLoading">
        <div nz-row>
          <div nz-col nzSpan="24">
            <nz-form-item>
              <nz-form-label nzRequired nzNoColon>Current Password</nz-form-label>
              <nz-form-control>
                <nz-input-group nzPrefixIcon="lock" [nzSuffix]="suffixTemplatePassword">
                  <input class="password-input" nz-input [type]="passwordVisible ? 'text' : 'password'" name="currpass"
                    [(ngModel)]="PASSWORD" #oldpass="ngModel" placeholder="Enter Current Password" maxlength="20"
                    autocomplete="off" required />
                </nz-input-group>
                <h6 class="password-length-indicator" *ngIf="PASSWORD">
                  {{ PASSWORD.length }}/20
                </h6>
                <ng-template #suffixTemplatePassword>
                  <i nz-icon [nzType]="passwordVisible ? 'eye' : 'eye-invisible'"
                    (click)="passwordVisible = !passwordVisible"></i>
                </ng-template>
              </nz-form-control>
              <div class="password-error">
                <span *ngIf="oldpass.errors?.['required'] && oldpass.touched">Current password is required.</span>
              </div>
            </nz-form-item>
          </div>
          <div nz-col nzSpan="24">
            <nz-form-item>
              <nz-form-label nzRequired nzNoColon>New Password &nbsp;
                <span><i nz-icon nzType="info-circle" nzTheme="twotone" nzTooltipTitle="Note: Password must contain at least 8
                        characters which include 1 uppercase, 1 special character, and 1 number."
                    nzTooltipPlacement="top" nz-tooltip>
                  </i>
                </span>
              </nz-form-label>
              <nz-form-control class="new-password-control" nzRequired>
                <nz-input-group nzPrefixIcon="lock" [nzSuffix]="suffixTemplateNewPassword">
                  <input nz-input [type]="newPasswordVisible ? 'text' : 'password'" name="password"
                    [(ngModel)]="NEWPASSWORD" #newpassword="ngModel" placeholder="Enter New Password" required
                    maxlength="20" minlength="8" [pattern]="passwordPattern" autocomplete="off" />
                </nz-input-group>
                <h6 class="password-length-indicator" *ngIf="NEWPASSWORD">
                  {{ NEWPASSWORD.length }}/20
                </h6>
                <ng-template #suffixTemplateNewPassword>
                  <i nz-icon [nzType]="newPasswordVisible ? 'eye' : 'eye-invisible'"
                    (click)="newPasswordVisible = !newPasswordVisible"></i>
                </ng-template>
              </nz-form-control>
              <div class="password-error">
                <span *ngIf="newpassword.errors?.['required'] && newpassword.touched">New password is required.</span>
                <span *ngIf="newpassword.errors?.['minlength'] && newpassword.touched">Password must be at least 8
                  characters long.</span>
                <span *ngIf="newpassword.errors?.['maxlength'] && newpassword.touched">Password cannot exceed 20
                  characters.</span>
                <span
                  *ngIf="!newpassword.errors?.['minlength'] && newpassword.errors?.['pattern'] && newpassword.touched">Password
                  must meet the required pattern</span>
              </div>
            </nz-form-item>
          </div>
          <div nz-col nzSpan="24">
            <nz-form-item>
              <nz-form-label nzRequired nzNoColon>Confirm Password</nz-form-label>
              <nz-form-control>
                <nz-input-group nzPrefixIcon="lock" [nzSuffix]="suffixTemplateReEnterNewPassword">
                  <input class="password-input" nz-input #confpassword="ngModel"
                    [type]="reEnterNewPasswordVisible ? 'text' : 'password'" name="confpass" [(ngModel)]="CONFPASSWORD"
                    placeholder="Re-Enter New Password" minlength="8" maxlength="20" autocomplete="off" required />
                </nz-input-group>
                <h6 class="password-length-indicator" *ngIf="CONFPASSWORD">
                  {{ CONFPASSWORD.length }}/20
                </h6>
                <ng-template #suffixTemplateReEnterNewPassword>
                  <i nz-icon [nzType]="
                      reEnterNewPasswordVisible ? 'eye' : 'eye-invisible'
                    " (click)="
                      reEnterNewPasswordVisible = !reEnterNewPasswordVisible
                    "></i>
                </ng-template>
              </nz-form-control>
              <div class="password-error">
                <span *ngIf="confpassword.errors?.['required'] && confpassword.touched">Confirm password is
                  required.</span>
                <span *ngIf="confpassword.errors?.['minlength'] && confpassword.touched">Password must be at least 8
                  characters long.</span>
                <span *ngIf="confpassword.errors?.['maxlength'] && confpassword.touched">Password cannot exceed 20
                  characters.</span>
              </div>
            </nz-form-item>
          </div>
        </div>
      </nz-spin>
    </form>
  </ng-container>
</nz-modal>
<div *ngIf="orgdrawerVisible">
  <nz-drawer [nzBodyStyle]="{
      height: 'calc(100% - 55px)',
      overflow: 'auto',
      'padding-bottom': '53px'
    }" [nzClosable]="true" [nzMask]="true" [nzMaskClosable]="true" [nzWidth]="650" [nzVisible]="orgdrawerVisible"
    [nzTitle]="drawerTitle" (nzOnClose)="orgdrawerClose()" (nzKeyboard)="(true)" *ngIf="isLogedIn == true">
    <ng-container *nzDrawerContent>
      <app-organization [drawerClose]="orgcloseCallback" [drawerVisible]="orgdrawerVisible"
        [data]="organizationEditData">
      </app-organization>
    </ng-container>
  </nz-drawer>
</div>
<nz-drawer [nzClosable]="false" [nzVisible]="visible" [nzPlacement]="placement" nzTitle="Menu List"
  (nzOnClose)="close()" [nzWidth]="widthMenu" [nzClosable]="true" [nzMask]="true" class="menu-drawer">
  <ng-container *nzDrawerContent>
    <app-master-menu-list (menuClick)="close()"></app-master-menu-list>
  </ng-container>
</nz-drawer>
<div *ngIf="drawerVisibleCustomers">
  <nz-drawer [nzBodyStyle]="{
      height: 'calc(100% - 55px)',
      overflow: 'auto',
      'padding-bottom': '53px'
    }" [nzClosable]="true" [nzMask]="true" [nzMaskClosable]="true" [nzWidth]="widths"
    [nzVisible]="drawerVisibleCustomers" [nzTitle]="drawerTitleCustomers" (nzOnClose)="drawerCloseCustomers()"
    (nzKeyboard)="(true)">
    <ng-container *nzDrawerContent>
      <app-customer-overview-list [drawerClose]="closeCallbackCustomers" [drawerVisible]="drawerVisibleCustomers"
        [data]="drawerDataCustomers" [custid]="custid">
      </app-customer-overview-list>
    </ng-container>
  </nz-drawer>
</div>
<div *ngIf="drawerVisible">
  <nz-drawer [nzBodyStyle]="{
      height: 'calc(100% - 55px)',
      overflow: 'auto',
      padding: '10px',
      background: '#e9e9e9f8'
    }" [nzClosable]="true" [nzMask]="true" [nzMaskClosable]="false" [nzWidth]="'100%'" [nzVisible]="drawerVisible"
    [nzTitle]="drawerTitle" (nzOnClose)="drawerClose()" (nzKeyboard)="(true)">
    <ng-container *nzDrawerContent>
      <app-orderdetailsdrawer [TYPE_FOR_LOCAL]="TYPE" [drawerClose]="closeCallback" [vieworderdata]="vieworderdata"
        [orderDetails]="orderDetails" [teritoryData]="teritoryData">
      </app-orderdetailsdrawer>
    </ng-container>
  </nz-drawer>
</div>
<div *ngIf="jobdetailsshow">
  <nz-drawer [nzBodyStyle]="{
      height: 'calc(100% - 55px)',
      overflow: 'auto',
      padding: '10px',
    }" [nzClosable]="true" [nzMask]="true" [nzMaskClosable]="false" [nzWidth]="drawersize" [nzVisible]="jobdetailsshow"
    [nzTitle]="jobdetaildrawerTitle" (nzOnClose)="jobdetailsdrawerClose()" (nzKeyboard)="(true)">
    <ng-container *nzDrawerContent>
      <app-detailsjob [drawerClose]="jobdetailscloseCallback" [jobdetailsdata]="jobdetailsdata"
        [invoicefilter]="invoicefilter">
      </app-detailsjob>
    </ng-container>
  </nz-drawer>
</div>
<div *ngIf="Techniciansdetailsshow">
  <nz-drawer [nzBodyStyle]="{
      height: 'calc(100% - 55px)',
      overflow: 'auto',
      padding: '10px',
    }" [nzClosable]="true" [nzMask]="true" [nzMaskClosable]="false" [nzWidth]="drawersize"
    [nzVisible]="Techniciansdetailsshow" [nzTitle]="TechniciansdetaildrawerTitle"
    (nzOnClose)="TechniciansdetailsdrawerClose()" (nzKeyboard)="(true)">
    <ng-container *nzDrawerContent>
      <app-techniciansdetails [drawerClose]="TechniciansdetailscloseCallback" [techdetailsdata]="Techniciansdetailsdata"
        [jobId]="TechniciansId">
      </app-techniciansdetails>
    </ng-container>
  </nz-drawer>
</div>
<div *ngIf="drawerVisibleVendors">
  <nz-drawer [nzBodyStyle]="{
      height: 'calc(100% - 55px)',
      overflow: 'auto',
      'padding-bottom': '53px'
    }" [nzClosable]="true" [nzMask]="true" [nzMaskClosable]="true" [nzWidth]="widths"
    [nzVisible]="drawerVisibleVendors" [nzTitle]="drawerTitleVendors" (nzOnClose)="drawerCloseVendors()"
    (nzKeyboard)="(true)">
    <ng-container *nzDrawerContent>
      <app-vendor-overview-details [drawerClose]="closeCallbackCustomers" [drawerVisible]="drawerVisibleVendors"
        [data]="drawerDataVendors" [custid]="vendorId">
      </app-vendor-overview-details>
    </ng-container>
  </nz-drawer>
</div>
<div *ngIf="drawerTimeSlotVisible">
  <nz-drawer [nzBodyStyle]="{
      height: 'calc(100% - 55px)',
      overflow: 'auto',
      'padding-bottom': '53px',
      'padding-top': '0px',
      'padding-left': '15px',
      'padding-right': '15px'
    }" [nzClosable]="true" [nzMask]="true" [nzMaskClosable]="false" [nzWidth]="'30%'"
    [nzVisible]="drawerTimeSlotVisible" [nzTitle]="drawerTitle" (nzOnClose)="drawerCloseTimeSlot()"
    (nzKeyboard)="(true)">
    <ng-container *nzDrawerContent>
      <app-time-slot-drawer [drawerClose]="closeCallbackTimeSlot" [drawerVisible]="drawerTimeSlotVisible"
        [data]="drawerData">
      </app-time-slot-drawer>
    </ng-container>
  </nz-drawer>
</div>
<div *ngIf="sendNotiDrawerVisible">
  <nz-drawer [nzBodyStyle]="{
      height: 'calc(100% - 55px)',
      overflow: 'auto',
      'padding-bottom': '53px'
    }" [nzClosable]="false" [nzMask]="true" [nzMaskClosable]="false" [nzWidth]="800"
    [nzVisible]="sendNotiDrawerVisible" [nzTitle]="sendNotiDrawerTitle" (nzOnClose)="sendNotiDrawerClose()"
    (nzKeyboard)="(true)">
    <ng-container *nzDrawerContent>
      <app-add-new-notification-drawer [drawerClose]="sendNotiDrawerCloseCallback">
      </app-add-new-notification-drawer>
    </ng-container>
  </nz-drawer>
</div>
<nz-modal [nzWidth]="700" [(nzVisible)]="isApkVersionModalVisible" [nzTitle]="apkVersionModalTitle"
  [nzContent]="apkVersionModalContent" [nzFooter]="apkVersionModalFooter" (nzOnCancel)="handleApkVersionModalCancel()"
  [nzMaskClosable]="false">
  <ng-template #apkVersionModalContent>
    <form nz-form #myFormAPK="ngForm">
      <div nz-row>
        <div nz-col nzSpan="24">
          <nz-spin [nzSpinning]="isApkVersionModalConfirmLoading">
            <div nz-row>
              <nz-divider nzText="Customer"></nz-divider>
              <div nz-col nzSpan="8">
                <nz-form-item>
                  <nz-form-label nzRequired nzNoColon>Previous Version</nz-form-label>
                  <nz-form-control nzHasFeedback nzErrorTip="Enter Customer Previous Version">
                    <input nz-input name="PreviousVersion" placeHolder="Previous Version" disabled
                      (keypress)="numberWithDecimal($event)" [(ngModel)]="CUSTOMER_PREVIOUS_VERSION" maxlength="10"
                      required />
                  </nz-form-control>
                </nz-form-item>
              </div>
              <div nz-col nzSpan="8">
                <nz-form-item>
                  <nz-form-label nzRequired nzNoColon>Minimum Version</nz-form-label>
                  <nz-form-control nzHasFeedback nzErrorTip="Enter Customer Minimum Version">
                    <input nz-input name="minimumVersion" placeHolder="Minimum Version"
                      (keypress)="numberWithDecimal($event)" [(ngModel)]="CUSTOMER_MIN_VERSION" maxlength="10"
                      required />
                  </nz-form-control>
                </nz-form-item>
              </div>
              <div nz-col nzSpan="8">
                <nz-form-item>
                  <nz-form-label nzRequired nzNoColon>Current Version</nz-form-label>
                  <nz-form-control nzHasFeedback nzErrorTip="Enter Customer Current Version">
                    <input nz-input name="currentVersion" placeHolder="Current Version"
                      (keypress)="numberWithDecimal($event)" [(ngModel)]="CUSTOMER_CUR_VERSION" maxlength="10"
                      required />
                  </nz-form-control>
                </nz-form-item>
              </div>
              <div nz-col nzSpan="24">
                <nz-form-item>
                  <nz-form-label nzRequired nzNoColon>Description</nz-form-label>
                  <nz-form-control nzHasFeedback nzErrorTip="Enter description">
                    <textarea nz-input rows="1" name="description" placeholder="Enter description"
                      [(ngModel)]="CUSTOMER_DESCRIPTION" required></textarea>
                  </nz-form-control>
                </nz-form-item>
              </div>
              <nz-divider nzText="Technician"></nz-divider>
              <div nz-col nzSpan="8">
                <nz-form-item>
                  <nz-form-label nzRequired nzNoColon>Previous Version</nz-form-label>
                  <nz-form-control nzHasFeedback nzErrorTip="Previous Version is Required">
                    <input nz-input name="PreviousVersion1" placeHolder="Previous Version" disabled
                      (keypress)="numberWithDecimal($event)" [(ngModel)]="TECHNICIAN_PREVIOUS_VERSION" maxlength="10"
                      required />
                  </nz-form-control>
                </nz-form-item>
              </div>
              <div nz-col nzSpan="8">
                <nz-form-item>
                  <nz-form-label nzRequired nzNoColon>Minimum Version</nz-form-label>
                  <nz-form-control nzHasFeedback nzErrorTip="Enter Technician Minimum Version">
                    <input nz-input name="minimumVersion1" placeHolder="Minimum Version"
                      (keypress)="numberWithDecimal($event)" [(ngModel)]="TECHNICIAN_MIN_VERSION" maxlength="10"
                      required />
                  </nz-form-control>
                </nz-form-item>
              </div>
              <div nz-col nzSpan="8">
                <nz-form-item>
                  <nz-form-label nzRequired nzNoColon>Current Version</nz-form-label>
                  <nz-form-control nzHasFeedback nzErrorTip="Enter Technician Current Version">
                    <input nz-input name="currentVersion1" placeHolder="Current Version"
                      (keypress)="numberWithDecimal($event)" [(ngModel)]="TECHNICIAN_CUR_VERSION" maxlength="10"
                      required />
                  </nz-form-control>
                </nz-form-item>
              </div>
              <div nz-col nzSpan="24">
                <nz-form-item>
                  <nz-form-label nzRequired nzNoColon>Description</nz-form-label>
                  <nz-form-control nzHasFeedback nzErrorTip="Enter description">
                    <textarea nz-input rows="1" name="description" placeholder="Enter description"
                      [(ngModel)]="TECHNICIAN_DESCRIPTION" required></textarea>
                  </nz-form-control>
                </nz-form-item>
              </div>
            </div>
          </nz-spin>
        </div>
      </div>
    </form>
  </ng-template>
  <ng-template #apkVersionModalFooter>
    <button nz-button nzType="default" (click)="handleApkVersionModalCancel()">
      Cancel
    </button>
    <button nz-button nzType="primary" (click)="handleApkVersionModalOk()"
      [nzLoading]="isApkVersionModalConfirmLoading">
      Submit
    </button>
  </ng-template>
</nz-modal>