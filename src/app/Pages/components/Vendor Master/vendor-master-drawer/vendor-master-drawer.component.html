<div *ngIf="data">
  <form nz-form #websitebannerPage="ngForm">
    <nz-spin [nzSpinning]="isSpinning">
      <div nz-row nzGutter="24">
        <div nz-col nzSpan="12">
          <span><b>Basic Information</b></span>
          <div class="my-box">
            <div nz-row>
              <div nz-col nzSpan="24">
                <nz-form-item>
                  <nz-form-label nzRequired nzNoColon>Business Name</nz-form-label>
                  <nz-form-control nzHasFeedback nzErrorTip="Please Enter Business Name">
                    <input nz-input placeholder="Enter Business Name" name="businessName" required
                      [(ngModel)]="data.BUSINESS_NAME" (keypress)="allowBusinessNameChars($event)" maxlength="128"
                      autocomplete="off" (focus)="isFocused = 'BUSINESS_NAME'" (blur)="isFocused = ''" />
                    <h6 style="color: red; font-size: 10px" *ngIf="
                        isFocused === 'BUSINESS_NAME' ||
                        (data.BUSINESS_NAME && isFocused === 'BUSINESS_NAME')
                      ">
                      {{ data.BUSINESS_NAME.length }}/128
                    </h6>
                  </nz-form-control>
                </nz-form-item>
              </div>
            </div>
            <div nz-row>
              <div nz-col nzSpan="24">
                <nz-form-item>
                  <nz-form-label nzRequired nzNoColon>Contact Person Name</nz-form-label>
                  <nz-form-control nzErrorTip="Please Enter Contact Person Name">
                    <input nz-input placeholder="Enter Contact Person Name" name="NAME" required [(ngModel)]="data.NAME"
                      (keypress)="alphaOnly($event)" #name="ngModel" maxlength="128" (focus)="isFocused = 'NAME'"
                      (blur)="isFocused = ''" autocomplete="off" />
                    <h6 style="color: red; font-size: 10px" *ngIf="
                        isFocused === 'NAME' ||
                        (data.NAME && isFocused === 'NAME')
                      ">
                      {{ data.NAME.length }}/128
                    </h6>
                  </nz-form-control>
                </nz-form-item>
              </div>
            </div>
            <div nz-row>
              <div nz-col nzSpan="24">
                <nz-form-item>
                  <nz-form-label nzRequired nzNoColon>Email ID</nz-form-label>
                  <nz-form-control nzHasFeedback [nzErrorTip]="
                      email.invalid && email.touched
                        ? 'Please Enter Valid Email'
                        : ''
                    ">
                    <input nz-input name="emailss" placeholder="Enter Email" [pattern]="emailPattern"
                      [(ngModel)]="data.EMAIL_ID" required maxlength="128" #email="ngModel" autocomplete="off"
                      (focus)="isFocused = 'EMAIL_ID'" (blur)="isFocused = ''" />
                  </nz-form-control>
                  <h6 style="color: red; font-size: 10px" *ngIf="
                      isFocused === 'EMAIL_ID' ||
                      (data.EMAIL_ID && isFocused === 'EMAIL_ID')
                    ">
                    {{ data.EMAIL_ID.length }}/128
                  </h6>
                </nz-form-item>
              </div>

              <div nz-col nzSpan="14">
                <nz-form-item>
                  <nz-form-label nzRequired nzNoColon>Mobile No.</nz-form-label>
                  <div nz-row>
                    <div nz-col nzSpan="9">
                      <nz-form-control nzHasFeedback nzErrorTip="Please Select Country Code">
                        <nz-select name="countrycode" [(ngModel)]="data.COUNTRY_CODE" [nzOptionOverflowSize]="5"
                          nzShowSearch [nzDropdownMatchSelectWidth]="false" nzPlaceHolder="Country Code" required>
                          <nz-option *ngFor="let option of countryCodes" [nzValue]="option.value"
                            [nzLabel]="option.label"></nz-option>
                        </nz-select>
                      </nz-form-control>
                    </div>
                    <div nz-col nzSpan="15">
                      <nz-form-control nzHasFeedback [nzErrorTip]="
                          mobile.invalid && mobile.touched
                            ? 'Please Enter Mobile Number'
                            : ''
                        ">
                        <input nz-input name="mobileno" placeHolder="Enter Mobile No." [pattern]="mobpattern"
                          [(ngModel)]="data.MOBILE_NUMBER" maxlength="10" minlength="10" (keypress)="omit($event)"
                          required autocomplete="off" #mobile="ngModel" />
                      </nz-form-control>
                    </div>
                  </div>
                </nz-form-item>
              </div>
              <div nz-col nzSpan="10" *ngIf="!data.ID">
                <nz-form-item>
                  <nz-form-label nzRequired nzNoColon>Password &nbsp;
                    <span><i nz-icon nzType="info-circle" nzTheme="twotone" nzTooltipTitle="Note: Password must contain at least 8
                            characters which include 1 uppercase, 1 special character, and 1 number."
                        nzTooltipPlacement="top" nz-tooltip>
                      </i>
                    </span>
                  </nz-form-label>
                  <nz-form-control nzHasFeedback style="text-align: left" nzRequired>
                    <nz-input-group nzPrefixIcon="lock" [nzSuffix]="suffixTemplate">
                      <input nz-input [type]="passwordVisible ? 'text' : 'password'" name="passwordss"
                        [(ngModel)]="data.PASSWORD" #password="ngModel" placeholder="Enter Password" required
                        maxlength="20" minlength="8" [pattern]="passwordPattern" autocomplete="off"
                        (focus)="isFocused1 = true" (blur)="isFocused1 = false" [disabled]="data.ID" />
                    </nz-input-group>
                    <h6 style="
                        color: red;
                        font-size: 10px;
                        margin-bottom: 0px !important;
                      " *ngIf="data.PASSWORD && isFocused1">
                      {{ data.PASSWORD.length }}/20
                    </h6>

                    <ng-template #suffixTemplate>
                      <i nz-icon [nzType]="passwordVisible ? 'eye' : 'eye-invisible'"
                        (click)="passwordVisible = !passwordVisible"></i>
                    </ng-template>
                  </nz-form-control>

                  <div style="color: #ff4d4f; font-size: 10px; text-align: left">
                    <span *ngIf="password.errors?.['required'] && password.touched">Password is required.</span>
                    <span *ngIf="password.errors?.['minlength'] && password.touched">Password must be at least 8
                      characters long.</span>
                    <span *ngIf="password.errors?.['maxlength'] && password.touched">Password cannot exceed 20
                      characters.</span>
                    <span
                      *ngIf="!password.errors?.['minlength'] && password.errors?.['pattern'] && password.touched">Password
                      must meet the specified pattern
                      requirements.</span>
                  </div>
                </nz-form-item>
              </div>

            </div>
            <!-- <div nz-row>
             
              <div nz-col nzSpan="9">
                <nz-form-item>
                  <nz-form-label nzNoColon></nz-form-label>
                  <nz-form-control style="padding-top: 5px">
                    <button nz-button nzType="primary" style="color: white !important" (click)="generatePassword()"
                      [disabled]="data.ID">
                      Generate Password
                    </button>
                  </nz-form-control>
                </nz-form-item>
              </div>
            </div> -->
            <div nz-row>
              <div nz-col nzSpan="14">
                <nz-form-item>
                  <nz-form-label nzNoColon>GST No.&nbsp;
                    <span><i nz-icon nzType="info-circle" nzTheme="twotone" nzTooltipTitle="e.g.22AAAAA0000A1Z5"
                        nzTooltipPlacement="top" nz-tooltip>
                      </i> </span></nz-form-label>
                  <nz-form-control nzErrorTip="Please Enter Valid GST No.">
                    <input nz-input name="Gst No" PlaceHolder=" Enter GST No." [(ngModel)]="data.GST_NO" maxlength="15"
                      [pattern]="commonFunction.GSTpattern" (ngModelChange)="data.GST_NO = data.GST_NO?.toUpperCase()"
                      style="width: 100%" autocomplete="off" (focus)="isFocused = 'Gst No'" (blur)="isFocused = ''" />
                    <div style="
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                        margin-top: 5px;
                      ">
                      <span style="color: red; font-size: 10px !important"
                        *ngIf="data.GST_NO && isFocused === 'Gst No'">
                        {{ data.GST_NO.length }}/15
                      </span>
                    </div>
                  </nz-form-control>
                </nz-form-item>
              </div>
              <div nz-col nzSpan="10">
                <nz-form-item>
                  <nz-form-label nzRequired nzNoColon>PAN No.&nbsp;<span><i nz-icon nzType="info-circle"
                        nzTheme="twotone" nzTooltipTitle="e.g. ABCDE1234F" nzTooltipPlacement="top" nz-tooltip>
                      </i> </span></nz-form-label>
                  <nz-form-control nzErrorTip="Please Enter PAN No.">
                    <input nz-input name="PAN" placeholder="Enter PAN No." [(ngModel)]="data.PAN" required
                      [pattern]="commonFunction.panpattern" (ngModelChange)="data.PAN = data.PAN?.toUpperCase()"
                      maxlength="10" autocomplete="off" (focus)="isFocused11 = 'Pan No'" (blur)="isFocused11 = ''" />
                    <div style="
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                        margin-top: 5px;
                      ">
                      <span style="color: red; font-size: 10px !important" *ngIf="data.PAN && isFocused11 === 'Pan No'">
                        {{ data.PAN.length }}/10
                      </span>
                    </div>
                  </nz-form-control>
                </nz-form-item>
              </div>

              <div nz-col nzSpan="14">
                <nz-form-item>
                  <nz-form-label nzNoColon>Profile Photo&nbsp;<span nz-icon nzType="info-circle" nzTheme="twotone"
                      nz-tooltip nzTooltipTitle=" Please select an image file (PNG, JPG, JPEG) with a image
                      dimension 128*128."></span>
                    <span *ngIf="
                        (data.PROFILE_PHOTO && data.PROFILE_PHOTO != ' ') ||
                        fileURL
                      " nz-popconfirm nzPopconfirmTitle="Are you sure you want to delete?" nzPopconfirmPlacement="top"
                      (nzOnConfirm)="imageDeleteConfirm(data)" (nzOnCancel)="deleteCancel()"
                      style="cursor: pointer; color: red; margin-left: 10px">
                      <span nz-icon nzType="delete" nzTheme="twotone" [nzTwotoneColor]="'#FF0000'" nz-tooltip
                        nzTooltipTitle="Delete"></span>
                    </span>
                  </nz-form-label>
                  <nz-form-control nzHasFeedback nzErrorTip="Select Profile Photo">
                    <!-- Upload Button -->
                    <button *ngIf="
                        !fileURL &&
                        (!data.PROFILE_PHOTO ||
                          data.PROFILE_PHOTO.trim() === '')
                      " nz-button style="
                        height: 28px;
                        padding: 0px 7px;
                        font-size: 10px;
                        width: 40%;
                      " (click)="image1.click()">
                      <span nz-icon nzType="upload"></span>
                      Profie Photo
                      <input #image1 name="image1" type="file" accept=".png, .jpg, .jpeg"
                        (change)="fileChangeEvent($event)" style="display: none" />
                    </button>

                    <div *ngIf="
                        data.PROFILE_PHOTO &&
                        data.PROFILE_PHOTO != null &&
                        data.PROFILE_PHOTO != undefined &&
                        data.PROFILE_PHOTO != ' ' &&
                        data.PROFILE_PHOTO != '' &&
                        (fileURL == undefined ||
                          fileURL == null ||
                          fileURL == '')
                      " style="margin-top: 10px">
                      <img nz-image [nzSrc]="fullImageUrl" alt="Uploaded Image" style="
                          width: 120px;
                          height: auto;
                          border: 1px solid #ddd;
                          margin-bottom: 10px;
                        " />
                    </div>
                    <div *ngIf="
                        fileURL != undefined &&
                        fileURL != null &&
                        fileURL != '' &&
                        fileURL != ' '
                      " class="ss" style="align-items: center">
                      <img nz-image [nzSrc]="imagePreview" alt="Preview" style="
                          height: auto;
                          width: auto;
                          overflow: auto;
                          max-width: 600;
                          max-height: 400;
                        " />
                    </div>
                  </nz-form-control>
                </nz-form-item>
              </div>
              <div nz-col nzSpan="10">
                <nz-form-item>
                  <nz-form-label nzNoColon>Status</nz-form-label>
                  <nz-form-control>
                    <nz-switch nzCheckedChildren="Active" nzUnCheckedChildren="Inactive" [(ngModel)]="data['STATUS']"
                      [ngModelOptions]="{ standalone: true }"></nz-switch>
                  </nz-form-control>
                </nz-form-item>
              </div>
            </div>
          </div>
        </div>
        <div nz-col nzSpan="12">
          <!-- <span><b>Basic Information</b></span> -->
          <nz-form-label nzNoColon><b>Address Details</b></nz-form-label>
          <div class="my-box">
            <div nz-row>
              <div nz-col nzSpan="24">
                <nz-form-item>
                  <nz-form-label nzNoColon nzRequired>Address Line 1</nz-form-label>
                  <nz-form-control nzErrorTip="Please Enter Address Line 1">
                    <input nz-input placeholder="Enter Address Line 1" name="Address1" required
                      [(ngModel)]="data.ADDRESS_LINE_1" maxlength="512" autocomplete="off"
                      (keypress)="commonFunction.address1Chars($event)" (focus)="isFocused = 'ADDRESS_LINE_1'"
                      (blur)="isFocused = ''" />
                    <!-- <h6
                      style="color: red; font-size: 10px"
                      *ngIf="data.ADDRESS_LINE_1 && isFocused === 'Address1'"
                    >
                      {{ data.ADDRESS_LINE_1.length }}/512
                    </h6> -->
                    <h6 style="color: red; font-size: 10px" *ngIf="
                        isFocused === 'ADDRESS_LINE_1' ||
                        (data.ADDRESS_LINE_1 && isFocused === 'ADDRESS_LINE_1')
                      ">
                      {{ data.ADDRESS_LINE_1?.length || 0 }}/512
                    </h6>
                  </nz-form-control>
                </nz-form-item>
              </div>
            </div>
            <div nz-row>
              <div nz-col nzSpan="24">
                <nz-form-item>
                  <nz-form-label nzNoColon>Address Line 2</nz-form-label>
                  <nz-form-control>
                    <input nz-input placeholder="Enter Address Line 2" name="Address2" [(ngModel)]="data.ADDRESS_LINE_2"
                      #name="ngModel" maxlength="512" autocomplete="off"
                      (keypress)="commonFunction.address1Chars($event)" (focus)="isFocused = 'ADDRESS_LINE_2'"
                      (blur)="isFocused = ''" />
                    <h6 style="color: red; font-size: 10px" *ngIf="
                        isFocused === 'ADDRESS_LINE_2' ||
                        (data.ADDRESS_LINE_2 && isFocused === 'ADDRESS_LINE_2')
                      ">
                      {{ data.ADDRESS_LINE_2?.length || 0 }}/512
                    </h6>
                  </nz-form-control>
                </nz-form-item>
              </div>
            </div>
            <div nz-row>
              <div nz-col nzSpan="12">
                <nz-form-item>
                  <nz-form-label nzRequired nzNoColon>Country</nz-form-label>
                  <nz-form-control nzHasFeedback nzErrorTip="Select Country Name">
                    <nz-select name="countryId" nzPlaceHolder="Select Country Name" nzShowSearch style="width: 100%"
                      [(ngModel)]="data.COUNTRY_ID" (ngModelChange)="
                        getStatesByCountry(data.COUNTRY_ID, false)
                      " [ngModelOptions]="{ standalone: true }" required nzAllowClear>
                      <nz-option *ngFor="let data of CountryData" [nzValue]="data.ID" [nzLabel]="data.NAME">
                      </nz-option>
                    </nz-select>
                  </nz-form-control>
                </nz-form-item>
              </div>
              <div nz-col nzSpan="12">
                <nz-form-item>
                  <nz-form-label nzRequired nzNoColon>State</nz-form-label>
                  <nz-form-control nzHasFeedback nzErrorTip="Select State Name">
                    <nz-select name="stateId" nzPlaceHolder="Select State Name" nzShowSearch style="width: 100%"
                      [(ngModel)]="data.STATE_ID" [ngModelOptions]="{ standalone: true }" required nzAllowClear
                      (ngModelChange)="getDistByState(data.STATE_ID, false)" [nzLoading]="isStateSpinning">
                      <nz-option *ngFor="let data of StateData" [nzValue]="data.ID" [nzLabel]="data.NAME">
                      </nz-option>
                    </nz-select>
                  </nz-form-control>
                </nz-form-item>
              </div>
            </div>
            <div nz-row>
              <div nz-col nzSpan="12">
                <nz-form-item>
                  <nz-form-label nzRequired nzNoColon>District</nz-form-label>
                  <nz-form-control nzHasFeedback nzErrorTip="Select District Name">
                    <nz-select name="distId" nzPlaceHolder="Select District Name" nzShowSearch style="width: 100%"
                      [(ngModel)]="data.DISTRICT_ID" [ngModelOptions]="{ standalone: true }" required nzAllowClear
                      [nzLoading]="isDistSpinning" (ngModelChange)="onDistrictChange($event)">
                      <nz-option *ngFor="let data of DistData" [nzValue]="data.ID" [nzLabel]="data.NAME">
                      </nz-option>
                    </nz-select>
                  </nz-form-control>
                </nz-form-item>
              </div>
              <!-- <div nz-col nzSpan="12">
                <nz-form-item>
                  <nz-form-label nzRequired nzNoColon>City</nz-form-label>
                  <nz-form-control nzHasFeedback nzErrorTip="Select City Name">
                    <nz-select name="cityId" nzPlaceHolder="Select City Name" nzShowSearch style="width: 100%"
                      [(ngModel)]="data.CITY_ID" [ngModelOptions]="{ standalone: true }" required nzAllowClear=""
                      [nzLoading]="isCitySpinning">
                      <nz-option *ngFor="let data of CityData" [nzValue]="data.ID" [nzLabel]="data.NAME">
                      </nz-option>
                    </nz-select>
                  </nz-form-control>
                </nz-form-item>
              </div> -->
              <div nz-col nzSpan="12">
                <nz-form-item>
                  <nz-form-label nzRequired nzNoColon>Pincode </nz-form-label>
                  <nz-form-control nzHasFeedback nzErrorTip="Select Pincode ">
                    <nz-select name="pincode" nzPlaceHolder="Select Pincode" nzShowSearch style="width: 100%"
                      [(ngModel)]="data.PINCODE_ID" [ngModelOptions]="{ standalone: true }" required nzAllowClear=""
                      [nzLoading]="isPincodeSpinning" (ngModelChange)="getpincodename($event)">
                      <nz-option *ngFor="let data of PincodeData" [nzValue]="data.ID" [nzLabel]="data.PINCODE_NUMBER">
                      </nz-option>
                    </nz-select>
                  </nz-form-control>
                </nz-form-item>
              </div>
            </div>
          </div>
        </div>
      </div>
    </nz-spin>
    <div class="footer">
      <button type="button" nz-button (click)="close()" class="ant-btn" style="margin-right: 8px">
        <span>Cancel</span>
      </button>

      <button type="button" class="ant-btn ant-btn-primary" *ngIf="!data.ID" nz-button nz-dropdown
        [nzDropdownMenu]="menu" [nzLoading]="isSpinning" (click)="save(false, websitebannerPage)">
        <span>Save & Close</span>
      </button>

      <nz-dropdown-menu #menu="nzDropdownMenu">
        <ul nz-menu>
          <li nz-menu-item class="menuc" style="border-radius: 4px; color: white!important;">
            <a style="color: white!important" (click)="save(true, websitebannerPage)">Save & New</a>
          </li>
        </ul>
      </nz-dropdown-menu>

      <button type="button" class="ant-btn ant-btn-primary" nz-button [nzLoading]="isSpinning" *ngIf="data.ID"
        (click)="save(false, websitebannerPage)">
        <span>Update & close</span>
      </button>
    </div>
  </form>
</div>
<nz-modal [nzWidth]="900" [nzStyle]="{ 'margin-top': '-80px' }" [(nzVisible)]="CropImageModalVisible"
  nzMaskClosable="false" nzClosable="false" [nzContent]="content2" [nzTitle]="'Crop Image'"
  (nzOnCancel)="CropImageModalCancel()" [nzFooter]="CropImageModalFooter">
  <ng-template #content2>
    <nz-spin [nzSpinning]="isSpinningCrop">
      <div *ngIf="
          cropimageshow != undefined &&
          cropimageshow != null &&
          cropimageshow != ''
        " class="ss" style="height: 500px; overflow: scroll">
        <!-- <iframe
      [src]="cropimageshow"
      style="width: 832px; height: 396px"
      frameborder="0"
    ></iframe> -->
        <div *ngIf="croppedImage" style="text-align: center">
          <p>Cropped Image:</p>
          <img [src]="croppedImage" width="128" height="128" />
        </div>
        <nz-divider [ngStyle]="{ width: imageWidth - 900 + 'px' }" nzPlain nzVariant="solid"></nz-divider>
        <image-cropper [imageChangedEvent]="imageChangedEvent" [maintainAspectRatio]="false" [cropper]="cropperPosition"
          format="png" (imageCropped)="imageCropped($event)" (imageLoaded)="imageLoaded($event)"
          (cropperReady)="cropperReady($event)" (loadImageFailed)="loadImageFailed()"></image-cropper>
        <!-- <image-cropper [imageChangedEvent]="imageChangedEvent" [maintainAspectRatio]="false" [cropperMinWidth]="128"
          [cropperMinHeight]="128" [cropper]="cropperPosition" [resizeToWidth]="128" [resizeToHeight]="128" format="png"
          (imageCropped)="imageCropped($event)" (imageLoaded)="imageLoaded($event)"
          (cropperReady)="cropperReady($event)" (loadImageFailed)="loadImageFailed()"></image-cropper> -->
      </div>
    </nz-spin>
  </ng-template>
  <ng-template #CropImageModalFooter>
    <button nz-button nzType="default" (click)="CropImageModalCancel()">
      Close
    </button>
    <button nz-button nzType="primary" (click)="onFileSelected(imageChangedEvent)">
      Upload
    </button>
  </ng-template>
</nz-modal>