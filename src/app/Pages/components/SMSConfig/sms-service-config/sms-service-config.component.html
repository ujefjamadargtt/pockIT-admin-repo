<div>
  <form nz-form #smsServiceForm="ngForm">
    <nz-spin [nzSpinning]="isSpinning">
      <div class="my-box">
        <div nz-row>
          <!-- <div nz-col nzSpan="12">
            <nz-form-item>
              <nz-form-label nzRequired nzNoColon>Service Provider</nz-form-label>
              <nz-form-control nzHasFeedback nzErrorTip="Please enter the service provider">
                <input nz-input autocomplete="off" placeholder="Enter Service Provider" name="SERVICE_PROVIDER"
                  [(ngModel)]="data.SERVICE_PROVIDER" (keypress)="validateServiceProviderInput($event)" maxlength="128"
                  required />
              </nz-form-control>
              <h6 style="color: red; font-size: 10px" *ngIf="data.SERVICE_PROVIDER">{{ data.SERVICE_PROVIDER.length
                }}/128</h6>
            </nz-form-item>
          </div> -->
          <div nz-col nzSpan="12">
            <nz-form-item>
              <nz-form-label nzRequired nzNoColon>Service Provider</nz-form-label>
              <nz-form-control nzHasFeedback nzErrorTip="Please enter the service provider">
                <!-- Service Provider Input -->
                <input nz-input autocomplete="off" placeholder="Enter Service Provider" name="SERVICE_PROVIDER"
                  [(ngModel)]="data.SERVICE_PROVIDER" (keypress)="validateServiceProviderInput($event)" maxlength="128"
                  required (focus)="isFocused = 'SERVICE_PROVIDER'" (blur)="isFocused = ''" />
              </nz-form-control>
              <!-- Dynamic Character Count -->
              <h6 style="color: red; font-size: 10px" *ngIf="
                  isFocused === 'SERVICE_PROVIDER' ||
                  (data.SERVICE_PROVIDER && isFocused === 'SERVICE_PROVIDER')
                ">
                {{ data.SERVICE_PROVIDER?.length || 0 }}/128
              </h6>
            </nz-form-item>
          </div>

          <div nz-col nzSpan="12">
            <nz-form-item>
              <nz-form-label nzRequired nzNoColon>Authentication Type</nz-form-label>
              <nz-form-control nzHasFeedback>
                <nz-select nzPlaceHolder="Select Authentication Type" [(ngModel)]="data.AUTHENTICATION_TYPE"
                  name="authenticationType" autocomplete="off" required maxlength="128">
                  <nz-option nzValue="Basic" nzLabel="Basic"></nz-option>
                  <nz-option nzValue="OAuth2" nzLabel="OAuth2"></nz-option>
                </nz-select>
              </nz-form-control>
            </nz-form-item>
          </div>
        </div>

        <div nz-row>
          <!-- <div nz-col nzSpan="12">
            <nz-form-item>
              <nz-form-label nzRequired nzNoColon>API URL</nz-form-label>
              <nz-form-control nzHasFeedback nzErrorTip="Please enter a valid API URL">
                <input nz-input autocomplete="off" placeholder="Enter API URL" name="API_URL" [(ngModel)]="data.API_URL"
                  [pattern]="apiurlpattern" required maxlength="128" />
              </nz-form-control>
              <h6 style="color: red; font-size: 10px" *ngIf="data.API_URL">{{ data.API_URL.length }}/128</h6>
              <div style="
                font-size: 10px;
                text-align: left;
                margin-top: 5px; color: blue;">
                <em>e.g., https://api.example.com/send-sms</em>
              </div>
            </nz-form-item>
          </div> -->
          <div nz-col nzSpan="12">
            <nz-form-item>
              <nz-form-label nzRequired nzNoColon>API URL&nbsp;<span nz-icon nzType="info-circle" nzTheme="twotone"
                  nz-tooltip nzTooltipTitle="e.g., https://api.example.com/send-sms"></span></nz-form-label>
              <nz-form-control nzHasFeedback nzErrorTip="Please enter a valid API URL">
                <!-- API URL Input -->
                <input nz-input autocomplete="off" placeholder="Enter API URL" name="API_URL" [(ngModel)]="data.API_URL"
                  [pattern]="apiurlpattern" required maxlength="128" (focus)="isFocused = 'API_URL'"
                  (blur)="isFocused = ''" />
              </nz-form-control>
              <!-- Dynamic Character Count -->
              <h6 style="color: red; font-size: 10px" *ngIf="
                  isFocused === 'API_URL' ||
                  (data.API_URL && isFocused === 'API_URL')
                ">
                {{ data.API_URL?.length || 0 }}/128
              </h6>
              <!-- Example Text -->
              <div style="
                  font-size: 10px;
                  text-align: left;
                  margin-top: 5px;
                  color: blue;
                ">
                <!-- <em>e.g., https://api.example.com/send-sms</em> -->
              </div>
            </nz-form-item>
          </div>

          <!-- <div nz-col nzSpan="12">
            <nz-form-item>
              <nz-form-label nzRequired nzNoColon>API Key</nz-form-label>
              <nz-form-control nzHasFeedback nzErrorTip="Please enter the API key">
                <input nz-input autocomplete="off" placeholder="Enter API Key" name="API_KEY" [(ngModel)]="data.API_KEY"
                  required maxlength="128" />
              </nz-form-control>
              <h6 style="color: red; font-size: 10px" *ngIf="data.API_KEY">{{ data.API_KEY.length }}/128</h6>
            </nz-form-item>
          </div> -->
          <div nz-col nzSpan="12">
            <nz-form-item>
              <nz-form-label nzRequired nzNoColon>API Key</nz-form-label>
              <nz-form-control nzHasFeedback nzErrorTip="Please enter the API key">
                <!-- API Key Input -->
                <input nz-input autocomplete="off" placeholder="Enter API Key" name="API_KEY" [(ngModel)]="data.API_KEY"
                  required maxlength="128" (focus)="isFocused = 'API_KEY'" (blur)="isFocused = ''" />
              </nz-form-control>
              <!-- Dynamic Character Count -->
              <h6 style="color: red; font-size: 10px" *ngIf="
                  isFocused === 'API_KEY' ||
                  (data.API_KEY && isFocused === 'API_KEY')
                ">
                {{ data.API_KEY?.length || 0 }}/128
              </h6>
            </nz-form-item>
          </div>
        </div>
        <div nz-row>
          <!-- <div nz-col nzSpan="12">
            <nz-form-item>
              <nz-form-label nzRequired nzNoColon>Sender Name</nz-form-label>
              <nz-form-control nzErrorTip="Please enter sender name">
                <input nz-input placeholder="Enter Sender Name" name="senderName" [(ngModel)]="data.SENDER_NAME"
                  (keypress)="commonFunction.alphaOnly($event)" autocomplete="off" maxlength="128" required />
                <h6 style="color: red; font-size: 10px" *ngIf="
                    data.SENDER_NAME != undefined &&
                    data.SENDER_NAME != null &&
                    data.SENDER_NAME != ''
                  ">
                  {{ data.SENDER_NAME.length }}/128
                </h6>
              </nz-form-control>
            </nz-form-item>
          </div> -->

          <!-- <div nz-col nzSpan="12">
            <nz-form-item>
              <nz-form-label nzRequired nzNoColon>Sender Name</nz-form-label>
              <nz-form-control nzErrorTip="Please enter sender name">
                Sender Name Input
                <input nz-input placeholder="Enter Sender Name" name="senderName" [(ngModel)]="data.SENDER_NAME"
                  (keypress)="commonFunction.alphaOnly($event)" autocomplete="off" maxlength="128" required
                  (focus)="isFocused = 'SENDER_NAME'" (blur)="isFocused = ''" />
              </nz-form-control>
              Dynamic Character Count
              <h6 style="color: red; font-size: 10px"
                *ngIf="isFocused === 'SENDER_NAME' || (data.SENDER_NAME && isFocused === 'SENDER_NAME')">
                {{ (data.SENDER_NAME?.length || 0) }}/128
              </h6>
            </nz-form-item>
          </div> -->
          <div nz-col nzSpan="12">
            <nz-form-item>
              <nz-form-label nzRequired nzNoColon>Sender Name</nz-form-label>
              <nz-form-control nzErrorTip="Please enter sender name">
                <!-- Sender Name Input -->
                <input nz-input placeholder="Enter Sender Name" name="senderName" [(ngModel)]="data.SENDER_NAME"
                  (keypress)="commonFunction.alphaOnly($event)" autocomplete="off" maxlength="128" required
                  (focus)="isFocused = 'SENDER_NAME'" (blur)="isFocused = ''" />
              </nz-form-control>
              <!-- Dynamic Character Count -->
              <h6 style="color: red; font-size: 10px" *ngIf="
                  isFocused === 'SENDER_NAME' ||
                  (data.SENDER_NAME && isFocused === 'SENDER_NAME')
                ">
                {{ data.SENDER_NAME?.length || 0 }}/128
              </h6>
            </nz-form-item>
          </div>

          <div nz-col nzSpan="12">
            <nz-form-item>
              <nz-form-label nzNoColon nzRequired>Default Country Code</nz-form-label>
              <nz-form-control nzHasFeedback nzErrorTip="Please select country code">
                <nz-select [(ngModel)]="data.DEFAULT_COUNTRY_CODE" name="DEFAULT_COUNTRY_CODE"
                  [nzPlaceHolder]="'Select Country Code'" required nzShowSearch nzAllowClear>
                  <nz-option *ngFor="let option of countryCodes" [nzValue]="option.value"
                    [nzLabel]="option.label"></nz-option>
                </nz-select>
              </nz-form-control>
            </nz-form-item>
          </div>
        </div>

        <div nz-row>
          <!-- <div nz-col nzSpan="12">
            <nz-form-item>
              <nz-form-label nzNoColon nzRequired>User Name</nz-form-label>
              <nz-form-control nzHasFeedback nzErrorTip="Please enter a valid user name">
                <input nz-input autocomplete="off" placeholder="Enter User Name" name="USERNAME"
                  [(ngModel)]="data.USERNAME" required maxlength="128" />
              </nz-form-control>
              <h6 style="color: red; font-size: 10px" *ngIf="data.USERNAME">{{ data.USERNAME.length }}/128</h6>
            </nz-form-item>
          </div> -->

          <div nz-col nzSpan="12">
            <nz-form-item>
              <nz-form-label nzNoColon nzRequired>User Name</nz-form-label>
              <nz-form-control nzHasFeedback nzErrorTip="Please enter a valid user name">
                <!-- User Name Input -->
                <input nz-input placeholder="Enter User Name" name="wiojervnc" [(ngModel)]="data.USERNAME" required
                  maxlength="128" (focus)="isFocused = 'USERNAME'" (blur)="isFocused = ''"
                  autocomplete="new-username" />
              </nz-form-control>
              <!-- Dynamic Character Count -->
              <h6 style="color: red; font-size: 10px" *ngIf="
                  isFocused === 'USERNAME' ||
                  (data.USERNAME && isFocused === 'USERNAME')
                ">
                {{ data.USERNAME?.length || 0 }}/128
              </h6>
            </nz-form-item>
          </div>

          <div nz-col nzSpan="12">
            <nz-form-item>
              <nz-form-label nzRequired nzNoColon>Password &nbsp;
                <span><i nz-icon nzType="info-circle" nzTheme="twotone" nzTooltipTitle="Note: Password must contain at least 8
                characters which include 1 uppercase, 1 special character, and 1 number." nzTooltipPlacement="top"
                    nz-tooltip>
                  </i> </span></nz-form-label>
              <nz-form-control nzHasFeedback style="text-align: left" nzRequired>
                <nz-input-group nzPrefixIcon="lock" [nzSuffix]="suffixTemplate">
                  <input nz-input [type]="passwordVisible ? 'text' : 'password'" name="rgbve"
                    [(ngModel)]="data.PASSWORD" #password="ngModel" placeholder="Enter Password" required maxlength="20"
                    minlength="8" [pattern]="commonFunction.passPattern" autocomplete="new-password" />
                </nz-input-group>
                <h6 style="
                    color: red;
                    font-size: 10px;
                    margin-bottom: 0px !important;
                  " *ngIf="data.PASSWORD">
                  <!-- {{data.PASSWORD.lengclsth }}20 -->
                </h6>

                <ng-template #suffixTemplate>
                  <i nz-icon [nzType]="passwordVisible ? 'eye' : 'eye-invisible'"
                    (click)="passwordVisible = !passwordVisible"></i>
                </ng-template>
              </nz-form-control>

              <div style="color: #ff4d4f; font-size: 10px; text-align: left">
                <span *ngIf="password.errors?.['required'] && password.touched">Password is required.</span>
                <span *ngIf="password.errors?.['minlength'] && password.touched">Password must be at least 8 characters
                  long.</span>
                <span *ngIf="password.errors?.['maxlength'] && password.touched">Password cannot exceed 20
                  characters.</span>
                <span
                  *ngIf="!password.errors?.['minlength'] && password.errors?.['pattern'] && password.touched">Password
                  must meet the specified pattern requirements.</span>
              </div>

              <!-- <div style="
                  font-size: 10px;
                  text-align: left;
                  margin-top: 5px;
                  color: red;
                ">
                <em>Note: Password must contain at least 8 characters which include 1 uppercase, 1
                  special character, and
                  1 number.</em>
              </div> -->
            </nz-form-item>
          </div>
        </div>
        <div nz-row>
          <div nz-col nzSpan="8">
            <nz-form-item>
              <nz-form-label nzNoColon>Retry Attempts</nz-form-label>
              <nz-form-control nzHasFeedback>
                <input nz-input type="text" autocomplete="off" placeholder="Enter Retry Attempts" name="RETRY_ATTEMPTS"
                  (keypress)="omit($event)" [(ngModel)]="data.RETRY_ATTEMPTS" maxlength="11" />
              </nz-form-control>
            </nz-form-item>
          </div>

          <div nz-col nzSpan="8">
            <nz-form-item>
              <nz-form-label nzNoColon>Timeout (Seconds)</nz-form-label>
              <nz-form-control nzHasFeedback>
                <input nz-input type="text" autocomplete="off" placeholder="Enter Timeout Seconds"
                  name="TIMEOUT_SECONDS" (keypress)="omit($event)" maxlength="11" [(ngModel)]="data.TIMEOUT_SECONDS" />
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col nzSpan="8">
            <nz-form-item>
              <nz-form-label nzNoColon>Status</nz-form-label>
              <nz-form-control>
                <nz-switch name="IS_ACTIVE" [(ngModel)]="data.IS_ACTIVE" nzCheckedChildren="Active"
                  nzUnCheckedChildren="Inactive" required></nz-switch>
              </nz-form-control>
            </nz-form-item>
          </div>
        </div>

        <!-- <div nz-row>
          <div nz-col nzSpan="24">
            <nz-form-item>
              <nz-form-label nzNoColon>Notes</nz-form-label>
              <nz-form-control>
                <textarea nz-input rows="2" name="NOTES" [(ngModel)]="data.NOTES" maxlength="512"></textarea>
              </nz-form-control>
              <h6 style="color: red; font-size: 10px" *ngIf="data.NOTES">{{ data.NOTES.length }}/512</h6>
            </nz-form-item>
          </div>
        </div> -->
        <div nz-row>
          <div nz-col nzSpan="24">
            <nz-form-item>
              <nz-form-label nzNoColon>Notes</nz-form-label>
              <nz-form-control>
                <!-- Notes Textarea -->
                <textarea nz-input rows="2" name="NOTES" [(ngModel)]="data.NOTES" maxlength="512"
                  (focus)="isFocused = 'NOTES'" (blur)="isFocused = ''"></textarea>
              </nz-form-control>
              <!-- Dynamic Character Count -->
              <h6 style="color: red; font-size: 10px" *ngIf="
                  isFocused === 'NOTES' || (data.NOTES && isFocused === 'NOTES')
                ">
                {{ data.NOTES?.length || 0 }}/512
              </h6>
            </nz-form-item>
          </div>
        </div>
      </div>
    </nz-spin>
  </form>
  <div class="footer">
    <button type="button" nz-button (click)="close()" class="ant-btn" style="margin-right: 8px">
      <span>Cancel</span>
    </button>
    <button type="button" class="ant-btn ant-btn-primary" *ngIf="!data.ID" nz-button nz-dropdown [nzDropdownMenu]="menu"
      [nzLoading]="isSpinning" (click)="save(false, smsServiceForm)">
      <span>Save & Close</span>
    </button>

    <nz-dropdown-menu #menu="nzDropdownMenu">
      <ul nz-menu>
        <li nz-menu-item class="menuc" style="border-radius: 4px; color: white!important;">
          <a style="color: white!important" (click)="save(true, smsServiceForm)">Save & New</a>
        </li>
      </ul>
    </nz-dropdown-menu>

    <button type="button" class="ant-btn ant-btn-primary" nz-button [nzLoading]="isSpinning" *ngIf="data.ID"
      (click)="save(false, smsServiceForm)">
      <span>Update & close</span>
    </button>
  </div>
</div>