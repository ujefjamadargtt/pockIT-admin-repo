<div>
  <form nz-form #accountMasterPage="ngForm">
    <nz-tabset [(nzSelectedIndex)]="activeTabIndex">
      <nz-tab
        *ngFor="let tab of tabs; let i = index"
        [nzTitle]="application"
        nzDisabled
      >
        <ng-template #application>
          {{ tab.name }}
        </ng-template>

        <div *ngIf="tab.name == 'Personal Details'">
          <!-- Personal Details Tab Content -->
          <form nz-form #accountMasterPage="ngForm">
            <nz-spin [nzSpinning]="isSpinning">
              <div *ngIf="tab.name == 'Personal Details'">
                <form nz-form #accountMasterPage="ngForm">
                  <nz-spin [nzSpinning]="isSpinning">
                    <div class="my-box" style="margin-top: 0px">
                      <div nz-row>
                        <div nz-col nzSpan="12">
                          <nz-form-item>
                            <nz-form-label nzRequired nzNoColon
                              >Customer Type</nz-form-label
                            >
                            <nz-form-control nzErrorTip="Select Customer Type">
                              <nz-radio-group
                                name="type"
                                [(ngModel)]="data.CUSTOMER_TYPE"
                                (ngModelChange)="changetype($event)"
                                style="width: 100%"
                              >
                                <label nz-radio nzValue="I"
                                  >Individual(B2C)
                                </label>
                                <label nz-radio nzValue="B"
                                  >Business(B2B)</label
                                >
                              </nz-radio-group>
                            </nz-form-control>
                          </nz-form-item>
                        </div>
                        <div nz-col nzSpan="12">
                          <nz-form-item>
                            <nz-form-label nzRequired nzNoColon
                              >Customer Category</nz-form-label
                            >
                            <nz-form-control
                              nzErrorTip="Please Select Customer Category"
                            >
                              <nz-select
                                nzShowSearch
                                nzPlaceHolder="Select Customer Category"
                                name="CustomerCategory"
                                required
                                [(ngModel)]="data.CUSTOMER_CATEGORY_ID"
                                nzAllowClear
                              >
                                <nz-option
                                  *ngFor="let role of customercategories"
                                  [nzValue]="role.ID"
                                  [nzLabel]="role.NAME"
                                >
                                </nz-option>
                              </nz-select>
                            </nz-form-control>
                          </nz-form-item>
                        </div>
                      </div>
                    </div>
                    <div class="my-box">
                      <!-- <div nz-row *ngIf="data.CUSTOMER_TYPE == 'B'">
                        <div nz-col nzSpan="24">
                          <nz-form-item>
                            <nz-form-label nzRequired nzNoColon>Company Name</nz-form-label>
                            <nz-form-control  nzErrorTip="Please Enter Valid Company Name">
                              <input nz-input name="COMPANY_NAME" placeHolder="Enter Company Name" maxlength="256"
                                type="text" (keypress)="commonFunction.allowOnly($event)"
                                [(ngModel)]="data.COMPANY_NAME" required autocomplete="off" />
                            </nz-form-control>
                          </nz-form-item>
                        </div>
                      </div> -->

                      <div nz-row *ngIf="data.CUSTOMER_TYPE == 'B'">
                        <div nz-col nzSpan="24">
                          <nz-form-item>
                            <nz-form-label nzRequired nzNoColon
                              >Company Name</nz-form-label
                            >
                            <nz-form-control
                              nzErrorTip="Please Enter Valid Company Name"
                            >
                              <input
                                nz-input
                                name="companyName"
                                placeholder="Enter Company Name"
                                maxlength="256"
                                autocomplete="off"
                                type="text"
                                (keypress)="commonFunction.allowOnly($event)"
                                [(ngModel)]="data.COMPANY_NAME"
                                required
                                autocomplete="off"
                                (focus)="isFocused = 'companyName'"
                                (blur)="isFocused = ''"
                              />
                              <h6
                                style="color: red; font-size: 10px"
                                *ngIf="
                                  isFocused === 'companyName' ||
                                  (data.COMPANY_NAME != undefined &&
                                    data.COMPANY_NAME != null &&
                                    data.COMPANY_NAME != '' &&
                                    isFocused === 'companyName')
                                "
                              >
                                {{ data.COMPANY_NAME?.length || 0 }}/256
                              </h6>
                            </nz-form-control>
                          </nz-form-item>
                        </div>
                      </div>

                      <div nz-row>
                        <!-- <div nz-col nzSpan="24">
                          <nz-form-item>
                            <nz-form-label *ngIf="data.CUSTOMER_TYPE == 'I'" nzRequired nzNoColon>Customer
                              Name</nz-form-label>
                            <nz-form-label *ngIf="data.CUSTOMER_TYPE == 'B'" nzRequired nzNoColon>Contact Person
                              Name</nz-form-label>
                            <nz-form-control  nzErrorTip="Please Enter Customer Name">
                              <nz-input-group [nzAddOnBefore]="addOnAfterTemplate4">
                                <input nz-input name="name" placeHolder="Enter Customer Name" maxlength="256"
                                  type="text" (keypress)="validateInput($event)" [(ngModel)]="data.NAME" required
                                  autocomplete="off" />
                              </nz-input-group>
                              <ng-template #addOnAfterTemplate4>
                                <nz-select style="width: 100px" name="discounttype1" [(ngModel)]="data.SALUTATION">
                                  <nz-option nzLabel="Mrs" nzValue="Mrs"></nz-option>
                                  <nz-option nzLabel="Miss" nzValue="Miss"></nz-option>
                                  <nz-option nzLabel="Mr" nzValue="Mr"></nz-option>
                                </nz-select>
                              </ng-template>
                            </nz-form-control>
                          </nz-form-item>
                        </div> -->
                        <div nz-col nzSpan="24">
                          <nz-form-item>
                            <nz-form-label
                              *ngIf="data.CUSTOMER_TYPE == 'I'"
                              nzRequired
                              nzNoColon
                            >
                              Customer Name
                            </nz-form-label>
                            <nz-form-label
                              *ngIf="data.CUSTOMER_TYPE == 'B'"
                              nzRequired
                              nzNoColon
                            >
                              Contact Person Name
                            </nz-form-label>
                            <nz-form-control
                              nzErrorTip="Please Enter Customer Name"
                            >
                              <nz-input-group
                                [nzAddOnBefore]="addOnAfterTemplate4"
                              >
                                <input
                                  nz-input
                                  name="name"
                                  placeholder="Enter Customer Name"
                                  maxlength="256"
                                  autocomplete="off"
                                  type="text"
                                  (keypress)="validateInput($event)"
                                  [(ngModel)]="data.NAME"
                                  required
                                  (focus)="isFocused = 'customerName'"
                                  (blur)="isFocused = ''"
                                  autocomplete="off"
                                />
                              </nz-input-group>
                              <ng-template #addOnAfterTemplate4>
                                <nz-select
                                  style="width: 100px"
                                  name="discounttype1"
                                  [(ngModel)]="data.SALUTATION"
                                >
                                  <nz-option
                                    nzLabel="Mrs"
                                    nzValue="Mrs"
                                  ></nz-option>
                                  <nz-option
                                    nzLabel="Miss"
                                    nzValue="Miss"
                                  ></nz-option>
                                  <nz-option
                                    nzLabel="Mr"
                                    nzValue="Mr"
                                  ></nz-option>
                                </nz-select>
                              </ng-template>
                              <h6
                                style="color: red; font-size: 10px"
                                *ngIf="
                                  isFocused === 'customerName' ||
                                  (data.NAME != undefined &&
                                    data.NAME != null &&
                                    data.NAME != '' &&
                                    isFocused === 'customerName')
                                "
                              >
                                {{ data.NAME ? data.NAME.length : 0 }}/256
                              </h6>
                            </nz-form-control>
                          </nz-form-item>
                        </div>
                      </div>
                      <div nz-row>
                        <div nz-col nzSpan="11">
                          <nz-form-item>
                            <nz-form-label nzRequired nzNoColon
                              >Email ID&nbsp;<span
                                nz-icon
                                nzType="info-circle"
                                nzTheme="twotone"
                                nz-tooltip
                                nzTooltipTitle="e.g.: jack@example.com"
                              ></span
                            ></nz-form-label>
                            <nz-form-control nzErrorTip="Please Enter Email Id">
                              <input
                                nz-input
                                name="email"
                                placeholder="Enter Email"
                                [pattern]="emailpattern"
                                [(ngModel)]="data.EMAIL"
                                required
                                maxlength="64"
                                #email="ngModel"
                                autocomplete="off"
                                autocomplete="off"
                                (focus)="isFocused = 'email'"
                                (blur)="isFocused = ''"
                              />
                              <h6
                                style="color: red; font-size: 10px"
                                *ngIf="
                                  isFocused === 'email' ||
                                  (data.EMAIL != undefined &&
                                    data.EMAIL != null &&
                                    data.EMAIL != '' &&
                                    isFocused === 'email')
                                "
                              >
                                {{ data.EMAIL ? data.EMAIL.length : 0 }}/64
                              </h6>
                            </nz-form-control>
                          </nz-form-item>
                        </div>

                          <div nz-col nzSpan="13">
                          <nz-form-item>
                            <nz-form-label nzRequired nzNoColon
                              >Mobile No.</nz-form-label
                            >
                            <nz-form-control
                              nzErrorTip="Please enter a valid Mobile No."
                              [nzValidateStatus]="mobileNo"
                            >
                              <div nz-row>
                                <div nz-col nzSpan="12">
                                  <nz-select
                                    name="countrycode"
                                    [(ngModel)]="data.COUNTRY_CODE"
                                    [nzOptionOverflowSize]="5"
                                    nzShowSearch
                                    [nzDropdownMatchSelectWidth]="false"
                                    autocomplete="off"
                                    nzPlaceHolder="Code"
                                    required
                                  >
                                    <nz-option
                                      *ngFor="let option of countryCodes"
                                      [nzValue]="option.value"
                                      [nzLabel]="option.label"
                                    ></nz-option>
                                  </nz-select>
                                </div>
                                <div nz-col nzSpan="12">
                                  <input
                                    nz-input
                                    name="mobileno"
                                    placeHolder="Enter Mobile No."
                                    autocomplete="off"
                                    [(ngModel)]="data.MOBILE_NO"
                                    #mobileNo="ngModel"
                                    [pattern]="commonFunction.mobpattern"
                                    (keypress)="commonFunction.onlynum($event)"
                                    maxlength="10"
                                    minlength="10"
                                    required
                                    autocomplete="off"
                                  />
                                </div>
                              </div>
                            </nz-form-control>
                          </nz-form-item>
                        </div>

                        <div nz-col nzSpan="11"      *ngIf="data.CUSTOMER_TYPE == 'B' && !data.ID">
                          <nz-form-item
                       
                            style="
                              display: inline-block;
                              width: -webkit-fill-available;
                              text-align: left;
                              margin-top: 0px;
                              margin-bottom: 4px;
                            "
                          >
                            <nz-form-label nzNoColon
                              >Password&nbsp;<span style="color: red"
                                >*</span
                              ></nz-form-label
                            >
                            <nz-form-control
                              style="text-align: left"
                              nzRequired
                            >
                              <nz-input-group
                                nzPrefixIcon="lock"
                                [nzSuffix]="suffixTemplate"
                              >
                                <input
                                  nz-input
                                  [type]="passwordVisible ? 'text' : 'password'"
                                  name="passwordss"
                                  maxlength="20"
                                  [(ngModel)]="data.PASSWORD"
                                  placeholder="Enter Password"
                                  required
                                />
                              </nz-input-group>
                              <ng-template #suffixTemplate>
                                <i
                                  nz-icon
                                  [nzType]="
                                    passwordVisible ? 'eye' : 'eye-invisible'
                                  "
                                  (click)="passwordVisible = !passwordVisible"
                                ></i>
                              </ng-template>
                            </nz-form-control>
                          </nz-form-item>
                        </div>

                        <div
                          nz-col
                          nzSpan="13"
                          *ngIf="data.CUSTOMER_TYPE == 'B'"
                        >
                          <nz-form-item>
                            <nz-form-label nzNoColon
                              >Manager Name</nz-form-label
                            >
                            <nz-form-control>
                              <nz-select
                                nzShowSearch
                                nzPlaceHolder="Select Manager"
                                name="custManager"
                                [(ngModel)]="data.CUSTOMER_MANAGER_ID"
                                nzAllowClear
                              >
                                <nz-option
                                  *ngFor="let role of CustomerManager"
                                  [nzValue]="role.ID"
                                  [nzLabel]="role.NAME"
                                >
                                </nz-option>
                              </nz-select>
                            </nz-form-control>
                          </nz-form-item>
                        </div>
                        <div
                          nz-col
                          nzSpan="12"
                          *ngIf="data.CUSTOMER_TYPE == 'I'"
                        >
                          <nz-form-item>
                            <nz-form-label nzNoColon
                              >Alternate Mobile No.</nz-form-label
                            >
                            <nz-form-control
                              nzErrorTip="Enter Alternate Mobile No."
                              [nzValidateStatus]="altMobileNo"
                            >
                              <div nz-row>
                                <div nz-col nzSpan="10">
                                  <nz-select
                                    name="countrycodealt"
                                    [(ngModel)]="data.ALTCOUNTRY_CODE"
                                    [nzOptionOverflowSize]="5"
                                    nzShowSearch
                                    [nzDropdownMatchSelectWidth]="false"
                                    nzPlaceHolder="Code"
                                  >
                                    <nz-option
                                      *ngFor="let option of countryCodes"
                                      [nzValue]="option.value"
                                      [nzLabel]="option.label"
                                    ></nz-option>
                                  </nz-select>
                                </div>
                                <div nz-col nzSpan="14">
                                  <input
                                    nz-input
                                    name="ALTERNATE_MOBILE_NO"
                                    placeHolder="Enter Mobile No."
                                    autocomplete="off"
                                    [(ngModel)]="data.ALTERNATE_MOBILE_NO"
                                    #altMobileNo="ngModel"
                                    (keypress)="commonFunction.onlynum($event)"
                                    pattern="^[1-9][0-9]{9}$"
                                    maxlength="10"
                                    minlength="10"
                                    required
                                    autocomplete="off"
                                  />
                                </div>
                              </div>
                            </nz-form-control>
                          </nz-form-item>
                        </div>

                        <div
                          nz-col
                          nzSpan="5"
                          *ngIf="data.CUSTOMER_TYPE === 'I'"
                        >
                          <nz-form-item>
                            <nz-form-label nzNoColon
                              >GST Invoice?</nz-form-label
                            >
                            <nz-form-control>
                              <nz-switch
                                name="IS_HAVE_GST"
                                nzCheckedChildren="Yes"
                                nzUnCheckedChildren="No"
                                [(ngModel)]="data.IS_HAVE_GST"
                                (ngModelChange)="chagegst($event)"
                              >
                              </nz-switch>
                            </nz-form-control>
                          </nz-form-item>
                        </div>

                        <div nz-col nzSpan="5">
                          <nz-form-item>
                            <nz-form-label nzNoColon>Status</nz-form-label>
                            <nz-form-control>
                              <nz-switch
                                name="Status"
                                nzCheckedChildren="Active"
                                nzUnCheckedChildren="Inactive"
                                [(ngModel)]="data.ACCOUNT_STATUS"
                              >
                              </nz-switch>
                            </nz-form-control>
                          </nz-form-item>
                        </div>

                        <div
                          nz-col
                          nzSpan="7"
                          *ngIf="data.CUSTOMER_TYPE === 'B'"
                        >
                          <nz-form-item>
                            <nz-form-label nzRequired nzNoColon
                              >Short Code</nz-form-label
                            >
                            <nz-form-control
                              nzHasFeedback
                              nzErrorTip="Enter Short Code"
                            >
                              <input
                                style="width: 100%"
                                nz-input
                                name="shortName"
                                maxlength="8"
                                autocomplete="off"
                                [(ngModel)]="data.SHORT_CODE"
                                required
                                (keypress)="allowAlphanumericAndSymbols($event)"
                                placeholder="Enter Short Code"
                                (focus)="isFocused = 'shortCode'"
                                (blur)="isFocused = ''"
                              />
                            </nz-form-control>

                            <h6
                              style="color: red; font-size: 10px"
                              *ngIf="
                                isFocused === 'shortCode' ||
                                (data.SHORT_CODE && isFocused === 'shortCode')
                              "
                            >
                              {{ data.SHORT_CODE?.length || 0 }}/8
                            </h6>
                          </nz-form-item>
                        </div>

                        <div
                          nz-col
                          nzSpan="10"
                          *ngIf="data.CUSTOMER_TYPE == 'B'"
                        >
                          <nz-form-item>
                            <nz-form-label nzNoColon
                              >Have Special Catalogue?</nz-form-label
                            >
                            <nz-form-control>
                              <nz-switch
                                name="SplCat"
                                nzCheckedChildren="Yes"
                                nzUnCheckedChildren="No"
                                [(ngModel)]="data.IS_SPECIAL_CATALOGUE"
                              >
                              </nz-switch>
                            </nz-form-control>
                          </nz-form-item>
                        </div>
                        <div
                          nz-col
                          nzSpan="7"
                          *ngIf="data.CUSTOMER_TYPE == 'B'"
                        >
                          <nz-form-item>
                            <nz-form-label nzRequired nzNoColon
                              >PAN No.&nbsp;<span
                                nz-icon
                                nzType="info-circle"
                                nzTheme="twotone"
                                nz-tooltip
                                nzTooltipTitle="e.g.: ABCDE1234F"
                              ></span
                            ></nz-form-label>
                            <nz-form-control
                              nzErrorTip="Please Enter Valid PAN No."
                            >
                              <input
                                nz-input
                                name="PAN1"
                                placeholder="Enter PAN No."
                                pattern="^[A-Z]{5}[0-9]{4}[A-Z]{1}$"
                                [(ngModel)]="data.PAN"
                                (ngModelChange)="
                                  data.PAN = data.PAN?.toUpperCase()
                                "
                                maxlength="10"
                                minlength="10"
                                autocomplete="off"
                                required
                                (focus)="isFocused = 'pan'"
                                (blur)="isFocused = ''"
                              />
                              <!-- Character Count -->
                              <h6
                                style="color: red; font-size: 10px"
                                *ngIf="
                                  isFocused === 'pan' ||
                                  (data.PAN != undefined &&
                                    data.PAN != null &&
                                    data.PAN != '' &&
                                    isFocused === 'pan')
                                "
                              >
                                {{ data.PAN?.length || 0 }}/10
                              </h6>
                              <!-- Note or Sample Pattern -->
                            </nz-form-control>
                          </nz-form-item>
                        </div>
                        <div nz-col nzSpan="24" *ngIf="data.IS_HAVE_GST">
                          <nz-form-item>
                            <nz-form-label nzRequired nzNoColon
                              >Company Name</nz-form-label
                            >
                            <nz-form-control nzErrorTip="Enter Company Name">
                              <input
                                nz-input
                                name="individualcompanyName"
                                placeholder="Enter Company Name"
                                maxlength="128"
                                autocomplete="off"
                                type="text"
                                (keypress)="commonFunction.allowOnly($event)"
                                [(ngModel)]="data.INDIVIDUAL_COMPANY_NAME"
                                required
                                autocomplete="off"
                                (focus)="isFocused = 'individualcompanyName'"
                                (blur)="isFocused = ''"
                              />
                              <h6
                                style="color: red; font-size: 10px"
                                *ngIf="
                                  isFocused === 'individualcompanyName' ||
                                  (data.INDIVIDUAL_COMPANY_NAME != undefined &&
                                    data.INDIVIDUAL_COMPANY_NAME != null &&
                                    data.INDIVIDUAL_COMPANY_NAME != '' &&
                                    isFocused === 'individualcompanyName')
                                "
                              >
                                {{
                                  data.INDIVIDUAL_COMPANY_NAME?.length || 0
                                }}/128
                              </h6>
                            </nz-form-control>
                          </nz-form-item>
                        </div>
                        <div nz-col nzSpan="24" *ngIf="data.IS_HAVE_GST">
                          <nz-form-item>
                            <nz-form-label nzRequired nzNoColon
                              >Company Address</nz-form-label
                            >
                            <nz-form-control nzErrorTip="Enter Company Address">
                              <textarea
                                nz-input
                                rows="2"
                                name="companyaddress"
                                autocomplete="off"
                                placeholder="Enter Company Address"
                                maxlength="256"
                                required="required"
                                [(ngModel)]="data.COMPANY_ADDRESS"
                                (keypress)="commonFunction.allowOnly($event)"
                                (focus)="isFocused = 'companyaddress'"
                                (blur)="isFocused = ''"
                              ></textarea>
                              <h6
                                style="color: red; font-size: 10px"
                                *ngIf="
                                  isFocused === 'companyaddress' ||
                                  (data.COMPANY_ADDRESS != undefined &&
                                    data.COMPANY_ADDRESS != null &&
                                    data.COMPANY_ADDRESS != '' &&
                                    isFocused === 'companyaddress')
                                "
                              >
                                {{ data.COMPANY_ADDRESS?.length || 0 }}/256
                              </h6>
                            </nz-form-control>
                          </nz-form-item>
                        </div>
                        <div
                          nz-col
                          nzSpan="8"
                          *ngIf="data.IS_HAVE_GST || data.CUSTOMER_TYPE == 'B'"
                        >
                          <nz-form-item>
                            <nz-form-label
                              nzRequired
                              nzNoColon
                              *ngIf="data.IS_HAVE_GST"
                              >GST No.&nbsp;<span
                                nz-icon
                                nzType="info-circle"
                                nzTheme="twotone"
                                nz-tooltip
                                nzTooltipTitle=" e.g.: 22ABCDE1234F1Z5"
                              ></span
                            ></nz-form-label>
                            <nz-form-label nzNoColon *ngIf="!data.IS_HAVE_GST"
                              >GST No.&nbsp;<span
                                nz-icon
                                nzType="info-circle"
                                nzTheme="twotone"
                                nz-tooltip
                                nzTooltipTitle=" e.g.: 22ABCDE1234F1Z5"
                              ></span
                            ></nz-form-label>
                            <nz-form-control
                              nzErrorTip="Please Enter Valid GST No."
                            >
                              <input
                                nz-input
                                name="GST"
                                placeholder="Enter GST No."
                                pattern="^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$"
                                [(ngModel)]="data.GST_NO"
                                (ngModelChange)="
                                  data.GST_NO = data.GST_NO?.toUpperCase()
                                "
                                maxlength="15"
                                minlength="15"
                                autocomplete="off"
                                (focus)="isFocused = 'gst'"
                                (blur)="isFocused = ''"
                              />
                              <!-- Character Count -->
                              <h6
                                style="color: red; font-size: 10px"
                                *ngIf="
                                  isFocused === 'gst' ||
                                  (data.GST_NO != undefined &&
                                    data.GST_NO != null &&
                                    data.GST_NO != '' &&
                                    isFocused === 'gst')
                                "
                              >
                                {{ data.GST_NO?.length || 0 }}/15
                              </h6>
                              <!-- Note or Sample Pattern -->
                            </nz-form-control>
                          </nz-form-item>
                        </div>
                      </div>
                    </div>

                    <div class="my-box">
                      <div nz-col nzSpan="16">
                        <nz-form-item>
                          <nz-form-label nzNoColon
                            >Profile Photo&nbsp;<span
                              nz-icon
                              nzType="info-circle"
                              nzTheme="twotone"
                              nz-tooltip
                              nzTooltipTitle=" Please select an image file (PNG, JPG, JPEG) with a image
                              dimension 128*128."
                            ></span>
                            <span
                              *ngIf="
                                (data.PROFILE_PHOTO &&
                                  data.PROFILE_PHOTO != '' &&
                                  data.PROFILE_PHOTO !== null) ||
                                fileURL
                              "
                              nz-popconfirm
                              nzPopconfirmTitle="Are you sure you want to delete?"
                              nzPopconfirmPlacement="top"
                              (nzOnConfirm)="imageDeleteConfirm(data)"
                              (nzOnCancel)="deleteCancel()"
                              style="
                                cursor: pointer;
                                color: red;
                                margin-left: 10px;
                              "
                            >
                              <span
                                nz-icon
                                nzType="delete"
                                nzTheme="twotone"
                                [nzTwotoneColor]="'#FF0000'"
                                nz-tooltip
                                nzTooltipTitle="Delete"
                              ></span>
                            </span>
                          </nz-form-label>
                          <nz-form-control nzErrorTip="Select Profile Photo">
                            <!-- Upload Button -->
                            <button
                              *ngIf="
                                !fileURL &&
                                (!data.PROFILE_PHOTO ||
                                  data.PROFILE_PHOTO.trim() === '')
                              "
                              nz-button
                              style="
                                height: 28px;
                                padding: 0px 7px;
                                font-size: 10px;
                                width: 40%;
                              "
                              (click)="image1.click()"
                            >
                              <span nz-icon nzType="upload"></span>
                              Profie Photo
                              <input
                                #image1
                                name="image1"
                                type="file"
                                accept=".png, .jpg, .jpeg"
                                (change)="fileChangeEvent($event)"
                                style="display: none"
                              />
                            </button>

                            <div
                              *ngIf="
                                data.PROFILE_PHOTO &&
                                data.PROFILE_PHOTO != null &&
                                data.PROFILE_PHOTO != undefined &&
                                data.PROFILE_PHOTO != '' &&
                                (fileURL == undefined ||
                                  fileURL == null ||
                                  fileURL == '')
                              "
                              style="margin-top: 10px"
                            >
                              <img
                                nz-image
                                [nzSrc]="fullImageUrl"
                                alt="Uploaded Image"
                                style="
                                  width: 120px;
                                  height: auto;
                                  border: 1px solid #ddd;
                                  margin-bottom: 10px;
                                "
                              />
                            </div>
                            <div
                              *ngIf="
                                fileURL != undefined &&
                                fileURL != null &&
                                fileURL != '' &&
                                fileURL != ' '
                              "
                              class="ss"
                              style="align-items: center"
                            >
                              <img
                                nz-image
                                [nzSrc]="imagePreview"
                                alt="Preview"
                                style="
                                  height: auto;
                                  width: auto;
                                  overflow: auto;
                                  max-width: 600;
                                  max-height: 400;
                                "
                              />
                            </div>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                    </div>
                  </nz-spin>
                </form>
              </div>
            </nz-spin>
          </form>
          <div class="footer">
            <button
              type="button"
              nz-button
              style="margin-right: 8px"
              class="ant-btn"
              (click)="close(accountMasterPage)"
            >
              <span>Cancel</span>
            </button>
            <button
              type="button"
              class="ant-btn ant-btn-primary"
              nz-button
              *ngIf="!data.ID"
              [nzLoading]="isSpinning"
              (click)="save(false, accountMasterPage)"
            >
              <span>Save & Next</span>
            </button>
            <button
              type="button"
              class="ant-btn ant-btn-primary"
              nz-button
              [nzLoading]="isSpinning"
              *ngIf="data.ID"
              (click)="save(false, accountMasterPage)"
              style="margin-right: 8px"
            >
              <span>Update </span>
            </button>
            <button
              type="button"
              class="ant-btn ant-btn-primary"
              nz-button
              [nzLoading]="isSpinning"
              *ngIf="data.ID"
              (click)="next()"
            >
              <span
                >Next &nbsp;<span
                  nz-icon
                  nzType="arrow-right"
                  nzTheme="outline"
                ></span
              ></span>
            </button>
          </div>
        </div>

        <!-- <div *ngIf="tab.name == 'Address Details'"> -->
        <div *ngIf="tab.name == 'Address Details'">
          <div nz-row nzType="flex" *ngIf="showsearch">
            <div nz-col nzXs="24" nzSm="24" nzMd="20" nzLg="20" nzXl="8"></div>

            <div
              nz-col
              nzXs="24"
              nzSm="24"
              nzMd="4"
              nzLg="6"
              nzXl="16"
              style="display: flex; justify-content: flex-end"
            >
              <form nz-form [nzLayout]="'inline'">
                <nz-form-item>
                  <nz-input-group nzSearch [nzAddOnAfter]="suffixIconButton">
                    <input
                      type="text"
                      name="search"
                      (keyup)="keyup($event)"
                      (ngModelChange)="search(searchText)"
                      autocomplete="off"
                      [(ngModel)]="searchText"
                      nz-input
                      style="width: 250px !important"
                      placeholder="Search Records."
                    />
                  </nz-input-group>
                  <ng-template #suffixIconButton>
                    <button
                      nz-button
                      nzType="primary"
                      (click)="search(searchText)"
                      nzSearch
                    >
                      <i nz-icon nzType="search"></i>
                    </button>
                  </ng-template>
                </nz-form-item>
              </form>
            </div>
          </div>
          <div class="hh" id="activityItemFamily" #activityItemFamily>
            <nz-spin [nzSpinning]="loadingFamilyRecords">
              <div
                nz-row
                [nzGutter]="16"
                style="flex-wrap: wrap; margin-top: 10px"
              >
                <!-- Add Address Card -->
                <div nz-col [nzSpan]="12" style="margin-bottom: 10px">
                  <div class="cardstyle" (click)="addAddress()">
                    <div class="plusCard">
                      <span
                        nz-icon
                        nzType="plus-circle"
                        nzTheme="outline"
                        style="
                          font-size: 50px !important;
                          color: #092b9c !important;
                        "
                      >
                      </span>
                    </div>
                  </div>
                </div>

                <div
                  nz-col
                  [nzSpan]="12"
                  *ngFor="let data of addressdata; let i = index"
                  style="margin-bottom: 10px"
                >
                  <div
                    class="cardstyle"
                    [ngStyle]="{
                      'background-color':
                        data.IS_DEFAULT != 0 ? 'rgb(217 217 217 / 28%)' : '#fff'
                    }"
                  >
                    <div nz-row>
                      <!-- Default Section -->
                      <div
                        class="subnamm"
                        nz-col
                        nzSpan="11"
                        style="
                          display: flex;
                          justify-content: center;
                          align-items: center;
                          margin-bottom: 5px;
                          background-color: #092b9c !important;
                          padding: 5px;
                          border-radius: 5px;
                        "
                      >
                        <div
                          style="
                            font-weight: bold;
                            margin-right: 5px;
                            color: #ffffff;
                          "
                        >
                          Default:
                        </div>
                        <div
                          *ngIf="data.IS_DEFAULT == 0"
                          style="color: #ffffff"
                        >
                          No
                        </div>
                        <div
                          *ngIf="data.IS_DEFAULT != 0"
                          style="color: #ffffff"
                        >
                          Yes
                        </div>
                      </div>

                      <nz-divider nzType="vertical"></nz-divider>

                      <!-- Type Section -->
                      <div
                        class="subnamm"
                        nz-col
                        nzSpan="11"
                        style="
                          display: flex;
                          justify-content: center;
                          align-items: center;
                          margin-bottom: 5px;
                          background-color: #092b9c !important;
                          padding: 5px;
                          border-radius: 5px;
                        "
                      >
                        <div
                          style="
                            font-weight: bold;
                            margin-right: 5px;
                            color: #ffffff;
                          "
                        >
                          Type:
                        </div>
                        <div *ngIf="data.TYPE == 'H'" style="color: #ffffff">
                          Home
                        </div>
                        <div *ngIf="data.TYPE == 'F'" style="color: #ffffff">
                          Office
                        </div>
                        <div *ngIf="data.TYPE == 'B'" style="color: #ffffff">
                          Branch
                        </div>
                        <div *ngIf="data.TYPE == 'O'" style="color: #ffffff">
                          Other
                        </div>
                      </div>

                      <nz-divider></nz-divider>

                      <div
                        class="subnamm"
                        nz-col
                        nzSpan="24"
                        style="
                          display: flex;
                          align-items: baseline;
                          white-space: pre-line;
                          padding-top: 5px;
                        "
                      >
                        <address
                          style="
                            display: -webkit-box;
                            -webkit-line-clamp: 2;
                            line-clamp: 2;
                            -webkit-box-orient: vertical;
                            overflow: hidden;
                            text-overflow: ellipsis;
                            text-align: justify;
                          "
                          nz-tooltip
                          [nzTooltipTitle]="data.ADDRESS_LINE_1"
                        >
                          <!-- {{ data.ADDRESS_LINE_1 }} -->

                          <span
                            #textContainer1
                            class="truncate-text"
                            [nzTooltipTitle]="
                              isTextOverflow ? data['ADDRESS_LINE_1'] : null
                            "
                            #tooltipRef="nzTooltip"
                            nz-tooltip
                            (mouseenter)="
                              checkOverflow(textContainer1, tooltipRef)
                            "
                            >{{ data.ADDRESS_LINE_1 }}</span
                          >
                        </address>
                      </div>
                      <div
                        class="subnamm"
                        nz-col
                        nzSpan="12"
                        *ngIf="data.COUNTRY_NAME"
                        style="
                          display: flex;
                          align-items: baseline;
                          white-space: pre-line;
                        "
                      >
                        <address
                          style="
                            display: -webkit-box;
                            -webkit-line-clamp: 2;
                            line-clamp: 2;
                            -webkit-box-orient: vertical;
                            overflow: hidden;
                            text-overflow: ellipsis;
                            text-align: justify;
                          "
                          nz-tooltip
                          [nzTooltipTitle]="data.COUNTRY_NAME"
                        >
                          <!-- {{ data.COUNTRY_NAME }} -->
                          <span
                            #textContainer2
                            class="truncate-text"
                            [nzTooltipTitle]="
                              isTextOverflow ? data['COUNTRY_NAME'] : null
                            "
                            #tooltipRef2="nzTooltip"
                            nz-tooltip
                            (mouseenter)="
                              checkOverflow(textContainer2, tooltipRef2)
                            "
                            >{{ data.COUNTRY_NAME }}</span
                          >
                        </address>
                      </div>
                      <div
                        class="subnamm"
                        nz-col
                        nzSpan="12"
                        *ngIf="data.STATE_NAME"
                        style="
                          display: flex;
                          align-items: baseline;
                          white-space: pre-line;
                        "
                      >
                        <address
                          style="
                            display: -webkit-box;
                            -webkit-line-clamp: 2;
                            line-clamp: 2;
                            -webkit-box-orient: vertical;
                            overflow: hidden;
                            text-overflow: ellipsis;
                            text-align: justify;
                          "
                          nz-tooltip
                          [nzTooltipTitle]="data.STATE_NAME"
                        >
                          <!-- {{ data.STATE_NAME }} -->
                          <span
                            #textContainer3
                            class="truncate-text"
                            [nzTooltipTitle]="
                              isTextOverflow ? data['STATE_NAME'] : null
                            "
                            #tooltipRef3="nzTooltip"
                            nz-tooltip
                            (mouseenter)="
                              checkOverflow(textContainer3, tooltipRef3)
                            "
                            >{{ data.STATE_NAME }}</span
                          >
                        </address>
                      </div>
                      <div
                        class="subnamm"
                        nz-col
                        nzSpan="12"
                        *ngIf="data.DISTRICT_NAME"
                        style="
                          display: flex;
                          align-items: baseline;
                          white-space: pre-line;
                        "
                      >
                        <address
                          style="
                            display: -webkit-box;
                            -webkit-line-clamp: 2;
                            line-clamp: 2;
                            -webkit-box-orient: vertical;
                            overflow: hidden;
                            text-overflow: ellipsis;
                            text-align: justify;
                          "
                          nz-tooltip
                          [nzTooltipTitle]="data.DISTRICT_NAME"
                        >
                          <!-- {{ data.DISTRICT_NAME }} -->
                          <span
                            #textContainer4
                            class="truncate-text"
                            [nzTooltipTitle]="
                              isTextOverflow ? data['DISTRICT_NAME'] : null
                            "
                            #tooltipRef4="nzTooltip"
                            nz-tooltip
                            (mouseenter)="
                              checkOverflow(textContainer4, tooltipRef4)
                            "
                            >{{ data.DISTRICT_NAME }}</span
                          >
                        </address>
                      </div>
                      <div
                        class="subnamm"
                        nz-col
                        nzSpan="12"
                        *ngIf="data.PINCODE"
                        style="
                          display: flex;
                          align-items: baseline;
                          white-space: pre-line;
                        "
                      >
                        <address
                          style="
                            display: -webkit-box;
                            -webkit-line-clamp: 2;
                            line-clamp: 2;
                            -webkit-box-orient: vertical;
                            overflow: hidden;
                            text-overflow: ellipsis;
                            text-align: justify;
                          "
                          nz-tooltip
                          [nzTooltipTitle]="data.PINCODE"
                        >
                          <!-- {{ data.PINCODE }} -->
                          <span
                            #textContainer6
                            class="truncate-text"
                            [nzTooltipTitle]="
                              isTextOverflow ? data['PINCODE'] : null
                            "
                            #tooltipRef5="nzTooltip"
                            nz-tooltip
                            (mouseenter)="
                              checkOverflow(textContainer6, tooltipRef5)
                            "
                            >{{ data.PINCODE }}</span
                          >
                        </address>
                      </div>

                      <div
                        *ngIf="data.LANDMARK"
                        class="subnamm"
                        nz-col
                        nzSpan="24"
                        style="
                          display: flex;
                          align-items: baseline;
                          white-space: pre-line;
                          padding-top: 5px;
                        "
                      >
                        <address
                          style="
                            display: -webkit-box;
                            -webkit-line-clamp: 2;
                            line-clamp: 2;
                            -webkit-box-orient: vertical;
                            overflow: hidden;
                            text-overflow: ellipsis;
                            text-align: justify;
                          "
                          nz-tooltip
                          [nzTooltipTitle]="data.LANDMARK"
                        >
                          <span
                            #textContainer9
                            class="truncate-text"
                            [nzTooltipTitle]="
                              isTextOverflow ? data['LANDMARK'] : null
                            "
                            #tooltipRef9="nzTooltip"
                            nz-tooltip
                            (mouseenter)="
                              checkOverflow(textContainer9, tooltipRef9)
                            "
                            >{{ data.LANDMARK }}</span
                          >
                        </address>
                      </div>
                    </div>

                    <div class="card-footer">
                      <button
                        nz-button
                        nzType="primary"
                        (click)="editAddress(data)"
                      >
                        Edit
                      </button>
                      <nz-divider
                        nzType="vertical"
                        *ngIf="data.IS_DEFAULT == 0"
                      ></nz-divider>
                      <button
                        *ngIf="data.IS_DEFAULT == 0"
                        nz-button
                        nzType="default"
                        (click)="confirmSetAsDefault(data)"
                      >
                        Set as Default
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </nz-spin>
            <div class="footer">
              <button
                type="button"
                class="ant-btn ant-btn-primary"
                nz-button
                [nzLoading]="isSpinning"
                (click)="back()"
              >
                <span
                  ><span nz-icon nzType="arrow-left" nzTheme="outline"></span
                  >&nbsp;Back</span
                >
              </button>
            </div>
          </div>
        </div>
        <!-- </div> -->
      </nz-tab>
    </nz-tabset>
  </form>

  <nz-modal
    [nzWidth]="500"
    [(nzVisible)]="ImageModalVisible"
    nzMaskClosable="false"
    nzClosable="false"
    [nzContent]="content"
    [nzTitle]="'Profile Photo View'"
    (nzOnCancel)="ImageModalCancel()"
    [nzFooter]="ImageModalFooter"
  >
    <ng-template #content>
      <nz-spin [nzSpinning]="isSpinning">
        <div
          *ngIf="
            imageshow != undefined &&
            imageshow != null &&
            imageshow != '' &&
            (fileURL == undefined || fileURL == null || fileURL == '')
          "
          class="ss"
          style="align-items: center"
        >
          <!-- <img
            src="{{ imageshow }}"
            alt="Preview"
            style="
              height: auto;
              width: auto;
              overflow: auto;
              max-width: 600;
              max-height: 400;
              align-items: center;
            "
          /> -->
        </div>
        <div
          *ngIf="fileURL != undefined && fileURL != null && fileURL != ''"
          class="ss"
          style="align-items: center"
        >
          <img
            [src]="imagePreview"
            alt="Preview"
            style="
              height: auto;
              width: auto;
              overflow: auto;
              max-width: 600;
              max-height: 400;
            "
          />
        </div>
      </nz-spin>
    </ng-template>
    <ng-template #ImageModalFooter>
      <button nz-button nzType="default" (click)="ImageModalCancel()">
        Close
      </button>
    </ng-template>
  </nz-modal>
</div>

<div *ngIf="drawerVisibleAddress">
  <nz-drawer
    [nzBodyStyle]="{
      height: 'calc(100% - 55px)',
      overflow: 'auto',
      'padding-bottom': '53px'
    }"
    [nzClosable]="true"
    [nzMask]="true"
    [nzMaskClosable]="true"
    [nzWidth]="600"
    [nzVisible]="drawerVisibleAddress"
    [nzTitle]="drawerTitle"
    (nzOnClose)="drawerAddressClose()"
    (nzKeyboard)="(true)"
  >
    <ng-container *nzDrawerContent>
      <app-address-details
        [dataList]="dataList"
        [data]="drawerData"
        [drawerAddressClose]="closeCallbackAddress"
        [dataList]="dataList"
        [ID]="ID"
        [CUSTOMER_MASTER_ID]="CUSTOMER_MASTER_ID"
      ></app-address-details>
    </ng-container>
  </nz-drawer>
</div>
<nz-modal
  [nzWidth]="900"
  [nzStyle]="{ 'margin-top': '-80px' }"
  [(nzVisible)]="CropImageModalVisible"
  nzMaskClosable="false"
  nzClosable="false"
  [nzContent]="content2"
  [nzTitle]="'Crop Image'"
  (nzOnCancel)="CropImageModalCancel()"
  [nzFooter]="CropImageModalFooter"
>
  <ng-template #content2>
    <nz-spin [nzSpinning]="isSpinningCrop">
      <div
        *ngIf="
          cropimageshow != undefined &&
          cropimageshow != null &&
          cropimageshow != ''
        "
        class="ss"
        style="height: 500px; overflow: scroll"
      >
        <!-- <iframe
      [src]="cropimageshow"
      style="width: 832px; height: 396px"
      frameborder="0"
    ></iframe> -->
        <div *ngIf="croppedImage" style="text-align: center">
          <p>Cropped Image:</p>
          <img [src]="croppedImage" width="128" height="128" />
        </div>
        <nz-divider
          [ngStyle]="{ width: imageWidth - 900 + 'px' }"
          nzPlain
          nzVariant="solid"
        ></nz-divider>
        <image-cropper
          [imageChangedEvent]="imageChangedEvent"
          [maintainAspectRatio]="false"
          [cropper]="cropperPosition"
          format="png"
          (imageCropped)="imageCropped($event)"
          (imageLoaded)="imageLoaded($event)"
          (cropperReady)="cropperReady($event)"
          (loadImageFailed)="loadImageFailed()"
        ></image-cropper>
      </div>
    </nz-spin>
  </ng-template>
  <ng-template #CropImageModalFooter>
    <button nz-button nzType="default" (click)="CropImageModalCancel()">
      Close
    </button>
    <button
      nz-button
      nzType="primary"
      (click)="onFileSelected(imageChangedEvent)"
    >
      Upload
    </button>
  </ng-template>
</nz-modal>
