<nz-layout class="main-layout">
    <!-- Sidebar Navigation -->
    <nz-sider nzWidth="220px" nzTheme="light" [nzReverseArrow]="false" (nzCollapsedChange)="isCollapsed = $event"
        class="custom-sider" style="background: white !important">
        <div class="logo" style="display: flex; border-bottom: 1px solid #d9d9d9">
            <div>
                <nz-avatar nzIcon="question" style="
            height: 37px;
            width: 37px;
            border-radius: 50%;
            background-color: #ffffff;
            color: #092b9c;
            border: 2px solid #092b9c;
          "></nz-avatar>
            </div>
            <div style="text-align: left; align-self: center !important">
                <span style="font-size: 19px !important; padding-left: 10px">FAQs</span><br />
                <!-- <span style="font-size: 15px;padding-left: 10px;">Explore Solutions</span> -->
            </div>
        </div>
        <!-- <ul nz-menu nzMode="inline" class="sider-menu" style="border-right: none">
            <li style="font-size: 13px; font-weight: 700" *ngFor="let menu of menuItems" nz-submenu
                [nzTitle]="menu.title" [(nzOpen)]="menu.open">
                <ul style="font-size: 12px">
                    <li style="padding-top: 0px !important" *ngFor="let group of menu.children" nz-menu-group>
                        <ul>
                            <li *ngFor="let item of group.items" style="font-weight: 500" nz-menu-item
                                [nzSelected]="ItemID?.id === item.id" (click)="onMenuItemClick(item)">
                                {{ item.title }}
                            </li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul> -->

        <ul nz-menu nzMode="inline" class="sider-menu" style="border-right: none">
            <li style="font-size: 13px; font-weight: 700" *ngFor="let menu of menuItems" nz-submenu
                [nzTitle]="menu.title?.length > 20 ? menu.title.slice(0, 20) + '...' : menu.title"
                nzTooltipPlacement="top" nz-tooltip [nzTooltipTitle]="menu.title" [(nzOpen)]="menu.open">
                <ul style="font-size: 12px">
                    <li style="padding-top: 0px !important" *ngFor="let group of menu.children" nz-menu-group>
                        <ul>
                            <li *ngFor="let item of group.items" style="font-weight: 500" nz-menu-item
                                [nzSelected]="ItemID?.id === item.id" nz-tooltip nzTooltipPlacement="right"
                                [nzTooltipTitle]="item.title?.length > 20 ? item.title : ''"
                                (click)="onMenuItemClick(item)">
                                <span style="text-overflow: ellipsis; white-space: nowrap; overflow: hidden;"
                                    *ngIf="item.title?.length >= 20">
                                    {{ item.title?.slice(0, 20) + "..." }}
                                </span>
                                <span *ngIf="item.title?.length < 20">{{ item.title }}</span>
                            </li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>



    </nz-sider>

    <!-- Main Content -->
    <nz-layout class="content-layout">
        <nz-header class="header">
            <!-- <div class="header-left">
                <h2 class="faq-title">FAQs</h2>
            </div>
            <div class="header-right"> -->
            <div class="search-container">
                <nz-input-group nzSize="large" [nzPrefix]="prefixIcon" [nzSuffix]="searchQuery ? clearIcon : undefined">
                    <input nz-input placeholder="Search FAQs..." name="skillesearch" [(ngModel)]="searchQuery"
                        (ngModelChange)="SearchSkill($event)" />
                </nz-input-group>
            </div>

            <!-- Prefix Icon (Search) -->
            <ng-template #prefixIcon>
                <i nz-icon nzType="search"></i>
            </ng-template>

            <!-- Suffix Icon (Clear) -->
            <ng-template #clearIcon>
                <i nz-icon nzType="close-circle" class="clear-icon" (click)="clearSearch()"></i>
            </ng-template>

            <!-- </div> -->
        </nz-header>
        <nz-content class="content" style="background: white !important">
            <nz-spin [nzSpinning]="isSpinning">
                <nz-collapse *ngIf="selectedContent?.length" [nzExpandIconPosition]="'right'" [nzAccordion]="true">
                    <nz-collapse-panel *ngFor="let faq of selectedContent; let i = index" style="font-weight: 700"
                        [nzHeader]="faq.QUESTION" [nzShowArrow]="true" [nzActive]="i === 0">
                        <div class="faq-header" style="white-space: pre-line">
                            <p class="faq-answer" style="font-weight: 400">
                                {{ faq.ANSWER }}
                            </p>
                            <div class="icons">
                                <!-- Like Button -->
                                <span class="thumbs-up" [ngClass]="{ active: faq.userLiked }"
                                    (click)="increasePositive(faq)">
                                    <span nz-icon nzType="like" [nzTheme]="faq.userLiked ? 'fill' : 'outline'"></span>
                                    {{ faq.POSITIVE_COUNT }}
                                </span>

                                <!-- Dislike Button -->
                                <span class="thumbs-down" [ngClass]="{ active: faq.showTextArea || faq.userDisliked }"
                                    (click)="submitNegativeResponse(faq)">
                                    <span nz-icon nzType="dislike"
                                        [nzTheme]="faq.userDisliked ? 'fill' : 'outline'"></span>
                                    {{ faq.NEGATIVE_COUNT }}
                                </span>
                            </div>
                        </div>

                        <!-- Textarea for Negative Response -->
                        <div *ngIf="faq.showTextArea" class="negative-response">
                            <textarea [(ngModel)]="faq.negativeFeedback" maxlength="512"
                                placeholder="Enter your feedback..."></textarea>
                            <button (click)="updateFeedback(faq)">Submit</button>
                        </div>


                    </nz-collapse-panel>
                </nz-collapse>
            </nz-spin>

            <div *ngIf="!selectedContent?.length" class="select-message">
                <nz-empty nzNotFoundImage="https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg"
                    [nzNotFoundContent]="contentTpl43" [nzNotFoundFooter]="footerTpl43" style="margin-top: 38px">
                    <ng-template #contentTpl43>
                        <span> Data Not Found</span>
                    </ng-template>
                    <ng-template #footerTpl43> </ng-template>
                </nz-empty>
            </div>
        </nz-content>
    </nz-layout>
</nz-layout>