<nz-spin [nzSpinning]="isSpinning">

  <div nz-row *ngIf="ratingdata.length > 0">
    <div nz-col nzSpan="12">
      <nz-rate [(ngModel)]="averageRating" nzDisabled></nz-rate>
      <span class="ant-rate-text">{{ averageRating }} Out Of 5</span>
      <span class="ant-rate-text">({{ globalRating }} global ratings)</span>
    </div>

    <div nz-col nzSpan="12" style="align-items: end">
      <div *ngFor="let prog of progressList">
        <div nz-row>
          <div nz-col nzSpan="5">{{ prog.rating }} Star</div>

          <div nz-col nzSpan="19">
            <nz-progress [nzPercent]="prog.progress_percentage" [nzStrokeColor]="'Yellow'"
              [nzStatus]="prog.progress_percentage === 100 ? 'normal' : 'active'">
              <!-- Custom Text for 100% -->
              <ng-template #text>
                {{
                prog.progress_percentage === 100
                ? "100%"
                : prog.progress_percentage + "%"
                }}
              </ng-template>
            </nz-progress>
          </div>
        </div>
      </div>
    </div>

    <nz-divider nzText="Comments" nzOrientation="center"></nz-divider>

    <div nz-col nzSpan="24" style="
      margin-top: 5px;
      padding: 5px;
      max-height: 40vh;
      overflow: auto;
      padding-right: 10px;
    ">
      <!-- <p class="formname">Technician Comments</p> -->
      <div *ngFor="let item of ratingdata; let i=index;">
        <nz-comment nzAuthor="{{ item['CUSTOMER_NAME'] }}">
          <nz-avatar nz-comment-avatar nzIcon="user" [nzSrc]="getProfileImage(item.PROFILE_PHOTO)"></nz-avatar>

          <nz-comment-content>
            <span>
              {{ item["COMMENTS"] }}
            </span>
            <div style="margin-top: 0px">
              <nz-rate [ngModel]="roundRating(item.RATING)" nzAllowHalf="true" name="RATINGss{{ i }}"
                nzDisabled="true"></nz-rate>
            </div>
          </nz-comment-content>
        </nz-comment>
      </div>
    </div>




  </div>

  <div nz-row>
    <div nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="24" nzXl="24" *ngIf="ratingdata.length == 0"
      style="font-weight: 600; margin-top: 10%">
      <nz-empty nzNotFoundImage="https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg"
        [nzNotFoundContent]="contentTpl" [nzNotFoundFooter]="footerTpl">
        <ng-template #contentTpl>
          <span> Data Not Found</span>
        </ng-template>
        <ng-template #footerTpl> </ng-template>
      </nz-empty>
    </div>
  </div>
</nz-spin>