<div class="skill-verification-container">
  <div nz-row nzType="flex">
    <div nz-col nzXs="24" nzSm="24" nzMd="20" nzLg="20" nzXl="8">
      <div class="formname">
        <span
          (click)="back()"
          nz-icon
          nzType="arrow-left"
          nzTheme="outline"
          class="back-icon"
        ></span
        >&nbsp;&nbsp;{{ formTitle }}
      </div>
    </div>
    <div
      nz-col
      nzXs="24"
      nzSm="24"
      nzMd="4"
      nzLg="6"
      nzXl="16"
      class="action-column"
    >
      <form nz-form [nzLayout]="'inline'">
        <nz-form-item class="filter-button-item">
          <button
            nz-button
            nzTooltipTitle="Filter"
            nzTooltipPlacement="top"
            nz-tooltip
            [nzType]="isfilterapply ? 'primary' : 'default'"
            [style.backgroundColor]="isfilterapply ? 'default' : ''"
            (click)="showMainFilter()"
            class="filter-button"
          >
            <i nz-icon nzType="filter"></i>
          </button>
        </nz-form-item>
        <nz-form-item>
          <nz-input-group
            nzSearch
            [nzAddOnAfter]="suffixIconButton"
            class="search-input-group"
          >
            <input
              type="text"
              name="search"
              id="button"
              (keyup)="onKeyupS($event)"
              (keydown.enter)="onEnterKey($event)"
              [(ngModel)]="searchText"
              nz-input
              autocomplete="off"
              placeholder="Min 3 chars required."
              class="search-input"
            />
          </nz-input-group>
          <ng-template #suffixIconButton>
            <button
              nz-button
              nzType="primary"
              (click)="search(true)"
              nzSearch
              class="search-button"
            >
              <i nz-icon nzType="search"></i>
            </button>
          </ng-template>
        </nz-form-item>
      </form>
    </div>
  </div>
  <div nz-row>
    <div nz-col nzSpan="24">
      <div class="filter {{ filterClass }}">
        <div class="filter-box">
          <div nz-row class="filter-top-row">
            <div nz-col [nzSpan]="24">
              <ng-container *ngIf="filterloading; else filtersContent">
                <div class="filter-loading">
                  <nz-spin nzSimple></nz-spin>
                </div>
              </ng-container>
              <ng-template #filtersContent>
                <ng-container
                  *ngIf="savedFilters && savedFilters.length > 0; else noData"
                >
                  <div nz-row nzGutter="8" class="filters-grid">
                    <div
                      nz-col
                      nzSpan="6"
                      *ngFor="let item of savedFilters"
                      class="filter-card-col"
                    >
                      <nz-card class="filter-card">
                        <div class="filter-card-header">
                          <span class="filter-name">
                            <span *ngIf="item.FILTER_NAME != null">
                              <span
                                *ngIf="item.FILTER_NAME.length >= 25"
                                nz-popover
                                [nzPopoverContent]="item.FILTER_NAME"
                                nzPopoverPlacement="topLeft"
                              >
                                {{ item.FILTER_NAME | slice : 0 : 25
                                }}{{
                                  item.FILTER_NAME.length > 25 ? "..." : ""
                                }}
                              </span>
                              <span *ngIf="item.FILTER_NAME.length < 25">
                                {{ item.FILTER_NAME }}
                              </span>
                            </span>
                            <span *ngIf="item.FILTER_NAME == null">-</span>
                          </span>
                          <i
                            *ngIf="selectedFilter === item.ID"
                            nz-icon
                            [nzType]="'check-circle'"
                            [nzTheme]="'twotone'"
                            [nzTwotoneColor]="'#52c41a'"
                            nz-tooltip
                            [nzTooltipTitle]="
                              'This filter is applied on current data'
                            "
                            class="filter-applied-icon"
                          ></i>
                        </div>
                        <div nz-row class="filter-actions-row">
                          <div nz-col nzSpan="24" class="filter-actions">
                            <nz-tag
                              nzColor="#2db7f5"
                              (click)="editQuery(item)"
                              class="filter-action-tag edit-tag"
                              nz-tooltip
                              nzTooltipTitle="Edit Filter"
                            >
                              <span
                                nz-icon
                                nzType="edit"
                                nzTheme="outline"
                                class="tag-icon"
                              >
                              </span
                              >&nbsp;&nbsp;Edit</nz-tag
                            >
                            <nz-tag
                              *ngIf="selectedFilter !== item.ID"
                              nzColor="#87d068"
                              (click)="applyfilter(item)"
                              class="filter-action-tag apply-tag"
                              nz-tooltip
                              nzTooltipTitle="Apply Filter"
                            >
                              <span
                                nz-icon
                                nzType="search"
                                nzTheme="outline"
                                class="tag-icon"
                              >
                              </span
                              >&nbsp;&nbsp;Apply</nz-tag
                            >
                            <nz-tag
                              *ngIf="selectedFilter === item.ID"
                              nzColor="#faad14"
                              (click)="Clearfilter()"
                              class="filter-action-tag clear-tag"
                              nz-tooltip
                              nzTooltipTitle="Clear this Filter"
                            >
                              <span
                                nz-icon
                                nzType="close"
                                nzTheme="outline"
                                class="tag-icon"
                              >
                              </span
                              >&nbsp;&nbsp;Clear</nz-tag
                            >
                            <nz-tag
                              nzColor="#cd201f"
                              nz-popconfirm
                              nzPopconfirmTitle="Are you sure to delete this record?"
                              nzPopconfirmPlacement="top"
                              (nzOnConfirm)="deleteItem(item)"
                              class="filter-action-tag delete-tag"
                              nz-tooltip
                              nzTooltipTitle="Delete Filter"
                            >
                              <span
                                nz-icon
                                nzType="delete"
                                nzTheme="outline"
                                class="tag-icon"
                              >
                              </span
                              >&nbsp;&nbsp;Delete</nz-tag
                            >
                            <nz-tag
                              nzColor="#3b5999"
                              class="filter-action-tag view-tag"
                              nz-tooltip
                              nzTooltipTitle="View Filter Text"
                              (click)="toggleLiveDemo(item)"
                            >
                              <span
                                nz-icon
                                nzType="eye"
                                nzTheme="outline"
                                class="tag-icon"
                              >
                              </span
                              >&nbsp;&nbsp;View</nz-tag
                            >
                          </div>
                        </div>
                      </nz-card>
                    </div>
                  </div>
                </ng-container>
              </ng-template>
              <ng-template #noData>
                <div class="no-filters-message">
                  No Previous Filters Are Found
                </div>
              </ng-template>
            </div>
            <div nz-col [nzSpan]="24" class="filter-buttons-container">
              <button
                *ngIf="savedFilters && savedFilters.length > 0"
                nz-button
                nzType="primary"
                nzSize="small"
                (click)="Clearfilter()"
                class="filter-button reset-filter-button"
              >
                <span nz-icon nzType="reload" nzTheme="outline"></span>
                Reset Filter
              </button>
              <button
                nz-button
                nzType="primary"
                nzSize="small"
                (click)="openfilter()"
                class="filter-button new-filter-button"
              >
                <span nz-icon nzType="plus"></span>
                New Filter
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div nz-row>
    <div nz-col nzSpan="24">
      <div nz-row class="status-container">
        <div
          nz-col
          nzXs="6"
          nzSm="6"
          nzMd="6"
          nzLg="6"
          nzXl="6"
          class="status-spacer"
        ></div>
        <div
          nz-col
          nzXs="4"
          nzSm="4"
          nzMd="4"
          nzLg="4"
          nzXl="4"
          class="status-column"
          (click)="selectStatus('P')"
        >
          <div class="status-wrapper">
            <div nz-row>
              <div
                nz-col
                nzSpan="18"
                *ngIf="VERIFIED_STATUS == 'P'"
                class="status-label active-status-label"
              >
                <span><b>Pending</b></span>
              </div>
              <div
                nz-col
                nzSpan="18"
                *ngIf="VERIFIED_STATUS != 'P'"
                class="status-label inactive-status-label"
              >
                <span>Pending</span>
              </div>
              <div
                nz-col
                nzSpan="6"
                *ngIf="VERIFIED_STATUS == 'P'"
                class="status-count active-status-count"
              >
                <span class="active-count-text"
                  ><b>{{ pendingCount }}</b></span
                >
              </div>
              <div
                nz-col
                nzSpan="6"
                *ngIf="VERIFIED_STATUS != 'P'"
                class="status-count inactive-status-count"
              >
                <span>{{ pendingCount }}</span>
              </div>
            </div>
          </div>
        </div>
        <div
          nz-col
          nzXs="4"
          nzSm="4"
          nzMd="4"
          nzLg="4"
          nzXl="4"
          class="status-column"
          (click)="selectStatus('A')"
        >
          <div class="status-wrapper">
            <div nz-row>
              <div
                nz-col
                nzSpan="18"
                *ngIf="VERIFIED_STATUS == 'A'"
                class="status-label active-status-label"
              >
                <span><b>Approved</b></span>
              </div>
              <div
                nz-col
                nzSpan="18"
                *ngIf="VERIFIED_STATUS != 'A'"
                class="status-label inactive-status-label"
              >
                <span>Approved</span>
              </div>
              <div
                nz-col
                nzSpan="6"
                *ngIf="VERIFIED_STATUS == 'A'"
                class="status-count active-status-count"
              >
                <span class="active-count-text"
                  ><b>{{ approvedCount }}</b></span
                >
              </div>
              <div
                nz-col
                nzSpan="6"
                *ngIf="VERIFIED_STATUS != 'A'"
                class="status-count inactive-status-count"
              >
                <span>{{ approvedCount }}</span>
              </div>
            </div>
          </div>
        </div>
        <div
          nz-col
          nzXs="4"
          nzSm="4"
          nzMd="4"
          nzLg="4"
          nzXl="4"
          class="status-column"
          (click)="selectStatus('R')"
        >
          <div class="status-wrapper">
            <div nz-row>
              <div
                nz-col
                nzSpan="18"
                *ngIf="VERIFIED_STATUS == 'R'"
                class="status-label active-status-label"
              >
                <span><b>Rejected</b></span>
              </div>
              <div
                nz-col
                nzSpan="18"
                *ngIf="VERIFIED_STATUS != 'R'"
                class="status-label inactive-status-label"
              >
                <span>Rejected</span>
              </div>
              <div
                nz-col
                nzSpan="6"
                *ngIf="VERIFIED_STATUS == 'R'"
                class="status-count active-status-count"
              >
                <span class="active-count-text"
                  ><b>{{ rejectedCount }}</b></span
                >
              </div>
              <div
                nz-col
                nzSpan="6"
                *ngIf="VERIFIED_STATUS != 'R'"
                class="status-count inactive-status-count"
              >
                <span>{{ rejectedCount }}</span>
              </div>
            </div>
          </div>
        </div>
        <div
          nz-col
          nzXs="6"
          nzSm="6"
          nzMd="6"
          nzLg="6"
          nzXl="6"
          class="status-spacer"
        ></div>
      </div>
    </div>
  </div>
  <div nz-row class="table-row">
    <div nz-col nzSpan="24">
      <nz-table
        class="my-scroll no-wrap1 skill-verification-table wpPr"
        nzBordered
        #organizationTable
        nzShowSizeChanger
        [nzFrontPagination]="false"
        [nzData]="dataList"
        [nzLoading]="loadingRecords"
        [nzTotal]="totalRecords"
        [(nzPageIndex)]="pageIndex"
        [nzSize]="'small'"
        [nzScroll]="{ y: '50vh' }"
        [(nzPageSize)]="pageSize"
        (nzPageIndexChange)="search()"
        (nzPageSizeChange)="search(true)"
        (nzQueryParams)="sort($event)"
      >
        <thead nzSingleSort>
          <tr>
            <th
              nzLeft
              nzWidth="120px"
              class="action-column-header"
              *ngIf="VERIFIED_STATUS == 'P'"
            >
              Action
            </th>
            <th
              nzLeft
              nzWidth="160px"
              class="table-header"
              nzColumnKey="REQUESTED_DATETIME"
              [nzFilterFn]="true"
              nzCustomFilter
              [nzSortFn]="true"
            >
              Request Date
              <nz-filter-trigger
                [(nzVisible)]="submittedDateVisible"
                [nzDropdownMenu]="submittedDatedropdown"
              >
                <span
                  nz-icon
                  nzType="filter"
                  nzTheme="fill"
                  [ngStyle]="{
                    color: isSubmittedDateFilterApplied ? '#092B9C' : 'inherit'
                  }"
                ></span>
              </nz-filter-trigger>
            </th>
            <th
              nzLeft
              *ngIf="VERIFIED_STATUS == 'R' || VERIFIED_STATUS == 'A'"
              nzWidth="220px"
              class="table-header"
              nzColumnKey="ACTION_DATE_TIME"
              [nzFilterFn]="true"
              nzCustomFilter
              [nzSortFn]="true"
            >
              Verification DateTime
              <nz-filter-trigger
                [(nzVisible)]="approvedDateVisible"
                [nzDropdownMenu]="approvedDatedropdown"
              >
                <span
                  nz-icon
                  nzType="filter"
                  nzTheme="fill"
                  [ngStyle]="{
                    color: isapprovedDateFilterApplied ? '#092B9C' : 'inherit'
                  }"
                ></span>
              </nz-filter-trigger>
            </th>
            <th
              *ngIf="VERIFIED_STATUS == 'R' || VERIFIED_STATUS == 'A'"
              nzWidth="300px"
              class="table-header"
              nzColumnKey="APPROVED_BY"
              [nzSortFn]="true"
              [nzFilterFn]="true"
              nzCustomFilter
            >
              Approved By
              <nz-filter-trigger
                [(nzVisible)]="approvedvisible"
                [nzDropdownMenu]="approveddropdown"
              >
                <span
                  nz-icon
                  nzType="filter"
                  nzTheme="fill"
                  [ngStyle]="{
                    color: isapprovedFilterApplied ? '#092B9C' : 'inherit'
                  }"
                ></span>
              </nz-filter-trigger>
            </th>
            <th
              *ngIf="isColumnVisible('TECHNICIAN_NAME')"
              nzWidth="300px"
              class="table-header"
              nzColumnKey="TECHNICIAN_NAME"
              [nzSortFn]="true"
              [nzFilterFn]="true"
              nzCustomFilter
            >
              Technician Name
              <nz-filter-trigger
                [(nzVisible)]="technamevisible"
                [nzDropdownMenu]="technamedropdown"
              >
                <span
                  nz-icon
                  nzType="filter"
                  nzTheme="fill"
                  [ngStyle]="{
                    color: istechnmFilterApplied ? '#092B9C' : 'inherit'
                  }"
                ></span>
              </nz-filter-trigger>
            </th>
            <th
              *ngIf="isColumnVisible('SKILL_NAME')"
              nzWidth="300px"
              class="table-header"
              nzColumnKey="SKILL_NAME"
              [nzSortFn]="true"
              [nzFilterFn]="true"
              nzCustomFilter
            >
              Skill Name
              <nz-filter-trigger
                [(nzVisible)]="customernamevisible"
                [nzDropdownMenu]="customernamedropdown"
              >
                <span
                  nz-icon
                  nzType="filter"
                  nzTheme="fill"
                  [ngStyle]="{
                    color: iscustnmFilterApplied ? '#092B9C' : 'inherit'
                  }"
                ></span>
              </nz-filter-trigger>
            </th>
            <th
              *ngIf="VERIFIED_STATUS == 'R'"
              nzWidth="300px"
              class="table-header"
              [nzFilterFn]="true"
              nzCustomFilter
              [nzSortFn]="true"
              nzColumnKey="REJECTED_REMARK"
            >
              Remark
              <nz-filter-trigger
                [(nzVisible)]="remarkvisible"
                [nzDropdownMenu]="remarkdropdown"
              >
                <span
                  nz-icon
                  nzType="filter"
                  nzTheme="fill"
                  [ngStyle]="{
                    color: isremarkFilterApplied ? '#092B9C' : 'inherit'
                  }"
                ></span>
              </nz-filter-trigger>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let data of organizationTable.data">
            <td nzLeft class="action-cell" *ngIf="VERIFIED_STATUS == 'P'">
              <nz-tag
                class="action-tag approve-tag"
                (click)="opencancelmodal(data, 'A')"
                [nzColor]="'green'"
                *ngIf="VERIFIED_STATUS == 'P'"
                >Approve</nz-tag
              >&nbsp;&nbsp;
              <nz-tag
                class="action-tag reject-tag"
                (click)="opencancelmodal(data, 'R')"
                [nzColor]="'red'"
                *ngIf="VERIFIED_STATUS == 'P'"
                >Reject</nz-tag
              >
            </td>
            <td nzLeft class="date-cell">
              {{ data.REQUESTED_DATETIME | date : "dd/MM/yyyy HH:mm a" }}
            </td>
            <td
              nzLeft
              class="date-cell"
              *ngIf="VERIFIED_STATUS == 'R' || VERIFIED_STATUS == 'A'"
            >
              {{ data.ACTION_DATE_TIME | date : "dd/MM/yyyy HH:mm a" }}
            </td>
            <td
              align="left"
              [nzTooltipTitle]="isTextOverflow ? data['APPROVED_BY'] : null"
              #tooltipRef1="nzTooltip"
              nz-tooltip
              *ngIf="VERIFIED_STATUS == 'R' || VERIFIED_STATUS == 'A'"
              class="approver-cell"
            >
              <div
                #textContainer1
                class="truncate-text"
                (mouseenter)="checkOverflow(textContainer1, tooltipRef1)"
              >
                {{ data["APPROVED_BY"] ? data["APPROVED_BY"] : "-" }}
              </div>
            </td>
            <td align="left" class="technician-cell">
              <span *ngIf="data['TECHNICIAN_NAME'] != null">
                <span
                  *ngIf="
                    data['TECHNICIAN_NAME'].length >=
                    (VERIFIED_STATUS === 'P' ? 50 : 30)
                  "
                  nz-popover
                  [nzPopoverContent]="data['TECHNICIAN_NAME']"
                  nzPopoverPlacement="topLeft"
                >
                  {{
                    data["TECHNICIAN_NAME"]
                      | slice : 0 : (VERIFIED_STATUS === "P" ? 50 : 30)
                  }}{{
                    data["TECHNICIAN_NAME"].length >
                    (VERIFIED_STATUS === "P" ? 50 : 30)
                      ? "..."
                      : ""
                  }}
                </span>
                <span
                  *ngIf="
                    data['TECHNICIAN_NAME'].length <
                    (VERIFIED_STATUS === 'P' ? 50 : 30)
                  "
                >
                  {{
                    data["TECHNICIAN_NAME"]
                      | slice : 0 : (VERIFIED_STATUS === "P" ? 50 : 30)
                  }}
                </span>
              </span>
              <span *ngIf="data['TECHNICIAN_NAME'] == null">-</span>
            </td>
            <td align="left" class="skill-cell">
              <span *ngIf="data['SKILL_NAME'] != null">
                <span
                  *ngIf="
                    data['SKILL_NAME'].length >=
                    (VERIFIED_STATUS === 'P' ? 60 : 30)
                  "
                  nz-popover
                  [nzPopoverContent]="data['SKILL_NAME']"
                  nzPopoverPlacement="topLeft"
                >
                  {{
                    data["SKILL_NAME"]
                      | slice : 0 : (VERIFIED_STATUS === "P" ? 60 : 30)
                  }}{{
                    data["SKILL_NAME"].length >
                    (VERIFIED_STATUS === "P" ? 60 : 30)
                      ? "..."
                      : ""
                  }}
                </span>
                <span
                  *ngIf="
                    data['SKILL_NAME'].length <
                    (VERIFIED_STATUS === 'P' ? 60 : 30)
                  "
                >
                  {{
                    data["SKILL_NAME"]
                      | slice : 0 : (VERIFIED_STATUS === "P" ? 60 : 30)
                  }}
                </span>
              </span>
              <span *ngIf="data['SKILL_NAME'] == null">-</span>
            </td>
            <td
              align="left"
              [nzTooltipTitle]="isTextOverflow ? data['REJECTED_REMARK'] : null"
              #tooltipRef2="nzTooltip"
              nz-tooltip
              *ngIf="VERIFIED_STATUS == 'R'"
              class="remark-cell"
            >
              <div
                #textContainer2
                class="truncate-text"
                (mouseenter)="checkOverflow(textContainer2, tooltipRef2)"
              >
                {{ data["REJECTED_REMARK"] ? data["REJECTED_REMARK"] : "-" }}
              </div>
            </td>
          </tr>
        </tbody>
      </nz-table>
      <nz-dropdown-menu #submittedDatedropdown="nzDropdownMenu">
        <div class="ant-table-filter-dropdown">
          <div class="search-box">
            <nz-range-picker
              [(ngModel)]="StartDate"
              name="StartDate"
              class="date-range-picker"
              [nzFormat]="commonFunction.dateFormatMMM"
              (ngModelChange)="onDateRangeChange()"
            >
            </nz-range-picker>
          </div>
        </div>
      </nz-dropdown-menu>
      <nz-dropdown-menu #approvedDatedropdown="nzDropdownMenu">
        <div class="ant-table-filter-dropdown">
          <div class="search-box">
            <nz-range-picker
              [(ngModel)]="approvedDate"
              name="approvedDate"
              class="date-range-picker"
              [nzFormat]="commonFunction.dateFormatMMM"
              (ngModelChange)="onApprovedDateRangeChange()"
            >
            </nz-range-picker>
          </div>
        </div>
      </nz-dropdown-menu>
      <nz-dropdown-menu #ordernodropdown="nzDropdownMenu">
        <div class="ant-table-filter-dropdown">
          <div class="search-box">
            <nz-input-group [nzSuffix]="inputClearTpl">
              <input
                type="text"
                nz-input
                [(ngModel)]="orderrno"
                (keyup)="onKeyup($event, 'OR_NO')"
                (onkeypress)="search()"
                placeholder="Search Order No."
                class="filter-search-input"
              />
            </nz-input-group>
            <ng-template #inputClearTpl>
              <span
                nz-icon
                class="ant-input-clear-icon"
                nzTheme="fill"
                nzType="close-circle"
                *ngIf="orderrno"
                (click)="reset()"
              ></span>
              <span
                nz-icon
                nzType="search"
                nzTheme="outline"
                *ngIf="orderrno == ''"
              ></span>
            </ng-template>
          </div>
        </div>
      </nz-dropdown-menu>
      <nz-dropdown-menu #approveddropdown="nzDropdownMenu">
        <div class="ant-table-filter-dropdown">
          <div class="search-box">
            <nz-input-group [nzSuffix]="inputClearTpl">
              <input
                type="text"
                nz-input
                [(ngModel)]="approvedby"
                (keyup)="onKeyup($event, 'APB')"
                (onkeypress)="search()"
                placeholder="Search Approved By"
                class="filter-search-input"
              />
            </nz-input-group>
            <ng-template #inputClearTpl>
              <span
                nz-icon
                class="ant-input-clear-icon"
                nzTheme="fill"
                nzType="close-circle"
                *ngIf="approvedby"
                (click)="reset()"
              ></span>
              <span
                nz-icon
                nzType="search"
                nzTheme="outline"
                *ngIf="approvedby == ''"
              ></span>
            </ng-template>
          </div>
        </div>
      </nz-dropdown-menu>
      <nz-dropdown-menu #technamedropdown="nzDropdownMenu">
        <div class="ant-table-filter-dropdown">
          <div class="search-box">
            <nz-input-group [nzSuffix]="inputClearTpl">
              <input
                type="text"
                nz-input
                [(ngModel)]="techname"
                (keyup)="onKeyup($event, 'TECH')"
                (onkeypress)="search()"
                placeholder="Search Technician Name"
                class="filter-search-input"
              />
            </nz-input-group>
            <ng-template #inputClearTpl>
              <span
                nz-icon
                class="ant-input-clear-icon"
                nzTheme="fill"
                nzType="close-circle"
                *ngIf="techname"
                (click)="reset()"
              ></span>
              <span
                nz-icon
                nzType="search"
                nzTheme="outline"
                *ngIf="techname == ''"
              ></span>
            </ng-template>
          </div>
        </div>
      </nz-dropdown-menu>
      <nz-dropdown-menu #customernamedropdown="nzDropdownMenu">
        <div class="ant-table-filter-dropdown">
          <div class="search-box">
            <nz-input-group [nzSuffix]="inputClearTpl">
              <input
                type="text"
                nz-input
                [(ngModel)]="customername"
                (keyup)="onKeyup($event, 'CR_N')"
                (onkeypress)="search()"
                placeholder="Search Skill Name"
                class="filter-search-input"
              />
            </nz-input-group>
            <ng-template #inputClearTpl>
              <span
                nz-icon
                class="ant-input-clear-icon"
                nzTheme="fill"
                nzType="close-circle"
                *ngIf="customername"
                (click)="reset()"
              ></span>
              <span
                nz-icon
                nzType="search"
                nzTheme="outline"
                *ngIf="customername == ''"
              ></span>
            </ng-template>
          </div>
        </div>
      </nz-dropdown-menu>
      <nz-dropdown-menu #remarkdropdown="nzDropdownMenu">
        <div class="ant-table-filter-dropdown">
          <div class="search-box">
            <nz-input-group [nzSuffix]="inputClearTpl">
              <input
                type="text"
                nz-input
                [(ngModel)]="remark"
                (keyup)="onKeyup($event, 'REM')"
                (onkeypress)="search()"
                placeholder="Search Remark"
                class="filter-search-input"
              />
            </nz-input-group>
            <ng-template #inputClearTpl>
              <span
                nz-icon
                class="ant-input-clear-icon"
                nzTheme="fill"
                nzType="close-circle"
                *ngIf="remark"
                (click)="reset()"
              ></span>
              <span
                nz-icon
                nzType="search"
                nzTheme="outline"
                *ngIf="remark == ''"
              ></span>
            </ng-template>
          </div>
        </div>
      </nz-dropdown-menu>
    </div>
  </div>
</div>
<nz-dropdown-menu #showcolumn1="nzDropdownMenu">
  <ul nz-menu nzPlacement="bottomRight">
    <li nz-menu-item *ngFor="let column of showcolumn">
      <label
        nz-checkbox
        [(ngModel)]="column.visible"
        (ngModelChange)="isColumnVisible(column)"
      >
        {{ column.label }}
      </label>
    </li>
  </ul>
</nz-dropdown-menu>
<div *ngIf="drawerFilterVisible">
  <nz-drawer
    [nzBodyStyle]="{
      height: 'calc(100% - 55px)',
      overflow: 'auto',
      'padding-bottom': '53px'
    }"
    [nzClosable]="true"
    [nzMask]="true"
    [nzMaskClosable]="false"
    [nzWidth]="'70%'"
    [nzVisible]="drawerFilterVisible"
    [nzTitle]="drawerTitle"
    (nzOnClose)="drawerfilterClose('buttontype', 'updateButton')"
    (nzKeyboard)="(true)"
    [nzPlacement]="'right'"
  >
    <ng-container *nzDrawerContent>
      <app-main-filter
        [filterGroups]="filterGroups"
        [filterGroups2]="filterGroups2"
        [name]="FILTER_NAME"
        [data]="EditQueryData"
        [drawerClose]="closefilterCallback"
        [fields]="filterFields"
        [TabId]="TabId"
        [editButton]="editButton"
        (filterApplied)="onFilterApplied($event)"
        [filterData]="filterData"
      >
      </app-main-filter
      >`
    </ng-container>
  </nz-drawer>
</div>
<nz-modal
  [(nzVisible)]="isModalVisible"
  [nzTitle]="'Filter Text'"
  [nzFooter]="null"
  (nzOnCancel)="handleCancel()"
  class="filter-text-modal"
  ><ng-container *nzModalContent>
    <h6 class="filter-text-content">{{ selectedQuery }}</h6>
  </ng-container>
</nz-modal>
<nz-modal
  [(nzVisible)]="openmodell"
  nzCentered="true"
  [nzBodyStyle]="{ padding: '16px' }"
  nzWidth="412px"
  nzClosable="false"
  [nzFooter]="contextofrulesss"
  nzMaskClosable="false"
  class="action-confirmation-modal"
>
  <ng-container *nzModalContent>
    <span *ngIf="action == 'A'" class="confirmation-text approve-text"
      >Are you sure, you want to approve the request?</span
    >
    <span *ngIf="action == 'R'" class="confirmation-text reject-text"
      >Are you sure, you want to reject the request?</span
    >
    <div nz-col nzSpan="24">
      <nz-form-item class="remark-form-item">
        <nz-form-label nzNoColon nzRequired class="remark-label"
          >Remark</nz-form-label
        >
        <nz-form-control>
          <textarea
            nz-input
            rows="3"
            name="description"
            placeholder="Remark"
            [(ngModel)]="rejectreason"
            maxlength="256"
            class="remark-textarea"
          ></textarea>
          <h6 class="character-count" *ngIf="rejectreason">
            {{ rejectreason?.length || 0 }}/256
          </h6>
        </nz-form-control>
      </nz-form-item>
    </div>
  </ng-container>
  <ng-template #contextofrulesss>
    <button
      nz-button
      [nzLoading]="isspinnnnnnn"
      nzType="primary"
      class="modal-button confirm-button"
      (click)="appreorder(cancelorderdata, action)"
    >
      Yes
    </button>
    <button
      nz-button
      [nzLoading]="isspinnnnnnn"
      nzType="default"
      class="modal-button cancel-button"
      (click)="simplecancel()"
    >
      No
    </button>
  </ng-template>
</nz-modal>
