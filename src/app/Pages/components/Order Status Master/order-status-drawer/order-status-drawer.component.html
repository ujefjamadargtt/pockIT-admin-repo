<div>
  <form nz-form #OrderStatusmaster="ngForm">
    <div nz-row>
      <div nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="24" nzXl="24">
        <nz-form-item>
          <nz-form-label nzRequired nzNoColon>Status Title</nz-form-label>
          <nz-form-control nzHasFeedback nzErrorTip="Enter Status Title">
            <input nz-input name="name" placeholder="Enter Status Title" required [(ngModel)]="data.NAME"
              autocomplete="off" #statusTitleField="ngModel" (focus)="isFocused = 'statusTitle'" (blur)="isFocused = ''"
              (keypress)="commonFunction.alphaOnly($event)" maxlength="32" />
            <h6 class="form-counter-error" *ngIf="
          isFocused === 'statusTitle' ||
          (data.NAME != undefined && data.NAME != null && data.NAME != '' && isFocused === 'statusTitle')
        ">
              {{ data.NAME.length || 0 }}/32
            </h6>
          </nz-form-control>
        </nz-form-item>
      </div>
    </div>
    <div nz-row>
      <div nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="24" nzXl="24">
        <nz-form-item>
          <nz-form-label nzNoColon>Description</nz-form-label>
          <nz-form-control>
            <textarea nz-input name="desc" placeholder="Enter Description" [(ngModel)]="data.DESCRIPTION"
              #descriptionField="ngModel" [nzAutosize]="{ minRows: 2, maxRows: 5 }" (focus)="isFocused = 'description'"
              (blur)="isFocused = ''" (keypress)="commonFunction.allowOnly($event)" class="textarea-full-width"
              maxlength="512"></textarea>
            <h6 class="form-counter-error" *ngIf="
                isFocused === 'description' ||
                (data.DESCRIPTION != undefined && data.DESCRIPTION != null && data.DESCRIPTION != '' && isFocused === 'description')
              ">
              {{ data.DESCRIPTION.length || 0 }}/512
            </h6>
          </nz-form-control>
        </nz-form-item>
      </div>
    </div>
    <div nz-row>
      <div nz-col nzSpan="18">
        <nz-form-item>
          <nz-form-label nzRequired nzNoColon>Order Status Icon
            &nbsp; <span><i nz-icon nzType="info-circle" nzTheme="twotone" nzTooltipTitle="Please select an image file (PNG, JPG, JPEG) with a size up to
              1MB." nzTooltipPlacement="top" nz-tooltip>
              </i>
            </span>
          </nz-form-label>
          <nz-form-control nzHasFeedback nzErrorTip="Select Order Status Icon">
            <button *ngIf="data.ICON == ' ' || data.ICON == null" nz-button class="upload-icon-btn"
              (click)="icon.click()">
              Upload Icon
              <input #icon name="icon" type="file" accept=".png, .jpg, .jpeg" (change)="onFileSelected($event)"
                class="hidden-file-input" maxlength="32" />
            </button>
            <div *ngIf="data.ICON != null && data.ICON != undefined && data.ICON != ' '" class="icon-preview-wrapper">
              <span>
                <span *ngIf="data['ICON'] != null">
                  <span *ngIf="data['ICON'].length >= 36" nz-popover [nzPopoverContent]="data['ICON']"
                    nzPopoverPlacement="topLeft">
                    {{
                    data["ICON"] == null
                    ? "-"
                    : (data["ICON"] | slice : 0 : 36)
                    }}{{ data["ICON"].length > 36 ? "..." : "" }}
                  </span>
                  <span *ngIf="data['ICON'].length < 36">
                    {{
                    data["ICON"] == null
                    ? "-"
                    : (data["ICON"] | slice : 0 : 36)
                    }}
                    {{ data["ICON"].length > 36 ? "..." : "" }}
                  </span>
                </span>
              </span>
              <a class="view-icon-link" (click)="viewImage(data.ICON)" nz-tooltip
                nzTooltipTitle="Click Here To View Uploaded Order Status Icon">
                <span nz-icon nzType="eye" nzTheme="outline"></span>
              </a>
              <span *ngIf="data.ID">
                <span class="icon-delete-wrapper" nz-popconfirm
                  nzPopconfirmTitle="Are you sure want delete Order Status Icon?" nzPopconfirmPlacement="top"
                  (nzOnConfirm)="IconDeleteConfirm(data)" (nzOnCancel)="deleteCancel()">
                  <span nz-icon nzType="delete" nzTheme="twotone" [nzTwotoneColor]="'#FF0000'" nz-tooltip
                    nzTooltipTitle="Delete"></span>
                </span>
              </span>
              <span *ngIf="!data.ID">
                <span class="icon-delete-wrapper with-left-gap" nz-popconfirm
                  nzPopconfirmTitle="Are you sure want Delete?" nzPopconfirmPlacement="top"
                  (nzOnConfirm)="removeImage()" (nzOnCancel)="deleteCancel()">
                  <span nz-icon nzType="delete" nzTheme="twotone" [nzTwotoneColor]="'#FF0000'" nz-tooltip
                    nzTooltipTitle="Delete"></span>
                </span>
              </span>
            </div>
          </nz-form-control>
        </nz-form-item>
      </div>
      <div nz-col nzSpan="6">
        <nz-form-item>
          <nz-form-label nzNoColon>Status</nz-form-label>
          <nz-form-control>
            <nz-switch name="status" [nzDisabled]="data.ID ? true : false" nzCheckedChildren="Active"
              nzUnCheckedChildren="Inactive" [(ngModel)]="data.IS_ACTIVE"></nz-switch>
          </nz-form-control>
        </nz-form-item>
      </div>
    </div>
  </form>
</div>
<div class="footer">
  <button nz-button nzType="default" (click)="close()" class="ant-btn footer-cancel-btn">
    Cancel
  </button>
  <button nz-button *ngIf="!data.ID" nzType="primary" nz-dropdown [nzDropdownMenu]="menu" [nzLoading]="isSpinning"
    (click)="save(false, OrderStatusmaster)" class="ant-btn ant-btn-primary">
    Save & Close
  </button>
  <nz-dropdown-menu #menu="nzDropdownMenu">
    <ul nz-menu>
      <li nz-menu-item class="menuc footer-menu-item">
        <a class="footer-button footer-menu-link" (click)="save(true, OrderStatusmaster)">
          Save & New
        </a>
      </li>
    </ul>
  </nz-dropdown-menu>
  <button type="button" class="ant-btn ant-btn-primary" nz-button [nzLoading]="isSpinning" *ngIf="data.ID"
    (click)="save(false, OrderStatusmaster)">
    <span>Update & Close</span>
  </button>
  <nz-modal [nzWidth]="500" [(nzVisible)]="ImageModalVisible" nzMaskClosable="false" nzClosable="false"
    [nzContent]="content" [nzTitle]="'Icon View'" (nzOnCancel)="ImageModalCancel()" [nzFooter]="ImageModalFooter">
    <ng-template #content>
      <nz-spin [nzSpinning]="isSpinning">
        <div *ngIf="
            imageshow != undefined &&
            imageshow != null &&
            imageshow != '' &&
            (fileURL == undefined || fileURL == null || fileURL == '')
          " class="image-preview-container">
          <img src="{{ imageshow }}" alt="Preview" class="image-preview-img" />
        </div>
        <div *ngIf="fileURL != undefined && fileURL != null && fileURL != ''" class="image-preview-container">
          <img [src]="imagePreview" alt="Preview" class="image-preview-img" />
        </div>
      </nz-spin>
    </ng-template>
    <ng-template #ImageModalFooter>
      <button nz-button nzType="default" (click)="ImageModalCancel()">Close</button>
    </ng-template>
  </nz-modal>
</div>