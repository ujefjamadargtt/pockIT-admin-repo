<div>
  <form nz-form #accountMasterPage="ngForm">
    <nz-spin [nzSpinning]="isSpinning">
      <div class="hh">
        <div class="my-box form-container">
          <div nz-row>
            <nz-form-item>
              <nz-form-label class="form-label-margin" nzNoColon nzRequired>
                Select Location </nz-form-label><i nz-tooltip nzTooltipTitle="Select Location" nz-icon
                class="location-icon" (click)="openmapModal()"><img src="assets/loc.png" class="location-img" /></i>
            </nz-form-item>
          </div>
          <div nz-row>
            <div nz-col nzSpan="12">
              <nz-form-item>
                <nz-form-control>
                  <input nz-input name="latitudes" placeholder="Enter Latitude" [(ngModel)]="latitude"
                    (keypress)="commonFunction.numberWithDecimal($event)" />
                </nz-form-control>
              </nz-form-item>
            </div>
            <div nz-col nzSpan="12">
              <nz-form-item>
                <nz-form-control>
                  <input nz-input name="longitudes" placeholder="Enter Longitude" [(ngModel)]="longitude"
                    (keypress)="commonFunction.numberWithDecimal($event)" />
                </nz-form-control>
              </nz-form-item>
            </div>
          </div>
          <div nz-row>
            <div nz-col nzSpan="10">
              <nz-form-item>
                <nz-form-label nzRequired nzNoColon>Address Type</nz-form-label>
                <nz-form-control nzHasFeedback nzErrorTip="Please Select Address Type">
                  <nz-select nzPlaceHolder="Select Type" [(ngModel)]="data.TYPE" name="Type" autocomplete="off"
                    autofill="off" required nzAllowClear>
                    <nz-option nzValue="H" nzLabel="Home"></nz-option>
                    <nz-option nzValue="F" nzLabel="Office"></nz-option>
                    <nz-option nzValue="O" nzLabel="Other"></nz-option>
                  </nz-select>
                </nz-form-control>
              </nz-form-item>
            </div>
            <div nz-col nzSpan="14">
              <nz-form-item>
                <nz-form-label nzRequired nzNoColon>House No./Flat No./Floor No.</nz-form-label>
                <nz-form-control nzErrorTip="Enter House No./Flat No./Floor No.">
                  <input nz-input name="hpuseno" autocomplete="off" placeholder="House No./Flat No./Floor No."
                    maxlength="128" required="required" [(ngModel)]="data.ADDRESS_LINE_1"
                    (focus)="isFocused = 'ADDRESS_LINE_1'" (blur)="isFocused = ''" />
                  <small class="character-count" *ngIf="
                      isFocused === 'ADDRESS_LINE_1' ||
                      (data.ADDRESS_LINE_1 && isFocused === 'ADDRESS_LINE_1')
                    ">{{ data.ADDRESS_LINE_1.length }}/128</small>
                </nz-form-control>
              </nz-form-item>
            </div>
          </div>
          <div nz-row>
            <div nz-col nzSpan="24">
              <nz-form-item>
                <nz-form-label nzRequired nzNoColon>Building Name / Area Name</nz-form-label>
                <nz-form-control>
                  <input nz-input name="Buildingn" autocomplete="off" placeholder="Enter Building Name" maxlength="128"
                    [(ngModel)]="data.ADDRESS_LINE_2" (focus)="isFocused = 'ADDRESS_LINE_2'" (blur)="isFocused = ''" />
                  <small class="character-count" *ngIf="
                      isFocused === 'ADDRESS_LINE_2' ||
                      (data.ADDRESS_LINE_2 && isFocused === 'ADDRESS_LINE_2')
                    ">{{ data.ADDRESS_LINE_2?.length }}/128</small>
                </nz-form-control>
              </nz-form-item>
            </div>
          </div>
          <div nz-row>
            <div nz-col nzSpan="24">
              <nz-form-item>
                <nz-form-label nzNoColon>Landmark </nz-form-label>
                <nz-form-control>
                  <input nz-input name="landmark" autocomplete="off" placeholder="Enter Landmark" maxlength="256"
                    [(ngModel)]="data.LANDMARK" (focus)="isFocused = 'LANDMARK'" (blur)="isFocused = ''" />
                  <small class="character-count" *ngIf="
                      isFocused === 'LANDMARK' ||
                      (data.LANDMARK && isFocused === 'LANDMARK')
                    ">{{ data.LANDMARK?.length }}/256</small>
                </nz-form-control>
              </nz-form-item>
            </div>
          </div>
          <div nz-row>
            <div nz-col nzSpan="12">
              <nz-form-item>
                <nz-form-label nzRequired nzNoColon>Country</nz-form-label>
                <nz-form-control nzHasFeedback nzErrorTip="Select Country Name">
                  <nz-select name="countryId" nzPlaceHolder="Select Country Name" nzShowSearch class="full-width-select"
                    [(ngModel)]="data.COUNTRY_ID" [ngModelOptions]="{ standalone: true }"
                    (ngModelChange)="getStatesByCountry(data.COUNTRY_ID, true)" required nzAllowClear="">
                    <nz-option *ngFor="let data of CountryData" [nzValue]="data.ID" [nzLabel]="data.NAME">
                    </nz-option>
                  </nz-select>
                </nz-form-control>
              </nz-form-item>
            </div>
            <div nz-col nzSpan="12">
              <nz-form-item>
                <nz-form-label nzRequired nzNoColon>State</nz-form-label>
                <nz-form-control nzHasFeedback nzErrorTip="Select State Name">
                  <nz-select name="stateId" nzPlaceHolder="Select State Name" nzShowSearch class="full-width-select"
                    [(ngModel)]="data.STATE_ID" [ngModelOptions]="{ standalone: true }"
                    (ngModelChange)="getDistrictByState(data.STATE_ID, true)" required nzAllowClear=""
                    [nzLoading]="isStateSpinning">
                    <nz-option *ngFor="let data of StateData" [nzValue]="data.ID" [nzLabel]="data.NAME">
                    </nz-option>
                  </nz-select>
                </nz-form-control>
              </nz-form-item>
            </div>
          </div>
          <div nz-row>
            <div nz-col nzSpan="12">
              <nz-form-item>
                <nz-form-label nzRequired nzNoColon>District</nz-form-label>
                <nz-form-control nzHasFeedback nzErrorTip="Select District Name">
                  <nz-select name="DistrictId" nzPlaceHolder="Select District Name" nzShowSearch
                    class="full-width-select" [(ngModel)]="data.DISTRICT_ID" [ngModelOptions]="{ standalone: true }"
                    (ngModelChange)="getStateandPincode(data.DISTRICT_ID, true)" required nzAllowClear=""
                    [nzLoading]="isDistrictSpinning">
                    <nz-option *ngFor="let data of DistrictData" [nzValue]="data.ID" [nzLabel]="data.NAME">
                    </nz-option>
                  </nz-select>
                </nz-form-control>
              </nz-form-item>
            </div>
            <div nz-col nzSpan="12">
              <nz-form-item>
                <nz-form-label nzRequired nzNoColon>City</nz-form-label>
                <nz-form-control nzHasFeedback nzErrorTip="Please Select City">
                  <input nz-input name="cityname" autocomplete="off" required placeholder="Enter City" maxlength="128"
                    [(ngModel)]="data.CITY_NAME" (focus)="isFocused = 'CITY_NAME'" (blur)="isFocused = ''" />
                  <small class="character-count" *ngIf="
                      isFocused === 'CITY_NAME' ||
                      (data.CITY_NAME && isFocused === 'CITY_NAME')
                    ">
                    {{ data.CITY_NAME ? data.CITY_NAME.length : 0 }}/128
                  </small>
                </nz-form-control>
              </nz-form-item>
            </div>
          </div>
          <div nz-row>
            <div nz-col nzSpan="12">
              <nz-form-item>
                <nz-form-label nzRequired nzNoColon>Pincode </nz-form-label>
                <nz-form-control nzHasFeedback nzErrorTip="Select Pincode ">
                  <nz-select name="pincode" nzPlaceHolder="Select Pincode" nzShowSearch class="full-width-select"
                    [(ngModel)]="data.PINCODE_ID" [ngModelOptions]="{ standalone: true }"
                    (ngModelChange)="getpincodename($event)" required nzAllowClear="" [nzLoading]="isPincodeSpinning">
                    <nz-option *ngFor="let data of PincodeData" [nzValue]="data.ID" [nzLabel]="data.PINCODE_NUMBER">
                    </nz-option>
                  </nz-select>
                </nz-form-control>
              </nz-form-item>
            </div>
          </div>
          <div nz-row>
            <div nz-col nzSpan="12">
              <nz-form-item>
                {{ customerAddData.CUSTOMER_TYPE }}
                <nz-form-label nzRequired nzNoColon>Contact Person Name</nz-form-label>
                <nz-form-control nzHasFeedback nzErrorTip="Enter Contact Person Name">
                  <input nz-input name="Personname" autocomplete="off" placeholder="Enter Contact Person Name"
                    maxlength="256" [(ngModel)]="data.CONTACT_PERSON_NAME" (focus)="isFocused = 'CONTACT_PERSON_NAME'"
                    (blur)="isFocused = ''" required />
                  <small class="character-count" *ngIf="
                      isFocused === 'CONTACT_PERSON_NAME' ||
                      (data.CONTACT_PERSON_NAME &&
                        isFocused === 'CONTACT_PERSON_NAME')
                    ">
                    {{
                    data.CONTACT_PERSON_NAME
                    ? data.CONTACT_PERSON_NAME.length
                    : 0
                    }}/256</small>
                </nz-form-control>
              </nz-form-item>
            </div>
            <div nz-col nzSpan="12">
              <nz-form-item>
                <nz-form-label nzRequired nzNoColon>Mobile No.</nz-form-label>
                <nz-form-control nzHasFeedback nzErrorTip="Enter Valid Mobile No.">
                  <input nz-input name="mobileno" placeHolder="Enter Mobile No." autocomplete="off"
                    [(ngModel)]="data.MOBILE_NO" [pattern]="commonFunction.mobpattern"
                    (keypress)="commonFunction.onlynum($event)" maxlength="10" minlength="10"
                    [required]="ismobnoRequired" autocomplete="off" />
                </nz-form-control>
              </nz-form-item>
            </div>
          </div>
        </div>
      </div>
    </nz-spin>
  </form>
  <div class="footer">
    <button type="button" nz-button class="cancel-button" (click)="close(accountMasterPage)">
      <span>Cancel</span>
    </button>
    <button *ngIf="!data.ID" type="button" (click)="save(accountMasterPage)" class="save-button" nz-button nz-dropdown>
      <span>Save & Close</span>
    </button>
    <button type="button" class="update-button" nz-button [nzLoading]="isSpinning" *ngIf="data.ID"
      (click)="save(accountMasterPage)">
      <span>Update & close</span>
    </button>
  </div>
</div>
<div *ngIf="mapDraweVisible">
  <nz-modal [(nzVisible)]="mapDraweVisible" nzClosable="false" nzMask="true" nzMaskClosable="false" nzWidth="1000px"
    [nzFooter]="modalFooter" [nzStyle]="{ height: '40vh' }" [nzTitle]="customHeader" (nzOnCancel)="clearSearchBox()">
    <ng-template #customHeader>
      <div class="custom-header">
        <div class="left-section">
          <span class="close-icon" (click)="clearSearchBox()">âœ–</span>
          <span class="search-text">Set Location</span>
        </div>
        <div class="search-container">
          <input id="searchBox" type="text" placeholder="Search location..." (keyup)="handleSearch1($event)" />
        </div>
      </div>
    </ng-template>
    <ng-container *nzModalContent>
      <div id="map" class="map-container"></div>
    </ng-container>
  </nz-modal>
  <ng-template #modalFooter>
    <button nz-button nzType="primary" (click)="clearSearchBox()">Save</button>
  </ng-template>
</div>