<nz-spin [nzSpinning]="loading">
  <div nz-row class="main-row-shadow">
    <div nz-col nzSpan="7" class="left-col-container">
      <div class="action-logs-title">Action Logs</div>
      <div class="timeline-container timeline-padding">
        <ng-container>
          <div *ngFor="let group of timelineData">
            <h3 class="group-date">{{ group.date | date : "dd/MM/yyyy" }}</h3>
            <nz-timeline>
              <nz-timeline-item *ngFor="let event of group.events">
                <div class="event-details">
                  <div class="event-title">
                    <span class="icon">{{ event.icon }}</span>
                    <span *ngIf="event.description">{{ event.description }}</span>
                  </div>
                  <div class="event-meta">
                    <span class="time">{{ event.time }}</span>
                    <span class="user">By {{ event.user }}
                    </span>
                  </div>
                </div>
              </nz-timeline-item>
            </nz-timeline>
          </div>
        </ng-container>
        <ng-template #loadingTemplate>
          <nz-spin>Loading timeline data...</nz-spin>
        </ng-template>
        <div nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="24" nzXl="24" *ngIf="timelineData.length == 0"
          class="empty-data-container">
          <nz-empty nzNotFoundImage="https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg"
            [nzNotFoundContent]="contentTpl" [nzNotFoundFooter]="footerTpl">
            <ng-template #contentTpl>
              <span> Data Not Found</span>
            </ng-template>
            <ng-template #footerTpl> </ng-template>
          </nz-empty>
        </div>
      </div>
    </div>
    <div nz-col nzSpan="17" class="right-col-container">
      <nz-calendar [(ngModel)]="date" [(nzMode)]="mode" (nzPanelChange)="panelChange($event)"
        (nzSelectChange)="selectChange($event)">
        <ul *nzDateCell="let date" class="events">
          <ng-container *ngFor="let item of calenderdata">
            <ng-container *ngIf="isSameDate(date, item.DATE_OF_MONTH)">
              <li *ngIf="item.IS_SERIVCE_AVAILABLE !== null">
                <nz-badge [ngStyle]="{
                    'background-color':
                      item.IS_SERIVCE_AVAILABLE === 1 ? '#87CEEB' : '#FF6347'
                  }" [nzStatus]="
                    item.IS_SERIVCE_AVAILABLE === 1 ? 'success' : 'error'
                  " [nzText]="
                    item.IS_SERIVCE_AVAILABLE === 1 ? 'Available' : 'Holiday'
                  "></nz-badge>
                <div *ngIf="item.DAY_START_TIME && item.DAY_END_TIME">
                  <small><small><b class="time-label">Work Time:</b> </small>
                    From {{ item.DAY_START_TIME }} To
                    {{ item.DAY_END_TIME }}</small>
                </div>
                <div *ngIf="item.BREAK_START_TIME && item.BREAK_END_TIME">
                  <small><small><b class="time-label">Break Time:</b> </small>
                    Form {{ item.BREAK_START_TIME }} To
                    {{ item.BREAK_END_TIME }}</small>
                </div>
              </li>
            </ng-container>
          </ng-container>
        </ul>
      </nz-calendar>
    </div>
  </div>
</nz-spin>
<nz-modal [(nzVisible)]="isVisible" [nzTitle]="'Add Schedule'" (nzOnCancel)="closeModal()" (nzOnOk)="save()"
  [nzWidth]="400">
  <ng-container *nzModalContent>
    <div nz-row>
      <div nz-col nzSpan="24">
        <nz-form-item class="service-available-form">
          <nz-form-label nzRequired nzNoColon>Is Service Available ?</nz-form-label>
          <nz-form-control nzErrorTip="Please Select Is Service Available ?">
            <nz-switch name="IsServiceAvailable" nzCheckedChildren="Yes" nzUnCheckedChildren="No"
              [(ngModel)]="saveData.IS_SERIVCE_AVAILABLE">
            </nz-switch>
          </nz-form-control>
        </nz-form-item>
      </div>
      <div nz-col nzSpan="12" *ngIf="saveData.IS_SERIVCE_AVAILABLE">
        <nz-form-item>
          <nz-form-label nzRequired nzNoColon>Day Start Time</nz-form-label>
          <nz-form-control nzErrorTip="Please Select Day Start Time">
            <nz-time-picker name="DayStartTime" [nzNowText]="' '" [nzMinuteStep]="10"
              [(ngModel)]="saveData.DAY_START_TIME" (ngModelChange)="updateStartTime($event)" [nzFormat]="'HH:mm a'"
              nzPlaceHolder="Select Time"></nz-time-picker>
          </nz-form-control>
        </nz-form-item>
      </div>
      <div nz-col nzSpan="12" *ngIf="saveData.IS_SERIVCE_AVAILABLE">
        <nz-form-item>
          <nz-form-label nzRequired nzNoColon>Day End Time</nz-form-label>
          <nz-form-control nzErrorTip="Please Select Day End Time">
            <nz-time-picker name="DayEndTime" [(ngModel)]="saveData.DAY_END_TIME"
              (ngModelChange)="updateEndTime($event)" [nzNowText]="' '" [nzMinuteStep]="10" [nzFormat]="'HH:mm a'"
              nzPlaceHolder="Select Time" [nzDisabledHours]="disableEndHours"
              [nzDisabledMinutes]="disableEndMinutes"></nz-time-picker>
          </nz-form-control>
        </nz-form-item>
      </div>
      <div nz-col nzSpan="12" *ngIf="saveData.IS_SERIVCE_AVAILABLE">
        <nz-form-item>
          <nz-form-label nzRequired nzNoColon>Break Start Time</nz-form-label>
          <nz-form-control nzErrorTip="Please Select Break Start Time">
            <nz-time-picker name="BreakStartTime" [(ngModel)]="saveData.BREAK_START_TIME"
              (ngModelChange)="updateBreakStartTime($event)" [nzNowText]="' '" [nzMinuteStep]="10"
              [nzFormat]="'HH:mm a'" nzPlaceHolder="Select Time" [nzDisabledHours]="disableBreakStartHours"
              [nzDisabledMinutes]="disableBreakStartMinutes"></nz-time-picker>
          </nz-form-control>
        </nz-form-item>
      </div>
      <div nz-col nzSpan="12" *ngIf="saveData.IS_SERIVCE_AVAILABLE">
        <nz-form-item>
          <nz-form-label nzRequired nzNoColon>Break End Time</nz-form-label>
          <nz-form-control nzErrorTip="Please Select Break End Time">
            <nz-time-picker name="BreakEndTime" [(ngModel)]="saveData.BREAK_END_TIME" [nzNowText]="' '"
              [nzMinuteStep]="10" (ngModelChange)="updateBreakEndTime($event)" [nzFormat]="'HH:mm a'"
              nzPlaceHolder="Select Time" [nzDisabledHours]="disableBreakEndHours"
              [nzDisabledMinutes]="disableBreakEndMinutes"></nz-time-picker>
          </nz-form-control>
        </nz-form-item>
      </div>
      <div *ngIf="!saveData.IS_SERIVCE_AVAILABLE" nz-col nzSpan="24" class="holiday-container">
        <nz-tag nzColor="error" class="holiday-tag">
          Holiday
        </nz-tag>
      </div>
    </div>
  </ng-container>
</nz-modal>