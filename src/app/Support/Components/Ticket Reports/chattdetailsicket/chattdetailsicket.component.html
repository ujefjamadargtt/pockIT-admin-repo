<div>
  <div nz-row *ngIf="loading">
    <div nz-col nzSpan="24" class="loading-text-center">
      <nz-spin [nzSpinning]="loading"></nz-spin>
    </div>
  </div>
  <form nz-form *ngIf="!loading" class="form-margin-bottom">
    <nz-spin [nzSpinning]="isSpinning">
      <div nz-row class="fixed-header-row">
        <div nz-col nzSpan="24" class="fixed-header-col">
          <div class="name">
            {{ newstr }}
          </div>
        </div>
      </div>
      <div *ngFor="let data of data2; let i = index">
        <div nz-row *ngIf="data.data.length > 0" class="date-row-center">
          <div nz-col nzSpan="24" class="date-col-padding">
            <nz-tag [nzColor]="'red'">
              {{
              (data.key | date : "ddMMyyyy") ===
              (todayDate | date : "ddMMyyyy")
              ? "Today"
              : (data.key | date : "dd/MM/yyyy")
              }}
            </nz-tag>
          </div>
        </div>
        <div *ngFor="let data of data.data">
          <div nz-col nzSpan="24" class="sender-x-container" *ngIf="data.SENDER == 'X'">
            <nz-tag [nzColor]="'green'">
              <div nz-row>
                <div nz-col nzSpan="24" class="text-center">
                  <div class="noty">
                    {{ data.DESCRIPTION }}
                  </div>
                </div>
                <div nz-col nzSpan="24" class="text-right">
                  {{ data.CREATED_MODIFIED_DATE | date : "HH:mm a" }}
                </div>
              </div>
            </nz-tag>
          </div>
          <div nz-col nzSpan="24">
            <div nz-col nzSpan="14" *ngIf="data.SENDER == 'S'" class="sender-s-box">
              <div class="sender-name-bold">
                {{ getSenderEmpName(data.SENDER_ID) }}
              </div>
              <div>{{ data.DESCRIPTION }}</div>
              <img src="{{ getUrl(data.URL) }}" (click)="urlClick(data.URL)" *ngIf="data.URL" class="chat-image" />
              <div class="text-right">
                {{ data.CREATED_MODIFIED_DATE | date : "HH:mm a" }}
              </div>
            </div>
          </div>
          <div nz-col nzSpan="24">
            <div nz-col nzSpan="10"></div>
            <div nz-col nzSpan="14" *ngIf="data.SENDER == 'U'" class="sender-u-box">
              <div class="sender-u-name">
                {{ getSenderEmpName(data.USER_ID) }}
              </div>
              <div class="sender-u-text">{{ data.DESCRIPTION }}</div>
              <img src="{{ getUrl(data.URL) }}" (click)="urlClick(data.URL)" *ngIf="data.URL" class="chat-image" />
              <div class="sender-u-time">
                {{ data.CREATED_MODIFIED_DATE | date : "HH:mm a" }}
              </div>
            </div>
          </div>
        </div>
      </div>
      <div nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="24" nzXl="24" *ngIf="data2.length <= 0" class="empty-state-text">
        <nz-empty nzNotFoundImage="https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg"
          [nzNotFoundContent]="contentTpl" [nzNotFoundFooter]="footerTpl">
          <ng-template #contentTpl>
            <span> Data Not Found</span>
          </ng-template>
          <ng-template #footerTpl> </ng-template>
        </nz-empty>
      </div>
    </nz-spin>
    <div id="bottom"></div>
  </form>
  <div id=":h8" class="a1 aaA aMZ no-user-select">
    <div class="a3I no-user-select">&nbsp;</div>
  </div>
  <div class="footer footer-hidden">
    <button id="scrollDown" class="scroll-btn-margin" nz-button nzType="primary" (click)="bottom()">
      Scroll Bottom
    </button>
  </div>
</div>