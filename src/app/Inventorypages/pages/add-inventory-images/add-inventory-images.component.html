<div>
    <form nz-form #myForm="ngForm">
        <nz-spin [nzSpinning]="isSpinning">
            <div nz-row class="img-upload-info-text">
                Please select an image file (PNG, JPG, JPEG) with a image dimension
                325*243 px.
            </div>
            <div nz-row>
                <div nz-col nzSpan="6">
                    <div class="card img-upload-clickable" (click)="image1.click()">
                        <div class="flex-container">
                            <span nz-icon nzType="plus-circle" nzTheme="twotone" class="img-upload-plus-icon">
                            </span>
                            <input #image1 name="image1" type="file" accept=".png, .jpg, .jpeg"
                                (change)="onFileSelected($event)" class="img-upload-hidden-input" (click)="image1.value = ''" />
                        </div>
                    </div>
                </div>
                <ng-container *ngIf="existingImages && existingImages.length > 0">
                    <div nz-col nzSpan="6" *ngFor="let image of existingImages; let i = index">
                        <div class="card">
                            <div class="flex-container">
                                <span nz-popconfirm nzPopconfirmTitle="Are you sure you want to delete?"
                                    nzPopconfirmPlacement="top" (nzOnConfirm)="imageDeleteConfirm(image)"
                                    (nzOnCancel)="deleteCancel()" class="img-delete-icon">
                                    <span nz-icon nzType="delete" nzTheme="twotone" [nzTwotoneColor]="'#FF0000'"
                                        nz-tooltip nzTooltipTitle="Delete">
                                    </span>
                                </span>
                                <img nz-image [nzSrc]="image['NAME']" alt="Preview"
                                 class="img-preview-fit" />
                            </div>
                        </div>
                    </div>
                </ng-container>
                <div nz-col nzSpan="6" *ngFor="let image of uploadingImagePreviews; let j = index">
                    <div class="card">
                        <div class="flex-container">
                            <span nz-popconfirm nzPopconfirmTitle="Are you sure you want to delete?"
                                nzPopconfirmPlacement="top" (nzOnConfirm)="newUploadedImageDeleteConfirm(image, j)"
                                (nzOnCancel)="deleteCancel()" class="img-delete-icon">
                                <span nz-icon nzType="delete" nzTheme="twotone" [nzTwotoneColor]="'#FF0000'" nz-tooltip
                                    nzTooltipTitle="Delete">
                                </span>
                            </span>
                            <img nz-image [nzSrc]="image" alt="Preview"
                             class="img-preview-fit" />
                        </div>
                    </div>
                </div>
            </div>
        </nz-spin>
    </form>
</div>
<div class="footer">
    <button type="button" nz-button (click)="close()" class="ant-btn footer-cancel-spacing">
        <span>Cancel</span>
    </button>
    <button type="button" class="ant-btn ant-btn-primary" nz-button [nzLoading]="isSpinning" *ngIf="data.ID"
        (click)="save()">
        <span>Save & Close</span>
    </button>
</div>
<nz-modal [nzWidth]="900" [nzStyle]="{ 'margin-top': '-80px' }" [(nzVisible)]="CropImageModalVisible"
    nzMaskClosable="false" nzClosable="false" [nzContent]="content2" [nzTitle]="'Crop Image'"
    (nzOnCancel)="CropImageModalCancel()" [nzFooter]="CropImageModalFooter">
    <ng-template #content2>
        <nz-spin [nzSpinning]="isSpinningCrop">
            <div *ngIf="
            cropimageshow != undefined &&
            cropimageshow != null &&
            cropimageshow != ''
          " class="ss img-cropper-container">
                <div *ngIf="croppedImage" class="img-cropped-center">
                    <p>Cropped Image:</p>
                    <img nz-image [nzSrc]="croppedImage" width="400" height="320" />
                </div>
                <nz-divider [ngStyle]="{ width: imageWidth - 900 + 'px' }" nzPlain nzVariant="solid"></nz-divider>
                <image-cropper [imageChangedEvent]="imageChangedEvent" [maintainAspectRatio]="false"
                    [cropper]="cropperPosition" format="png" (imageCropped)="imageCropped($event)"
                    (imageLoaded)="imageLoaded($event)" (cropperReady)="cropperReady($event)" [imageQuality]="100"
                    (loadImageFailed)="loadImageFailed()">
                </image-cropper>
            </div>
        </nz-spin>
    </ng-template>
    <ng-template #CropImageModalFooter>
        <button nz-button nzType="default" (click)="CropImageModalCancel()">
            Close
        </button>
        <button nz-button nzType="primary" (click)="onFileSelected(imageChangedEvent)">
            Crop
        </button>
    </ng-template>
</nz-modal>