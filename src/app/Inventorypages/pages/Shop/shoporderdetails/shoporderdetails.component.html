<div nz-row nzGutter="16">
  <div class="gutter-row" nz-col nzSpan="7" style="min-height: 88vh; max-height: 88vh; overflow: auto">
    <div nz-row class="backbbb">
      <div class="mainnam" nz-col nzSpan="12" style="text-align: start">
        <span style="
            color: #1d39c4 !important;
            background: #f0f5ff !important;
            border-color: #adc6ff !important;
            padding: 5px;
            font-size: 11px !important;
          " [attr.title]='vieworderdata.orderData[0]["ORDER_NUMBER"]'>
          {{ vieworderdata.orderData[0]["ORDER_NUMBER"] }}
        </span>
      </div>
      <div class="mainnam" nz-col nzSpan="12" style="text-align: end">
        <!-- {{ date }} -->
        <span style="
            color: #1d39c4 !important;
            background: #f0f5ff !important;
            border-color: #adc6ff !important;
            padding: 5px;
            font-size: 10px !important;
          " [attr.title]=' vieworderdata.orderData[0]["ORDER_DATE_TIME"]| date : "dd/MM/yyyy HH:mm a"'>
          {{
          vieworderdata.orderData[0]["ORDER_DATE_TIME"]
          | date : "dd/MM/yyyy HH:mm a"
          }}
        </span>
      </div>

      <div class="subnam" nz-col nzSpan="24" style="
          font-size: 12px !important;
          margin-top: 4px;
          overflow: hidden;
          white-space: nowrap;
        ">
        <span nz-icon nzType="user" nzTheme="outline" style="margin-right: 3px"></span>
        <span (click)="view(vieworderdata.orderData[0])">{{
          vieworderdata.orderData[0]["CUSTOMER_NAME"]
          }}</span>
      </div>
      <div nz-col nzSpan="24">
        <div nz-row>
          <div nz-col nzSpan="1">
            <span nz-icon nzType="environment" nzTheme="fill"></span>
          </div>
          <div class="subnam" nz-col nzSpan="23" style="font-size: 12px !important; text-align: start">
            {{ vieworderdata.addressData[0]?.["ADDRESS_LINE_1"] }},
            {{ vieworderdata.addressData[0]?.["ADDRESS_LINE_2"] }}
            {{ vieworderdata.addressData[0]?.["COUNTRY_NAME"] }},
            {{ vieworderdata.addressData[0]?.["STATE_NAME"] }},
            {{ vieworderdata.addressData[0]?.["PINCODE"] }}
          </div>
        </div>
      </div>
      <div class="subnam" nz-col nzSpan="8" style="font-size: 11px !important; text-align: start">
        <a nzTooltipTitle="Call To Customer" nz-tooltip
          style="margin-right: 3px; color: #262626 !important; cursor: pointer"
          href="tel:+{{ vieworderdata.orderData[0]['MOBILE_NO'] }}" target="_blank">
          <span nz-icon nzType="phone" style="color: #262626 !important" nzTheme="fill"></span>
        </a>
        {{ vieworderdata.orderData[0]["MOBILE_NO"] }}
      </div>
      <div class="subnam" nz-col nzSpan="16" style="font-size: 11px !important; text-align: end"></div>
    </div>
    <div nz-row class="backbbb" style="margin-top: 10px; display: block;overflow: auto;">
      <div nz-col nzSpan="24" class="mainnam" style="display: flex;justify-content: space-between;">
        <p>Order Cart</p><a
          *ngIf="(!vieworderdata.orderData[0]['IS_SHIP_ORDER'] && vieworderdata.orderData[0]['MANUAL_COURIER_URL'] !==null && vieworderdata.orderData[0]['MANUAL_COURIER_URL'] !==undefined && vieworderdata.orderData[0]['MANUAL_COURIER_URL'] !=='') && (vieworderdata.orderData[0]['ORDER_STATUS'] == 'OD' || vieworderdata.orderData[0]['ORDER_STATUS'] == 'DO' ||
                vieworderdata.orderData[0]['ORDER_STATUS'] == 'SC'  || vieworderdata.orderData[0]['ORDER_STATUS'] == 'AO' || vieworderdata.orderData[0]['ORDER_STATUS'] == 'GL' || vieworderdata.orderData[0]['ORDER_STATUS'] == 'SP' || vieworderdata.orderData[0]['ORDER_STATUS'] == 'OS')">
          <button nz-button nzType="primary" style="padding: 0px 5px;
    font-size: 7px !important;height: 25px !important;"
            (click)="openCourierURL(vieworderdata.orderData[0]['MANUAL_COURIER_URL'],vieworderdata.orderData[0])">
            <span style="font-size: 11px !important;">
              Track Order
            </span>
          </button></a>
      </div>
      <div nz-col nzSpan="24" style="max-height: 30vh; overflow: auto">
        <div *ngFor="let cartItem of vieworderdata['detailsData']" class="cardstyle" style="
            font-size: 11px;
            box-shadow: rgba(0, 0, 0, 0.05) 0px 0px 0px 1px,
              rgb(209, 213, 219) 0px 0px 0px 1px inset;
            padding: 10px;
            margin-bottom: 4px;
          ">
          <div nz-row>
            <div nz-col nzSpan="22" class="subname" [attr.title]="
                cartItem.CATEGORY_NAME + ' > ' + cartItem.SUB_CATEGORY_NAME
              ">
              <b class="truncate-text">
                {{ cartItem.CATEGORY_NAME }} > {{ cartItem.SUB_CATEGORY_NAME }}
              </b>
            </div>

            <div nz-col nzSpan="2" style="text-align: right">
              <span *ngIf="
                  cartItem.INVENTORY_IMAGE != null &&
                  cartItem.INVENTORY_IMAGE != ''
                " nz-icon (click)="viewImage(cartItem.INVENTORY_IMAGE)" nzType="picture" nzTheme="outline"
                [nzTooltipTitle]="'View Photo'" nz-tooltip style="
                  cursor: pointer;
                  border: 1px solid grey;
                  padding: 3px 4px;
                  border-radius: 50px;
                  background: white;
                  margin-top: -5px;
                  font-size: 12px !important;
                "></span>
            </div>
          </div>
          <div nz-row>
            <div nz-col nzSpan="24" class="subname" #SERVICE_NAME [attr.title]="
                isTextOverflowing(SERVICE_NAME) ? cartItem.PRODUCT_NAME : null
              ">
              {{ cartItem.PRODUCT_NAME }}
            </div>
            <div nz-col nzSpan="24">
              <span style="
                  font-size: 10px !important;
                  font-weight: 400;
                  color: grey;
                " *ngIf="cartItem.BRAND_NAME != null && cartItem.BRAND_NAME != ''">{{ cartItem.BRAND_NAME }}</span>
            </div>
            <div nz-col nzSpan="24" *ngIf="cartItem.DESCRIPTION != null && cartItem.DESCRIPTION != ''">
              <div>
                <span class="truncate-text" nz-popover style="
                  font-size: 10px !important;
                  font-weight: 400;
                  color: grey;" *ngIf=" cartItem.DESCRIPTION !=null && cartItem.DESCRIPTION !='' "
                  [nzPopoverContent]="descript2" nzPopoverPlacement="topLeft" [innerHTML]="cartItem.DESCRIPTION">
                </span>
                <ng-template #descript2>
                  <span [innerHTML]="cartItem.DESCRIPTION"></span>
                </ng-template>
              </div>
            </div>

            <div nz-col nzSpan="12">
              <span style="font-weight: 500; font-size: 11px !important">₹ {{ cartItem.RATE }} x {{ cartItem.QUANTITY
                }}</span>
            </div>
            <div nz-col nzSpan="12" style="
                text-align: right;
                font-weight: 500;
                font-size: 12px !important;
              ">
              ₹ {{ cartItem.TOTAL_AMOUNT | number }}
            </div>
          </div>
        </div>
      </div>
      <div nz-col nzSpan="24" class="mainnam">Summary</div>
      <div nz-col nzSpan="24">
        <div nz-row style="font-size: 12px">
          <div nz-col nzSpan="16" style="text-align: right">Gross Total</div>

          <div nz-col nzSpan="8" style="text-align: right">
            ₹ {{ vieworderdata.summaryData[0]?.GROSS_AMOUNT | number }}
          </div>

          <div nz-col nzSpan="16" style="text-align: right">
            (-) Discount
            <span style="font-size: 9px !important"> </span>
          </div>

          <div nz-col nzSpan="8" style="text-align: right">
            ₹ {{ vieworderdata.summaryData[0]?.DISCOUNT_CHARGES| number }}
          </div>

          <div nz-col nzSpan="16" style="text-align: right">
            (+) Delivery Charges
            <span style="font-size: 9px !important"> </span>
          </div>

          <div nz-col nzSpan="8" style="text-align: right">
            ₹ {{ vieworderdata.summaryData[0]?.DELIVERY_CHARGES| number }}
          </div>
        </div>
        <div nz-row style="
            border-top: 1px dashed #7e7272;
            padding: 1px 0;
            font-size: 12px;
          ">
          <div nz-col nzSpan="16" style="font-weight: 600; text-align: right">
            Order Total
          </div>

          <div nz-col nzSpan="8" style="font-weight: bold; text-align: right">
            ₹ {{ vieworderdata.summaryData[0].NET_AMOUNT | number}}
          </div>
        </div>
      </div>

      <div nz-col nzSpan="24" class="mainnam">Other Details</div>
      <div nz-col nzSpan="24" class="subnam" style="font-size: 12px">
        Payment Mode:
        <span style="font-weight: 500" *ngIf="
            vieworderdata != undefined &&
              vieworderdata.orderData[0]['PAYMENT_MODE'] == 'COD';
            else elsepyblocks
          ">
          Cash On Delivery</span>
        <ng-template #elsepyblocks>Online</ng-template>
      </div>

      <div nz-col nzSpan="24" class="subnam" style="font-size: 12px"
        *ngIf="vieworderdata.orderData[0]['ORDER_STATUS'] == 'ON'">
        Expected Prepration Date :
        <span style="font-weight: 500">{{
          vieworderdata.orderData[0]["EXPECTED_PREAPARATION_DATETIME"]
          | date : "dd/MM/yyyy"
          }}</span>
      </div>
      <div nz-col nzSpan="24" class="subnam" style="font-size: 12px"
        *ngIf="vieworderdata.orderData[0]['ORDER_STATUS'] == 'OK'">
        Expected Packaging Date :
        <span style="font-weight: 500">{{
          vieworderdata.orderData[0]["EXPECTED_PACKAGING_DATETIME"]
          | date : "dd/MM/yyyy"
          }}</span>
      </div>
      <div nz-col nzSpan="24" class="subnam" style="font-size: 12px"
        *ngIf="vieworderdata.orderData[0]['ORDER_STATUS'] == 'OD'">
        Expected Dispatching Date :
        <span style="font-weight: 500">{{
          vieworderdata.orderData[0]["EXPECTED_DISPATCH_DATETIME"]
          | date : "dd/MM/yyyy"
          }}</span>
      </div>
    </div>

    <div class="footer">
      <nz-tag style="
          width: 100% !important;
          text-align: center;
          font-size: 14px !important;
        "
        *ngIf="vieworderdata.orderData[0]['ORDER_STATUS'] == 'OP' && !vieworderdata.orderData[0]['IS_CANCELATION_REQUESTED']"
        [nzColor]="'#ff9d19'">Order Placed</nz-tag>
      <nz-tag style="
          width: 100% !important;
          text-align: center;
          font-size: 14px !important;
        "
        *ngIf="vieworderdata.orderData[0]['ORDER_STATUS'] == 'OA' && !vieworderdata.orderData[0]['IS_CANCELATION_REQUESTED']"
        [nzColor]="'#00b778'">Order Accepted</nz-tag>
      <nz-tag style="
          width: 100% !important;
          text-align: center;
          font-size: 14px !important;
        " *ngIf="vieworderdata.orderData[0]['ORDER_STATUS'] == 'OR'" [nzColor]="'#e50000'">Order Rejected</nz-tag>
      <nz-tag style="
          width: 100% !important;
          text-align: center;
          font-size: 14px !important;
        " *ngIf="vieworderdata.orderData[0]['ORDER_STATUS'] == 'OC'" [nzColor]="'#e80000'">Order Cancelled</nz-tag>
      <nz-tag style="
          width: 100% !important;
          text-align: center;
          font-size: 14px !important;
        " *ngIf="
          ((vieworderdata.orderData[0]['ORDER_STATUS'] == 'OP' || vieworderdata.orderData[0]['ORDER_STATUS'] == 'OA') &&
          vieworderdata.orderData[0]['IS_CANCELATION_REQUESTED'])
        " [nzColor]="'#ff5252'">
        Cancel Requested</nz-tag>

      <nz-tag style="
          width: 100% !important;
          text-align: center;
          font-size: 14px !important;
        " *ngIf="vieworderdata.orderData[0]['ORDER_STATUS'] == 'OK'" [nzColor]="'#00308d'">Order Packaging</nz-tag>
      <nz-tag style="
          width: 100% !important;
          text-align: center;
          font-size: 14px !important;
        " *ngIf="vieworderdata.orderData[0]['ORDER_STATUS'] == 'OS'" [nzColor]="'#019234'">Order Delivered</nz-tag>
      <nz-tag style="
          width: 100% !important;
          text-align: center;
          font-size: 14px !important;
        " *ngIf="vieworderdata.orderData[0]['ORDER_STATUS'] == 'OD'" [nzColor]="'#0351ea'">Order Dispatched</nz-tag>

      <nz-tag style="
          width: 100% !important;
          text-align: center;
          font-size: 14px !important;
        " *ngIf="vieworderdata.orderData[0]['ORDER_STATUS'] == 'ON'" [nzColor]="'#0351ea'">Order Prepared</nz-tag>

      <nz-tag style="
          width: 100% !important;
          text-align: center;
          font-size: 14px !important;
        " *ngIf="vieworderdata.orderData[0]['ORDER_STATUS'] == 'SC'" [nzColor]="'#0351ea'">Order Created In
        Shiprocket</nz-tag>
      <nz-tag style="
          width: 100% !important;
          text-align: center;
          font-size: 14px !important;
        " *ngIf="vieworderdata.orderData[0]['ORDER_STATUS'] == 'AO'" [nzColor]="'#0351ea'">Order Assigned</nz-tag>
      <nz-tag style="
          width: 100% !important;
          text-align: center;
          font-size: 14px !important;
        " *ngIf="vieworderdata.orderData[0]['ORDER_STATUS'] == 'GL'" [nzColor]="'#0351ea'">Label Generated</nz-tag>
      <nz-tag style="
          width: 100% !important;
          text-align: center;
          font-size: 14px !important;
        " *ngIf="vieworderdata.orderData[0]['ORDER_STATUS'] == 'SP'" [nzColor]="'#0351ea'">Sent For Pickup</nz-tag>
      <nz-tag style="
          width: 100% !important;
          text-align: center;
          font-size: 14px !important;
        " *ngIf="vieworderdata.orderData[0]['ORDER_STATUS'] == 'DO'" [nzColor]="'#0351ea'">Out For Delivery</nz-tag>
    </div>
  </div>
  <div class="gutter-row" nz-col nzSpan="17">
    <!-- <nz-affix nzOffsetTop="10"> -->
    <div class="backbbb">
      <nz-spin [nzSpinning]="isSpinning">
        <nz-tabset nzCentered (nzSelectedIndexChange)="onSelectedIndexChange($event)">
          <nz-tab [nzTitle]="titleTemplate">
            <ng-template #titleTemplate>
              Verification
              <span *ngIf="vieworderdata.orderData[0]['ORDER_STATUS'] == 'OP'" nz-icon style="color: orange"
                nzType="warning" nzTheme="fill"></span>

              <span *ngIf="vieworderdata.orderData[0]['ORDER_STATUS'] != 'OP'" nz-icon style="color: green"
                nzType="check-circle" nzTheme="fill"></span>
            </ng-template>
            <ng-template nz-tab>
              <div style="
                  max-height: 78vh;
                  min-height: 76vh;
                  overflow-y: auto;
                  overflow-x: hidden;
                  padding-right: 10px;
                ">
                <div nz-row
                  *ngIf="vieworderdata.orderData[0]['ORDER_STATUS'] == 'OP' && !vieworderdata.orderData[0]['IS_CANCELATION_REQUESTED']">
                  <div nz-col nzSpan="24" style="text-align: center; padding: 10px; font-size: 20px">
                    <b>Verify Order</b>
                  </div>
                  <div nz-col nzSpan="24">
                    <div nz-row class="my-box">
                      <div nz-col nzSpan="24" style="text-align: center; margin-bottom: 10px;font-weight: 700;
    color: #0a2b9e;">
                        How would you like to process this order?&nbsp;&nbsp;
                        <nz-radio-group name="checkstatusss" [(ngModel)]="IS_SHIP_ORDER" style="display: inline-block"
                          required>
                          <label nz-radio nzValue="M" style="
                          margin-right: 10px;
                          font-weight: 600;
                        ">
                            <span style="font-size: 13px !important;
    margin-right: 4px;
    font-weight: 500 !important;">Manually</span>
                          </label>
                          <label nz-radio nzValue="S" style=" margin-right: 20px; font-weight: 600">
                            <span style="font-size: 13px !important;
    margin-right: 4px;
    font-weight: 500 !important;">Using Shiprocket</span>
                          </label>
                        </nz-radio-group>
                      </div>
                      <div nz-col nzSpan="24" style="text-align: center; margin-bottom: 10px;margin-top: 35px;">
                        <nz-radio-group name="checkstatus" [(ngModel)]="STATUS" style="display: inline-block" required>
                          <label nz-radio nzValue="A" style="
                          color: green;
                          margin-right: 20px;
                          font-weight: 600;
                        ">
                            <span style="font-size: 16px !important; margin-right: 4px">Accept Order</span>
                            <span style="font-size: 18px !important" nz-icon nzType="check-circle"
                              nzTheme="outline"></span></label>
                          <label nz-radio nzValue="R" style="color: red; margin-right: 20px; font-weight: 600">
                            <span style="font-size: 16px !important; margin-right: 4px">Reject Order</span>
                            <span style="font-size: 18px !important" nz-icon nzType="close-circle"
                              nzTheme="outline"></span></label>
                        </nz-radio-group>
                      </div>
                    </div>
                  </div>


                  <div nz-col nzSpan="24" *ngIf="STATUS === 'R' || STATUS === 'A'">
                    <div nz-row>
                      <div nz-col nzSpan="2"></div>
                      <div nz-col nzSpan="20" class="my-box" style="padding: 10px">
                        <div nz-row>
                          <div nz-col nzSpan="24" *ngIf="STATUS === 'R'">
                            <nz-form-item class="nz-form-itemm">
                              <nz-form-label nzRequired nzNoColon>Reject Remark</nz-form-label>
                              <nz-form-control nzHasFeedback nzErrorTip="Please Enter Rejection Remark">
                                <textarea name="remark" style="width: 100%" nz-input [(ngModel)]="orderData.REMARK"
                                  [nzAutosize]="{ minRows: 2, maxRows: 4 }" maxlength="500"
                                  placeholder="Please Enter Rejection Remark" draggable="false" required></textarea>
                                <h6 style="color: red; font-size: 10px" *ngIf="
                                    orderData.REMARK != undefined &&
                                    orderData.REMARK != null &&
                                    orderData.REMARK != ''
                                  ">
                                  {{ orderData.REMARK.length }}/500
                                </h6>
                              </nz-form-control>
                            </nz-form-item>
                          </div>
                          <div nz-col nzSpan="24" *ngIf="STATUS === 'A'">
                            <div nz-row>
                              <div nz-col nzSpan="24" *ngIf="STATUS === 'A'">
                                <nz-form-item class="nz-form-itemm">
                                  <nz-form-label nzNoColon>Acceptance Remark</nz-form-label>
                                  <nz-form-control>
                                    <textarea name="accremark" style="width: 100%" nz-input
                                      [(ngModel)]="orderData.ACCEPTANCE_REMARK"
                                      [nzAutosize]="{ minRows: 2, maxRows: 4 }" maxlength="256"
                                      placeholder="Please Enter Acceptance Remark" draggable="false"></textarea>
                                    <h6 style="color: red; font-size: 10px" *ngIf="
                                        orderData.ACCEPTANCE_REMARK != undefined &&
                                        orderData.ACCEPTANCE_REMARK != null &&
                                        orderData.ACCEPTANCE_REMARK != ''
                                      ">
                                      {{ orderData.ACCEPTANCE_REMARK.length }}/256
                                    </h6>
                                  </nz-form-control>
                                </nz-form-item>
                              </div>
                              <div nz-col nzSpan="10">
                                <nz-form-item>
                                  <div style="
                                      display: flex;
                                      justify-content: space-between;
                                    ">
                                    <div>
                                      <nz-form-label nzRequired nzNoColon>Warehouse
                                      </nz-form-label>
                                    </div>
                                    <div>
                                      <nz-tag style="
                                          width: 100% !important;
                                          text-align: center;
                                          cursor: pointer;
                                          font-size: 13px !important;
                                        " *ngIf="
                                          WAREHOUSE_ID && !loadingRecordIStock
                                        " [nzColor]="'geekblue'" (click)="ViewDetails()">
                                        <!-- <span nz-icon nzType="eye" nzTheme="outline"></span> -->
                                        <span nz-icon nzType="eye" *ngIf="!loadingRecordIStock"></span>
                                        <span nz-icon nzType="sync" nzSpin *ngIf="loadingRecordIStock"></span>
                                        &nbsp;View Stock</nz-tag>
                                      <nz-tag style="
                                          width: 100% !important;
                                          text-align: center;
                                          cursor: pointer;
                                          font-size: 13px !important;
                                        " *ngIf="
                                          WAREHOUSE_ID && loadingRecordIStock
                                        " [nzColor]="'geekblue'">
                                        <!-- <span nz-icon nzType="eye" nzTheme="outline"></span> -->
                                        <span nz-icon nzType="eye" *ngIf="!loadingRecordIStock"></span>
                                        <span nz-icon nzType="sync" nzSpin *ngIf="loadingRecordIStock"></span>
                                        &nbsp;View Stock</nz-tag>
                                    </div>
                                  </div>

                                  <nz-form-control nzErrorTip="Select Warehouse">
                                    <nz-select nzPlaceHolder="Select Warehouse" name="fromgodown" nzAllowClear="false"
                                      [(ngModel)]="WAREHOUSE_ID" (ngModelChange)="changeFromGodown($event)" nzShowSearch
                                      required>
                                      <nz-option *ngFor="let report of LoadGodown" [nzValue]="report.ID"
                                        [nzLabel]="report.NAME">
                                      </nz-option>
                                    </nz-select>
                                  </nz-form-control>
                                </nz-form-item>
                              </div>
                              <div nz-col nzSpan="6">
                                <nz-form-item>
                                  <nz-form-label nzRequired nzNoColon>Select Stage
                                  </nz-form-label>
                                  <nz-form-control nzErrorTip="Select Select Stage">
                                    <nz-select nzPlaceHolder="Select Select Stage" name="fromgodown"
                                      (ngModelChange)="changestagetye($event)" nzAllowClear="false"
                                      [(ngModel)]="selecteddata" nzShowSearch nzDisabled required>
                                      <nz-option [nzValue]="'OK'" [nzLabel]="'Start Packaging'">
                                      </nz-option>
                                      <nz-option [nzValue]="'OD'" [nzLabel]="'Start Dispatching'">
                                      </nz-option>
                                    </nz-select>
                                  </nz-form-control>
                                </nz-form-item>
                              </div>
                              <div nz-col nzSpan="8">
                                <nz-form-item class="nz-form-itemm" *ngIf="selecteddata == 'ON'">
                                  <nz-form-label nzRequired nzNoColon>Expected Preparation Date</nz-form-label>
                                  <nz-form-control>
                                    <nz-date-picker style="width: 100%" [(ngModel)]="expectedDate" nzFormat="dd/MM/yyyy"
                                      [nzDisabledDate]="disabledPastDates" [nzShowToday]="false"
                                      name="expectedDate"></nz-date-picker>
                                  </nz-form-control>
                                </nz-form-item>
                                <nz-form-item class="nz-form-itemm" *ngIf="selecteddata == 'OK'">
                                  <nz-form-label nzRequired nzNoColon>Expected Packaging Date</nz-form-label>
                                  <nz-form-control>
                                    <nz-date-picker style="width: 100%" [(ngModel)]="expectedDate" nzFormat="dd/MM/yyyy"
                                      [nzDisabledDate]="disabledPastDates" [nzShowToday]="false"
                                      name="expectedDate1"></nz-date-picker>
                                  </nz-form-control>
                                </nz-form-item>
                                <nz-form-item class="nz-form-itemm" *ngIf="selecteddata == 'OD'">
                                  <nz-form-label nzRequired nzNoColon>Expected Dispatching Date</nz-form-label>
                                  <nz-form-control>
                                    <nz-date-picker style="width: 100%" [(ngModel)]="expectedDate" nzFormat="dd/MM/yyyy"
                                      [nzDisabledDate]="disabledPastDates" [nzShowToday]="false"
                                      name="EXPECTED_DISPATCH_DATETIME"></nz-date-picker>
                                  </nz-form-control>
                                </nz-form-item>
                              </div>
                              <!-- <div nz-col nzSpan="6" *ngIf="selecteddata === 'OD'">
                                <nz-form-item>
                                  <nz-form-label nzRequired nzNoColon>Height</nz-form-label>
                                  <nz-form-control nzErrorTip="Enter Height">
                                    <nz-input-group [nzAddOnAfter]="'CM'">
                                      <input nz-input name="SelectHEIGHT" placeholder="Enter Height" required
                                        [(ngModel)]="SelectHEIGHT" autocomplete="off" (keypress)="
                                          commonFunction.forCostFunction($event)
                                        " maxlength="5" (paste)="
                                          commonFunction.handlePaste($event)
                                        " />
                                    </nz-input-group>
                                  </nz-form-control>
                                </nz-form-item>
                              </div>
                              <div nz-col nzSpan="6" *ngIf="selecteddata === 'OD'">
                                <nz-form-item>
                                  <nz-form-label nzRequired nzNoColon>Weight</nz-form-label>
                                  <nz-form-control nzErrorTip="Enter Weight">
                                    <nz-input-group [nzAddOnAfter]="'KG'">
                                      <input nz-input name="SelectWEIGHT" placeholder="Enter Weight" required
                                        [(ngModel)]="SelectWEIGHT" autocomplete="off" (keypress)="
                                          commonFunction.forCostFunction($event)
                                        " maxlength="8" (paste)="
                                          commonFunction.handlePaste($event)
                                        " />
                                    </nz-input-group>
                                  </nz-form-control>
                                </nz-form-item>
                              </div>
                              <div nz-col nzSpan="6" *ngIf="selecteddata === 'OD'">
                                <nz-form-item>
                                  <nz-form-label nzRequired nzNoColon>Length</nz-form-label>
                                  <nz-form-control nzErrorTip="Enter Length">
                                    <nz-input-group [nzAddOnAfter]="'CM'">
                                      <input nz-input name="SelectLENGTH" placeholder="Enter Length" required
                                        [(ngModel)]="SelectLENGTH" autocomplete="off" (keypress)="
                                          commonFunction.forCostFunction($event)
                                        " maxlength="5" (paste)="
                                          commonFunction.handlePaste($event)
                                        " />
                                    </nz-input-group>
                                  </nz-form-control>
                                </nz-form-item>
                              </div>
                              <div nz-col nzSpan="6" *ngIf="selecteddata === 'OD'">
                                <nz-form-item>
                                  <nz-form-label nzRequired nzNoColon>Breadth</nz-form-label>
                                  <nz-form-control nzErrorTip="Enter Breadth">
                                    <nz-input-group [nzAddOnAfter]="'CM'">
                                      <input nz-input name="SelectBREADTH" placeholder="Enter Breadth" required
                                        [(ngModel)]="SelectBREADTH" autocomplete="off" (keypress)="
                                          commonFunction.forCostFunction($event)
                                        " maxlength="8" (paste)="
                                          commonFunction.handlePaste($event)
                                        " />
                                    </nz-input-group>
                                  </nz-form-control>
                                </nz-form-item>
                              </div>
                              <div nz-col nzSpan="12" *ngIf="
                                  STATUS === 'A' &&
                                  selecteddata === 'OD' &&
                                  CourierdataCount > 0
                                ">
                                <nz-form-item>
                                  <nz-form-label nzRequired nzNoColon>Courier
                                  </nz-form-label>
                                  <nz-form-control nzErrorTip="Select Courier">
                                    <nz-select nzPlaceHolder="Select Courier" name="CourierDataa" nzAllowClear="false"
                                      [(ngModel)]="Courier" nzShowSearch required>
                                      <nz-option nzCustomContent *ngFor="let report of CourierData"
                                        [nzValue]="report.courier_company_id" [nzLabel]="report.courier_name">
                                        <div nz-row>
                                          <div nz-col nzSpan="24" class="mainnam">
                                            Name: {{ report.courier_name }}
                                          </div>
                                          <div nz-col nzSpan="12" class="subname">
                                            Delivery Days:
                                            {{ report.estimated_delivery_days }}
                                          </div>
                                          <div nz-col nzSpan="12" class="subname">
                                            Delivery Date: {{ report.etd }}
                                          </div>
                                          <div nz-col nzSpan="12" class="subname">
                                            Rate: {{ report.rate }}
                                          </div>
                                          <div nz-col nzSpan="12" class="subname">
                                            COD Charges:
                                            {{ report.cod_charges }}
                                          </div>
                                          <div nz-col nzSpan="12" class="subname">
                                            RTO Charges:
                                            {{ report.rto_charges }}
                                          </div>
                                        </div>
                                      </nz-option>
                                    </nz-select>
                                  </nz-form-control>
                                </nz-form-item>
                              </div> -->
                            </div>
                          </div>
                          <div nz-col nzSpan="24" style="text-align: center; padding-bottom: 20px">
                            <button nz-button *ngIf="STATUS === 'R'" nzType="primary" style="margin-top: 10px"
                              (nzOnConfirm)="acceptorder('first')" [nzOkText]="'Yes'" [nzLoading]="BoadAccept"
                              (nzOnCancel)="deleteCancel()" nz-popconfirm
                              nzPopconfirmTitle="Are you sure, you want to reject order?" nzPopconfirmPlacement="top">
                              Reject Order
                            </button>

                            <button nz-button nzType="primary" *ngIf="STATUS === 'A' && selecteddata !== 'OD'"
                              style="margin-top: 20px" (nzOnConfirm)="acceptorder('first')" [nzOkText]="'Yes'"
                              (nzOnCancel)="deleteCancel()" nz-popconfirm [nzLoading]="BoadAccept"
                              nzPopconfirmTitle="Are you sure, you want to accept order?" nzPopconfirmPlacement="top">
                              <i nz-icon nzType="check"></i>Accept Order
                            </button>
                            <button nz-button nzType="primary" *ngIf="
                                STATUS === 'A' &&
                                selecteddata === 'OD' &&
                                CourierdataCount > 0
                              " [nzLoading]="BoadAccept" style="margin-top: 20px" (nzOnConfirm)="acceptorder('first')"
                              [nzOkText]="'Yes'" (nzOnCancel)="deleteCancel()" nz-popconfirm
                              nzPopconfirmTitle="Are you sure, you want to accept order?" nzPopconfirmPlacement="top">
                              <i nz-icon nzType="check"></i> Accept Order
                            </button>
                          </div>
                        </div>
                      </div>
                      <div nz-col nzSpan="2"></div>
                    </div>
                  </div>
                </div>

                <div nz-row
                  *ngIf="vieworderdata.orderData[0]['ORDER_STATUS'] == 'OK' && vieworderdata.orderData[0]['IS_SHIP_ORDER']">
                  <div nz-col nzSpan="24" style="text-align: center; padding: 10px; font-size: 16px">
                    <b style="font-weight: 500">The order has started packaging, and the expected date is
                      {{
                      vieworderdata.orderData[0][
                      "ACTUAL_PACKAGING_DATETIME"
                      ] | date : "dd/MM/yyyy HH:mm a"
                      }}
                    </b>
                  </div>

                  <div nz-col nzSpan="24">
                    <div nz-row>
                      <div nz-col nzSpan="2"></div>
                      <div nz-col nzSpan="20" class="my-box" style="padding: 10px">
                        <div nz-row>
                          <div nz-col nzSpan="24">
                            <div style="
                                font-size: 14px;
                                font-weight: 500;
                                text-align: center;
                                margin-top: 10px;
                              ">
                              Change Order Stage
                            </div>
                            <div nz-row>
                              <div nz-col nzSpan="12">
                                <nz-form-item>
                                  <nz-form-label nzRequired nzNoColon>Select Stage
                                  </nz-form-label>
                                  <nz-form-control nzHasFeedback nzErrorTip="Select Select Stage">
                                    <nz-select nzPlaceHolder="Select Select Stage" name="fromgodown" nzDisabled
                                      nzAllowClear="false" [(ngModel)]="selecteddata" nzShowSearch required>
                                      <nz-option [nzValue]="'SC'" [nzLabel]="'Create Order In Shiprocket'">
                                      </nz-option>
                                    </nz-select>
                                  </nz-form-control>
                                </nz-form-item>
                              </div>


                              <div nz-col nzSpan="6" *ngIf="selecteddata === 'SC'">
                                <nz-form-item>
                                  <nz-form-label nzRequired nzNoColon>Height</nz-form-label>
                                  <nz-form-control nzErrorTip="Enter Height">
                                    <nz-input-group [nzAddOnAfter]="'CM'">
                                      <input nz-input name="SelectHEIGHT" placeholder="Enter Height" required
                                        [(ngModel)]="SelectHEIGHT" (ngModelChange)="setHeight($event)"
                                        autocomplete="off" (keypress)="
                                          commonFunction.forCostFunction($event)
                                        " maxlength="5" (paste)="
                                          commonFunction.handlePaste($event)
                                        " />
                                    </nz-input-group>
                                  </nz-form-control>
                                </nz-form-item>
                              </div>
                              <div nz-col nzSpan="6" *ngIf="selecteddata === 'SC'">
                                <nz-form-item>
                                  <nz-form-label nzRequired nzNoColon>Weight</nz-form-label>
                                  <nz-form-control nzErrorTip="Enter Weight">
                                    <nz-input-group [nzAddOnAfter]="'KG'">
                                      <input nz-input name="SelectWEIGHT" placeholder="Enter Weight" required
                                        [(ngModel)]="SelectWEIGHT" autocomplete="off"
                                        (ngModelChange)="setWeight($event)" (keypress)="
                                          commonFunction.forCostFunction($event)
                                        " maxlength="8" (paste)="
                                          commonFunction.handlePaste($event)
                                        " />
                                    </nz-input-group>
                                  </nz-form-control>
                                </nz-form-item>
                              </div>
                              <div nz-col nzSpan="6" *ngIf="selecteddata === 'SC'">
                                <nz-form-item>
                                  <nz-form-label nzRequired nzNoColon>Length</nz-form-label>
                                  <nz-form-control nzErrorTip="Enter Length">
                                    <nz-input-group [nzAddOnAfter]="'CM'">
                                      <input nz-input name="SelectLENGTH" placeholder="Enter Length" required
                                        (ngModelChange)="setLength($event)" [(ngModel)]="SelectLENGTH"
                                        autocomplete="off" (keypress)="
                                          commonFunction.forCostFunction($event)
                                        " maxlength="5" (paste)="
                                          commonFunction.handlePaste($event)
                                        " />
                                    </nz-input-group>
                                  </nz-form-control>
                                </nz-form-item>
                              </div>
                              <div nz-col nzSpan="6" *ngIf="selecteddata === 'SC'">
                                <nz-form-item>
                                  <nz-form-label nzRequired nzNoColon>Breadth</nz-form-label>
                                  <nz-form-control nzErrorTip="Enter Breadth">
                                    <nz-input-group [nzAddOnAfter]="'CM'">
                                      <input nz-input name="SelectBREADTH" placeholder="Enter Breadth" required
                                        (ngModelChange)="setBreadth($event)" [(ngModel)]="SelectBREADTH"
                                        autocomplete="off" (keypress)="
                                          commonFunction.forCostFunction($event)
                                        " maxlength="8" (paste)="
                                          commonFunction.handlePaste($event)
                                        " />
                                    </nz-input-group>
                                  </nz-form-control>
                                </nz-form-item>
                              </div>
                              <div nz-col nzSpan="12" *ngIf="
                                  selecteddata === 'SC' && CourierdataCount > 0
                                ">
                                <nz-form-item>
                                  <nz-form-label nzRequired nzNoColon>Courier
                                  </nz-form-label>
                                  <nz-form-control nzErrorTip="Select Courier">
                                    <nz-select nzPlaceHolder="Select Courier" name="CourierDataa" nzAllowClear="false"
                                      [(ngModel)]="Courier" nzShowSearch required [nzOptionOverflowSize]="4"
                                      [nzOptionHeightPx]="80">
                                      <nz-option nzCustomContent *ngFor="let report of CourierData"
                                        [nzValue]="report.courier_company_id" [nzLabel]="report.courier_name">
                                        <div nz-row>
                                          <div nz-col nzSpan="24" class="mainnam">
                                            Name: {{ report.courier_name }}
                                          </div>
                                          <div nz-col nzSpan="12" class="subname">
                                            Delivery Days:
                                            {{ report.estimated_delivery_days }}
                                          </div>
                                          <div nz-col nzSpan="12" class="subname">
                                            Delivery Date: {{ report.etd }}
                                          </div>
                                          <div nz-col nzSpan="12" class="subname">
                                            Rate: {{ report.rate }}
                                          </div>
                                          <div nz-col nzSpan="12" class="subname">
                                            COD Charges:
                                            {{ report.cod_charges }}
                                          </div>
                                          <div nz-col nzSpan="12" class="subname">
                                            RTO Charges:
                                            {{ report.rto_charges }}
                                          </div>
                                        </div>
                                      </nz-option>
                                    </nz-select>
                                  </nz-form-control>
                                </nz-form-item>
                              </div>
                              <div nz-col nzSpan="12">
                                <nz-form-item style="margin: 0px !important;text-align: center;">
                                  <button nz-button nzType="default" [nzLoading]="spinCourier"
                                    *ngIf="selecteddata === 'SC'"
                                    style="margin-top: 31px;color: #00308d;border-color: #00308d;"
                                    (click)="getcourier1()">
                                    <i nz-icon nzType="check"></i>Get Available Courier Options
                                  </button>
                                </nz-form-item>
                              </div>
                              <div nz-col nzSpan="12" style="text-align: center; padding-bottom: 20px">
                                <button *ngIf="CourierdataCount > 0" nz-button nzType="primary"
                                  style="margin-top: 30px;" (click)="CreateShipOrder()">
                                  Create Order In Shiprocket
                                </button>
                              </div>
                            </div>
                          </div>

                        </div>
                      </div>
                      <div nz-col nzSpan="2"></div>
                    </div>
                  </div>
                </div>

                <div nz-row
                  *ngIf="vieworderdata.orderData[0]['ORDER_STATUS'] == 'OK' && !vieworderdata.orderData[0]['IS_SHIP_ORDER']">
                  <div nz-col nzSpan="24" style="text-align: center; padding: 10px; font-size: 16px">
                    <b style="font-weight: 500">The order has started packaging, and the expected date is
                      {{
                      vieworderdata.orderData[0][
                      "ACTUAL_PACKAGING_DATETIME"
                      ] | date : "dd/MM/yyyy HH:mm a"
                      }}
                    </b>
                  </div>

                  <div nz-col nzSpan="24">
                    <div nz-row>
                      <div nz-col nzSpan="2"></div>
                      <div nz-col nzSpan="20" class="my-box" style="padding: 10px">
                        <div nz-row>
                          <div nz-col nzSpan="24">
                            <div style="
                                font-size: 14px;
                                font-weight: 500;
                                text-align: center;
                                margin-top: 10px;
                              ">
                              Change Order Stage
                            </div>
                            <div nz-row>
                              <div nz-col nzSpan="8">
                                <nz-form-item>
                                  <nz-form-label nzRequired nzNoColon>Select Stage
                                  </nz-form-label>
                                  <nz-form-control nzHasFeedback nzErrorTip="Select Select Stage">
                                    <nz-select nzPlaceHolder="Select Select Stage" name="fromgodown" nzDisabled
                                      nzAllowClear="false" [(ngModel)]="selecteddata" nzShowSearch required>
                                      <nz-option [nzValue]="'DO'" [nzLabel]="'Out For Delivery'">
                                      </nz-option>
                                    </nz-select>
                                  </nz-form-control>
                                </nz-form-item>
                              </div>


                              <div nz-col nzSpan="16">
                                <nz-form-item>
                                  <nz-form-label nzNoColon>Tracking URL</nz-form-label>
                                  <nz-form-control nzErrorTip="Enter Tracking URL">
                                    <input nz-input name="COURIER_TRACKING_URL" placeholder="Enter Tracking URL"
                                      required [(ngModel)]="COURIER_TRACKING_URL" autocomplete="off" maxlength="512" />
                                  </nz-form-control>
                                </nz-form-item>
                              </div>
                              <div nz-col nzSpan="24" style="text-align: center; padding-bottom: 20px">
                                <button nz-button nzType="primary" style="margin-top: 30px;" (click)="MarkAsDelivery()">
                                  Mark As Out For Delivery
                                </button>
                              </div>
                            </div>
                          </div>

                        </div>
                      </div>
                      <div nz-col nzSpan="2"></div>
                    </div>
                  </div>
                </div>

                <div nz-row
                  *ngIf="vieworderdata.orderData[0]['ORDER_STATUS'] == 'DO' && !vieworderdata.orderData[0]['IS_SHIP_ORDER']">
                  <div nz-col nzSpan="24" style="text-align: center; padding: 10px; font-size: 16px">
                    <b style="font-weight: 500">The order was out for delivery on
                      {{
                      vieworderdata.orderData[0][
                      "ORDER_OUT_FOR_DELIVERY_DATE"
                      ] | date : "dd/MM/yyyy HH:mm a"
                      }}
                    </b>
                  </div>

                  <div nz-col nzSpan="24">
                    <div nz-row>
                      <div nz-col nzSpan="2"></div>
                      <div nz-col nzSpan="20" class="my-box" style="padding: 10px">
                        <div nz-row>
                          <div nz-col nzSpan="24">

                            <div nz-row>
                              <div nz-col nzSpan="10">
                                <nz-form-item>
                                  <nz-form-label nzRequired nzNoColon>Select Stage
                                  </nz-form-label>
                                  <nz-form-control nzHasFeedback nzErrorTip="Select Select Stage">
                                    <nz-select nzPlaceHolder="Select Select Stage" name="fromgodown" nzDisabled
                                      nzAllowClear="false" [(ngModel)]="selectedoutfordate" nzShowSearch required>
                                      <nz-option [nzValue]="'OS'" [nzLabel]="'Delivered'">
                                      </nz-option>
                                    </nz-select>
                                  </nz-form-control>
                                </nz-form-item>
                              </div>


                              <div nz-col nzSpan="8" style="text-align: center; padding-bottom: 20px">
                                <button nz-button nzType="primary" style="margin-top: 30px;"
                                  (click)="MarkAsDelivered()">
                                  Mark As Delivered
                                </button>
                              </div>
                            </div>
                          </div>

                        </div>
                      </div>
                      <div nz-col nzSpan="2"></div>
                    </div>
                  </div>
                </div>
                <div nz-row
                  *ngIf="vieworderdata.orderData[0]['ORDER_STATUS'] == 'SC'  && vieworderdata.orderData[0]['IS_SHIP_ORDER']">
                  <div nz-col nzSpan="24" style="text-align: center; padding: 10px; font-size: 16px">
                    <b style="font-weight: 500">Order created in shiprocket on
                      {{
                      vieworderdata.orderData[0][
                      "ORDER_SHIPROCKET_DATETIME"
                      ] | date : "dd/MM/yyyy HH:mm a"
                      }}
                    </b>
                  </div>
                  <div nz-col nzSpan="24">
                    <div nz-row>
                      <div nz-col nzSpan="2"></div>
                      <div nz-col nzSpan="20" class="my-box" style="padding: 10px">
                        <div nz-row>
                          <div nz-col nzSpan="24">
                            <!-- <div style="
                                font-size: 14px;
                                font-weight: 500;
                                text-align: center;
                                margin-top: 10px;
                              ">
                              Change Order Stage
                            </div> -->
                            <div nz-row>
                              <div nz-col nzSpan="12">
                                <nz-form-item>
                                  <nz-form-label nzRequired nzNoColon>Select Stage
                                  </nz-form-label>
                                  <nz-form-control nzHasFeedback nzErrorTip="Select Select Stage">
                                    <nz-select nzPlaceHolder="Select Select Stage" name="fromgodown" nzDisabled
                                      nzAllowClear="false" [(ngModel)]="selecteddata" nzShowSearch required>
                                      <nz-option [nzValue]="'AO'" [nzLabel]="'Assign Order'">
                                      </nz-option>
                                    </nz-select>
                                  </nz-form-control>
                                </nz-form-item>
                              </div>
                              <div nz-col nzSpan="12" style="padding-bottom: 20px">
                                <button nz-button nzType="primary" style="margin-top: 30px" (click)="AssignShipOrder()">
                                  Assign Order
                                </button>
                              </div>
                            </div>
                          </div>

                        </div>
                      </div>
                      <div nz-col nzSpan="2"></div>
                    </div>
                  </div>
                </div>

                <div nz-row
                  *ngIf="vieworderdata.orderData[0]['ORDER_STATUS'] == 'AO'  && vieworderdata.orderData[0]['IS_SHIP_ORDER']">
                  <div nz-col nzSpan="24" style="text-align: center; padding: 10px; font-size: 16px">
                    <b style="font-weight: 500">Order assigned in shiprocket on
                      {{
                      vieworderdata.orderData[0][
                      "ORDER_SHIP_ASSIGN_DATETIME"
                      ] | date : "dd/MM/yyyy HH:mm a"
                      }}
                    </b>
                  </div>

                  <div nz-col nzSpan="24">
                    <div nz-row>
                      <div nz-col nzSpan="2"></div>
                      <div nz-col nzSpan="20" class="my-box" style="padding: 10px">
                        <div nz-row>
                          <div nz-col nzSpan="24">
                            <!-- <div style="
                                font-size: 14px;
                                font-weight: 500;
                                text-align: center;
                                margin-top: 10px;
                              ">
                              Change Order Stage
                            </div> -->
                            <div nz-row>
                              <div nz-col nzSpan="12">
                                <nz-form-item>
                                  <nz-form-label nzRequired nzNoColon>Select Stage
                                  </nz-form-label>
                                  <nz-form-control nzHasFeedback nzErrorTip="Select Select Stage">
                                    <nz-select nzPlaceHolder="Select Select Stage" name="fromgodown" nzDisabled
                                      nzAllowClear="false" [(ngModel)]="selecteddata" nzShowSearch required>
                                      <nz-option [nzValue]="'GL'" [nzLabel]="'Generate Label'">
                                      </nz-option>
                                    </nz-select>
                                  </nz-form-control>
                                </nz-form-item>
                              </div>
                              <div nz-col nzSpan="12" style="padding-bottom: 20px">
                                <button nz-button nzType="primary" style="margin-top: 30px"
                                  (click)="GenerateLabelShipOrder()">
                                  Generate Label
                                </button>
                              </div>
                            </div>
                          </div>

                        </div>
                      </div>
                      <div nz-col nzSpan="2"></div>
                    </div>
                  </div>
                </div>

                <div nz-row
                  *ngIf="vieworderdata.orderData[0]['ORDER_STATUS'] == 'GL'  && vieworderdata.orderData[0]['IS_SHIP_ORDER']">
                  <div nz-col nzSpan="24" style="text-align: center; padding: 10px; font-size: 16px">
                    <b style="font-weight: 500">Label generated in shiprocket on
                      {{
                      vieworderdata.orderData[0][
                      "ORDER_LABEL_DATETIME"
                      ] | date : "dd/MM/yyyy HH:mm a"
                      }}
                    </b>
                  </div>

                  <div nz-col nzSpan="24">
                    <div nz-row>
                      <div nz-col nzSpan="2"></div>
                      <div nz-col nzSpan="20" class="my-box" style="padding: 10px">
                        <div nz-row>

                          <div nz-col nzSpan="24">
                            <!-- <div style="
                                font-size: 14px;
                                font-weight: 500;
                                text-align: center;
                                margin-top: 10px;
                              ">
                              Change Order Stage
                            </div> -->
                            <div nz-row>
                              <div nz-col nzSpan="12">
                                <nz-form-item>
                                  <nz-form-label nzRequired nzNoColon>Select Stage
                                  </nz-form-label>
                                  <nz-form-control nzHasFeedback nzErrorTip="Select Select Stage">
                                    <nz-select nzPlaceHolder="Select Select Stage" name="fromgodown" nzDisabled
                                      nzAllowClear="false" [(ngModel)]="selecteddata" nzShowSearch required>
                                      <nz-option [nzValue]="'SP'" [nzLabel]="'Send For Pickup'">
                                      </nz-option>
                                    </nz-select>
                                  </nz-form-control>
                                </nz-form-item>
                              </div>
                              <div nz-col nzSpan="12" style="padding-bottom: 20px">
                                <button nz-button nzType="primary" style="margin-top: 30px"
                                  (click)="SendForPickupShipOrder()">
                                  Send For Pickup
                                </button>
                              </div>
                            </div>
                          </div>

                        </div>
                      </div>
                      <div nz-col nzSpan="2"></div>
                    </div>
                  </div>
                </div>

                <div nz-row
                  *ngIf="vieworderdata.orderData[0]['ORDER_STATUS'] == 'SP'  && vieworderdata.orderData[0]['IS_SHIP_ORDER']">
                  <div nz-col nzSpan="24" style="text-align: center; padding: 10px; font-size: 16px">
                    <b style="font-weight: 500">Order send for pickup on
                      {{
                      vieworderdata.orderData[0][
                      "ORDER_PICKUP_DATETIME"
                      ] | date : "dd/MM/yyyy HH:mm a"
                      }}
                    </b>
                  </div>

                  <div nz-col nzSpan="24">
                    <div nz-row>
                      <div nz-col nzSpan="2"></div>
                      <div nz-col nzSpan="20" class="my-box" style="padding: 10px">
                        <div nz-row>
                          <div nz-col nzSpan="24">
                            <!-- <div style="
                                font-size: 14px;
                                font-weight: 500;
                                text-align: center;
                                margin-top: 10px;
                              ">
                              Change Order Stage
                            </div> -->
                            <div nz-row>
                              <div nz-col nzSpan="12">
                                <nz-form-item>
                                  <nz-form-label nzRequired nzNoColon>Select Stage
                                  </nz-form-label>
                                  <nz-form-control nzHasFeedback nzErrorTip="Select Select Stage">
                                    <nz-select nzPlaceHolder="Select Select Stage" name="fromgodown" nzDisabled
                                      nzAllowClear="false" [(ngModel)]="selecteddata" nzShowSearch required>
                                      <nz-option [nzValue]="'OD'" [nzLabel]="'Start Dispatching'">
                                      </nz-option>
                                    </nz-select>
                                  </nz-form-control>
                                </nz-form-item>
                              </div>
                              <div nz-col nzSpan="12" style="padding-bottom: 20px">
                                <button nz-button nzType="primary" style="margin-top: 30px" (click)="dispatchorder()">
                                  Start Dispatching
                                </button>
                              </div>
                            </div>
                          </div>

                        </div>
                      </div>
                      <div nz-col nzSpan="2"></div>
                    </div>
                  </div>
                </div>

                <div
                  *ngIf="(vieworderdata.orderData[0]['ORDER_STATUS'] == 'OP' || vieworderdata.orderData[0]['ORDER_STATUS'] == 'OA')&& vieworderdata.orderData[0]['IS_CANCELATION_REQUESTED']"
                  style="
                text-align: center;
                padding-top: 30vh;
                font-size: 20px;
                font-weight: 500;
                color: rgb(255, 30, 0);
              ">
                  The cancellation request is under verification.
                </div>

                <div
                  *ngIf="vieworderdata.orderData[0]['IS_SHIP_ORDER'] && (vieworderdata.orderData[0]['ORDER_STATUS'] == 'OD' || vieworderdata.orderData[0]['ORDER_STATUS'] == 'DO' ||
                vieworderdata.orderData[0]['ORDER_STATUS'] == 'SC'  || vieworderdata.orderData[0]['ORDER_STATUS'] == 'AO' || vieworderdata.orderData[0]['ORDER_STATUS'] == 'GL' || vieworderdata.orderData[0]['ORDER_STATUS'] == 'SP' || vieworderdata.orderData[0]['ORDER_STATUS'] == 'OS')"
                  style="max-height: 78vh;min-height: 76vh;overflow-y: auto;overflow-x: hidden;padding-right: 10px;">
                  <div nz-row nzGutter="24">
                    <div nz-col nzSpan="2"></div>
                    <div nz-col nzSpan="20" style="padding: 10px">
                      <div class="cardstyle1" nz-row>
                        <div class="mainnam" nz-col nzSpan="24" style="text-align: center;color: #1d39c4 !important;
                      background: #f0f5ff !important;border-color: #adc6ff !important;padding: 5px;">
                          <span style=" font-size: 15px !important;">Shipment Details</span>
                        </div>
                        <div nz-col nzSpan="12" style="margin-top: 10px;color: #5a5a5a !important;"
                          class="truncate-text1 subnamm">
                          <b style="font-weight: 600 !important;">Shiprocket Order ID:</b>
                          {{vieworderdata.orderData[0]['ORDER_ID']}}
                        </div>
                        <div nz-col nzSpan="12" style="margin-top: 10px;color: #5a5a5a !important;"
                          class="truncate-text1 subnamm">
                          <b style="font-weight: 600 !important;">Shipment ID:</b>
                          {{vieworderdata.orderData[0]['SHIPMENT_ID']}}
                        </div>
                        <div nz-col nzSpan="12"
                          *ngIf="vieworderdata.orderData[0]['ORDER_STATUS'] == 'AO' ||vieworderdata.orderData[0]['ORDER_STATUS'] == 'GL' || vieworderdata.orderData[0]['ORDER_STATUS'] == 'SP' || vieworderdata.orderData[0]['ORDER_STATUS'] == 'OD' || vieworderdata.orderData[0]['ORDER_STATUS'] == 'OS'"
                          style="margin-top: 10px;color: #5a5a5a !important;" class="truncate-text1 subnamm">
                          <b style="font-weight: 600 !important;">AWB Code:</b>
                          {{vieworderdata.orderData[0]['AWB_CODE']}}
                        </div>
                        <div
                          *ngIf="vieworderdata.orderData[0]['ORDER_STATUS'] == 'GL' || vieworderdata.orderData[0]['ORDER_STATUS'] == 'SP' || vieworderdata.orderData[0]['ORDER_STATUS'] == 'OD' || vieworderdata.orderData[0]['ORDER_STATUS'] == 'OS'"
                          nz-col nzSpan="12" style="margin-top: 10px;" class="truncate-text1 subnamm">
                          <a href="{{vieworderdata.orderData[0]['LABEL_URL']}}" target="_blank">
                            <button nz-button nzType="primary">
                              Download Label
                            </button></a>
                        </div>
                      </div>
                    </div>
                    <div nz-col nzSpan="2"></div>
                  </div>
                </div>
                <div *ngIf="vieworderdata.orderData[0]['ORDER_STATUS'] == 'OR'" style="
                    text-align: center;
                    padding-top: 30vh;
                    font-size: 20px;
                    font-weight: 500;
                    color: red;
                  ">
                  Order Rejected
                </div>
                <div *ngIf="vieworderdata.orderData[0]['ORDER_STATUS'] == 'OC'" style="
                    text-align: center;
                    padding-top: 30vh;
                    font-size: 20px;
                    font-weight: 500;
                    color: red;
                  ">
                  Order Cancelled
                </div>
                <div *ngIf="vieworderdata.orderData[0]['ORDER_STATUS'] == 'OS'" style="
                    text-align: center;
                    padding-top: 30vh;
                    font-size: 20px;
                    font-weight: 500;
                    color: rgb(2, 95, 47);
                  ">
                  Order Delivered
                </div>
              </div>
            </ng-template>
          </nz-tab>

          <nz-tab (nzSelect)="setFilter()" [nzTitle]="'Action/Activity Log'">
            <ng-template nz-tab>
              <div style="
                  max-height: 78vh;
                  min-height: 76vh;
                  overflow-y: auto;
                  overflow-x: hidden;
                  padding-right: 10px;
                ">
                <app-actionlogs [TYPE]="'SHOP_ORDER'" [FILTER_ID]="orderDetails.ID"></app-actionlogs>
              </div>
            </ng-template>
          </nz-tab>
          <nz-tab [nzTitle]="'Warehouse & Courier Details'" [nzDisabled]="
          vieworderdata.orderData[0]['ORDER_STATUS'] == 'OP' ||
          vieworderdata.orderData[0]['ORDER_STATUS'] == 'OK' ||
          vieworderdata.orderData[0]['ORDER_STATUS'] == 'OR'
        ">
            <ng-template nz-tab>
              <div style="
              max-height: 78vh;
              min-height: 76vh;
              overflow-y: auto;
              overflow-x: hidden;
              padding-right: 10px;
            ">
                <div nz-row nzGutter="24">
                  <div nz-col nzSpan="24" style="padding: 10px">
                    <div class="cardstyle1" nz-row>
                      <div class="mainnam" nz-col nzSpan="24" style="text-align: center;color: #1d39c4 !important;
                      background: #f0f5ff !important;
                      border-color: #adc6ff !important;
                      padding: 5px;
                     ">
                        <span style=" font-size: 15px !important;">Warehouse Details</span>
                      </div>
                      <div nz-col nzSpan="24" style="margin-top: 10px;"
                        [nzTooltipTitle]="isTextOverflow ? warehousedetails[0]['NAME'] : null" #tooltipRef="nzTooltip"
                        nz-tooltip #textContainername class="truncate-text1 subnam"
                        (mouseenter)="checkOverflow(textContainername, tooltipRef)">
                        <b style="font-weight: 600 !important;">Warehouse Name:</b> {{ warehousedetails[0]['NAME'] }}
                      </div>
                      <div nz-col nzSpan="24" style="margin-top: 10px;"
                        [nzTooltipTitle]="isTextOverflow ? warehousedetails[0]['CITY_NAME'] : null"
                        #tooltipRef="nzTooltip" nz-tooltip #textContainername class="truncate-text1 subnam"
                        (mouseenter)="checkOverflow(textContainername, tooltipRef)">
                        <b style="font-weight: 600 !important;">City:</b> {{ warehousedetails[0]['CITY_NAME']}}
                      </div>
                      <div nz-col nzSpan="24" style="margin-top: 5px;"
                        [nzTooltipTitle]="isTextOverflow ? warehousedetails[0]['ADDRESS_LINE1'] : null"
                        #tooltipRef="nzTooltip" nz-tooltip #textContainerAddrs class="truncate-text1 subnam"
                        (mouseenter)="checkOverflow(textContainerAddrs, tooltipRef)">
                        <b style="font-weight: 600 !important;">Pickup Location:</b> {{
                        warehousedetails[0]['ADDRESS_LINE1'] }}
                        {{ warehousedetails[0]['COUNTRY_NAME'] }}
                        {{ warehousedetails[0]['STATE_NAME'] }}
                        {{ warehousedetails[0]['DISTRICT_NAME'] }},
                        {{ warehousedetails[0]['PINCODE'] }}
                      </div>
                      <div nz-col nzSpan="24" style="margin-top: 5px;"
                        [nzTooltipTitle]="isTextOverflow ? warehousedetails[0]['WAREHOUSE_MANAGER_NAME'] : null"
                        #tooltipRef="nzTooltip" nz-tooltip #textContainerWMnm class="truncate-text1 subnam"
                        (mouseenter)="checkOverflow(textContainerWMnm, tooltipRef)">
                        <b style="font-weight: 600 !important;">Warehouse Manager:</b> {{
                        warehousedetails[0]['WAREHOUSE_MANAGER_NAME'] }}
                      </div>
                      <div nz-col nzSpan="24" style="margin-top: 5px;margin-bottom: 10px;"
                        class="truncate-text1 subnam">
                        <b style="font-weight: 600 !important;">Mobile No:</b> {{ warehousedetails[0]['MOBILE_NO'] }}
                      </div>
                      <div class="mainnam" *ngIf="vieworderdata.orderData[0]['IS_SHIP_ORDER']" nz-col nzSpan="24" style="text-align: center;color: #1d39c4 !important;
                      background: #f0f5ff !important;
                      border-color: #adc6ff !important;
                      padding: 5px;">
                        <span style=" font-size: 15px !important;">Courier Details</span>
                      </div>
                      <div nz-col nzSpan="24" style="margin-top: 10px;"
                        *ngIf="Courierdetails!=undefined && vieworderdata.orderData[0]['IS_SHIP_ORDER']"
                        [nzTooltipTitle]="isTextOverflow ? Courierdetails['courier_name'] : null"
                        #tooltipRef="nzTooltip" nz-tooltip #textContaineCnm class="truncate-text1 subnam"
                        (mouseenter)="checkOverflow(textContaineCnm, tooltipRef)">
                        <b style="font-weight: 600 !important;">Courier Name:</b> {{ Courierdetails['courier_name'] }}
                      </div>
                      <div nz-col nzSpan="24" style="margin-top: 5px;"
                        *ngIf="Courierdetails!=undefined && vieworderdata.orderData[0]['IS_SHIP_ORDER']"
                        [nzTooltipTitle]="isTextOverflow ? Courierdetails['city'] : null" #tooltipRef="nzTooltip"
                        nz-tooltip #textContainecity class="truncate-text1 subnam"
                        (mouseenter)="checkOverflow(textContainecity, tooltipRef)">
                        <b style="font-weight: 600 !important;">City:</b> {{ Courierdetails['city'] }}
                      </div>
                      <div nz-col nzSpan="24" style="margin-top: 5px;"
                        *ngIf="Courierdetails!=undefined && vieworderdata.orderData[0]['IS_SHIP_ORDER']"
                        [nzTooltipTitle]="isTextOverflow ? Courierdetails['city'] : null" #tooltipRef="nzTooltip"
                        nz-tooltip #textContaineEST class="truncate-text1 subnam"
                        (mouseenter)="checkOverflow(textContaineEST, tooltipRef)">
                        <b style="font-weight: 600 !important;">Estimated Delivery Date:</b> {{ Courierdetails['etd'] }}
                      </div>
                      <div nz-col nzSpan="8" style="margin-top: 5px;"
                        *ngIf="Courierdetails!=undefined && vieworderdata.orderData[0]['IS_SHIP_ORDER']"
                        [nzTooltipTitle]="isTextOverflow ? Courierdetails['city'] : null" #tooltipRef="nzTooltip"
                        nz-tooltip #textContainerate class="truncate-text1 subnam"
                        (mouseenter)="checkOverflow(textContainerate, tooltipRef)">
                        <b style="font-weight: 600 !important;">Delivery Charges:</b>&nbsp;₹ {{ Courierdetails['rate'] |
                        number
                        }}
                      </div>
                      <div nz-col nzSpan="8" style="margin-top: 5px;"
                        *ngIf="Courierdetails!=undefined && vieworderdata.orderData[0]['IS_SHIP_ORDER']"
                        [nzTooltipTitle]="isTextOverflow ? Courierdetails['city'] : null" #tooltipRef="nzTooltip"
                        nz-tooltip #textContaineRTO class="truncate-text1 subnam"
                        (mouseenter)="checkOverflow(textContaineRTO, tooltipRef)">
                        <b style="font-weight: 600 !important;">RTO Charges:</b>&nbsp;₹ {{ Courierdetails['rto_charges']
                        | number
                        }}
                      </div>
                      <div nz-col nzSpan="8" style="margin-top: 5px;"
                        *ngIf="Courierdetails!=undefined && vieworderdata.orderData[0]['IS_SHIP_ORDER']"
                        [nzTooltipTitle]="isTextOverflow ? Courierdetails['city'] : null" #tooltipRef="nzTooltip"
                        nz-tooltip #textContaineCOD class="truncate-text1 subnam"
                        (mouseenter)="checkOverflow(textContaineCOD, tooltipRef)">
                        <b style="font-weight: 600 !important;">COD Charges:</b>&nbsp;₹ {{ Courierdetails['cod_charges']
                        | number
                        }}
                      </div>

                      <div class="subnam" nz-col nzSpan="8" style="margin-top: 5px;"
                        *ngIf="vieworderdata.orderData[0]['IS_SHIP_ORDER']">
                        <b style="font-weight: 600 !important;">Package Height:</b>
                        {{vieworderdata.orderData[0]['HEIGHT'] }} CM
                      </div>
                      <div class="subnam" nz-col nzSpan="8" style="margin-top: 5px;"
                        *ngIf="vieworderdata.orderData[0]['IS_SHIP_ORDER']">
                        <b style="font-weight: 600 !important;">Package Weight:</b>
                        {{vieworderdata.orderData[0]['WEIGHT'] }} KG
                      </div>
                      <div class="subnam" nz-col nzSpan="8" style="margin-top: 5px;"
                        *ngIf="vieworderdata.orderData[0]['IS_SHIP_ORDER']">
                        <b style="font-weight: 600 !important;">Package Length:</b>
                        {{vieworderdata.orderData[0]['LENGTH'] }} CM
                      </div>
                      <div class="subnam" nz-col nzSpan="8" style="margin-top: 5px;margin-bottom: 10px;"
                        *ngIf="vieworderdata.orderData[0]['IS_SHIP_ORDER']">
                        <b style="font-weight: 600 !important;">Package Breadth:</b>
                        {{vieworderdata.orderData[0]['BREADTH'] }} CM
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </ng-template>
          </nz-tab>
          <nz-tab (nzSelect)="setFilter()" [nzTitle]="'Order Location'">
            <ng-template nz-tab>
              <div style="
                  max-height: 78vh;
                  min-height: 76vh;
                  overflow-y: auto;
                  overflow-x: hidden;
                  padding-right: 10px;
                ">
                <app-location [TYPE]="'SHOP_ORDER'" [FILTER_ID]="orderDetails.ID"></app-location>
              </div>
            </ng-template>
          </nz-tab>
          <nz-tab (nzSelect)="setFilter()" [nzTitle]="'Order Ratings'">
            <ng-template nz-tab>
              <div style="
                  max-height: 78vh;
                  min-height: 76vh;
                  overflow-y: auto;
                  overflow-x: hidden;
                  padding-right: 10px;
                ">
                <app-customerratting [TYPE]="'SHOP_ORDER'" [FILTER_ID]="orderDetails.ID"></app-customerratting>
              </div>
            </ng-template>
          </nz-tab>
          <nz-tab (nzSelect)="setFilter()" [nzDisabled]="
              vieworderdata.orderData[0]['ORDER_STATUS'] == 'OP' ||
              vieworderdata.orderData[0]['ORDER_STATUS'] == 'OR' ||
              vieworderdata.orderData[0]['ORDER_STATUS'] == 'C' ||
              vieworderdata.orderData[0]['ORDER_STATUS'] == 'CA'
            " [nzTitle]="'Invoice'" style="margin-left:10px !important" (nzClick)="InvoiceClick()">
            <ng-template nz-tab>
              <div style="
                  max-height: 78vh;
                  min-height: 76vh;
                  overflow-y: auto;
                  overflow-x: hidden;
                  padding-right: 10px;
                ">
                <app-invoicepage [TYPE]="'ORDER'" [FILTER_ID]="orderDetails.ID" [showMinimal]="true"
                  [tableData]="newdataList"></app-invoicepage>
              </div>
            </ng-template>
          </nz-tab>
        </nz-tabset>
      </nz-spin>
    </div>
  </div>
</div>

<nz-modal [nzWidth]="900" [(nzVisible)]="ImageModalVisible" nzMaskClosable="false" nzClosable="false"
  [nzContent]="content" [nzTitle]="'Image View'" (nzOnCancel)="ImageModalCancel()" [nzFooter]="ImageModalFooter">
  <ng-template #content>
    <nz-spin [nzSpinning]="isSpinning">
      <div *ngIf="imageshow != undefined && imageshow != null && imageshow != ''" class="ss" style="height: 400px">
        <div class="controls">
          <button nz-button nzType="primary" nzShape="circle" (click)="zoomIn()">
            <i nz-icon nzType="zoom-in"></i>
          </button>
          <button nz-button nzType="primary" nzShape="circle" (click)="zoomOut()">
            <i nz-icon nzType="zoom-out"></i>
          </button>
          <button nz-button nzType="primary" nzShape="circle" (click)="rotateLeft()">
            <i nz-icon nzType="rotate-left"></i>
          </button>
          <button nz-button nzType="primary" nzShape="circle" (click)="rotateRight()">
            <i nz-icon nzType="rotate-right"></i>
          </button>
          <button nz-button nzType="default" nzShape="circle" (click)="reset()">
            <i nz-icon nzType="reload"></i>
          </button>
        </div>
        <div class="image-container">
          <img [src]="imageshow" [style.transform]="
              'scale(' + zoomLevel + ') rotate(' + rotation + 'deg)'
            " alt="Zoomable Image" />
        </div>
      </div>
    </nz-spin>
  </ng-template>
  <ng-template #ImageModalFooter>
    <button nz-button nzType="default" (click)="ImageModalCancel()">
      Close
    </button>
  </ng-template>
</nz-modal>

<div *ngIf="isdetailsclosed">
  <nz-drawer nzMaskClosable="false" [nzClosable]="true" [nzVisible]="isdetailsclosed" nzPlacement="right"
    [nzTitle]="PartTitle" (nzOnClose)="closedetailsd()" nzWidth="90%">
    <ng-container *nzDrawerContent>
      <div nz-row style="margin-top: 8px">
        <div nz-col nzSpan="24">
          <nz-table class="my-scroll no-wrap1" #table [nzData]="dataList" [nzTotal]="totalRecords" nzBordered
            [(nzPageIndex)]="pageIndex" [(nzPageSize)]="pageSize" (nzPageIndexChange)="getlistofstock()"
            (nzPageSizeChange)="getlistofstock()" (nzQueryParams)="sort($event)" [nzSize]="'small'" nzShowSizeChanger
            [nzFrontPagination]="false" [nzScroll]="{ y: '60vh' }" style="white-space: pre-line">
            <thead>
              <tr>
                <th nzLeft nzWidth="180px" nzShowSort align="center" nzColumnKey="{{ 'CURRENT_STOCK' }}"
                  [nzSortFn]="true">
                  Cuurent Stock
                </th>
                <th nzWidth="250px" nzShowSort align="center" nzColumnKey="{{ 'ITEM_NAME' }}" [nzSortFn]="true">
                  Item Name
                </th>

                <th nzWidth="180px" align="center" nzShowSort align="center" nzColumnKey="{{ 'VARIANT_NAME' }}"
                  [nzSortFn]="true">
                  Variant Name
                </th>
                <th nzWidth="200px" align="center" nzShowSort align="center" nzColumnKey="{{ 'INVENTORY_TYPE' }}"
                  [nzSortFn]="true">
                  Item Type
                </th>
                <th nzWidth="160px" align="center" nzShowSort align="center"
                  nzColumnKey="{{ 'INVENTORY_TRACKING_TYPE' }}" [nzSortFn]="true">
                  Tracking Type
                </th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let data of table.data">
                <td nzLeft align="center" [nzTooltipTitle]="
                    isTextOverflow ? data['CURRENT_STOCK'] : null
                  " #tooltipRef="nzTooltip" nz-tooltip>
                  <div #textContainer class="truncate-text1" (mouseenter)="checkOverflow(textContainer, tooltipRef)">
                    {{ data["CURRENT_STOCK"] ? data["CURRENT_STOCK"] : 0 }}
                  </div>
                </td>
                <td align="left" [nzTooltipTitle]="isTextOverflow ? data['ITEM_NAME'] : null" #tooltipRef="nzTooltip"
                  nz-tooltip>
                  <div #textContainer2 class="truncate-text1" (mouseenter)="checkOverflow(textContainer2, tooltipRef)">
                    {{ data["ITEM_NAME"] }}
                  </div>
                </td>
                <td align="left" [nzTooltipTitle]="
                    isTextOverflow ? data['VARIANT_NAME'] : null
                  " #tooltipRef="nzTooltip" nz-tooltip>
                  <div #textContainer3 class="truncate-text1" (mouseenter)="checkOverflow(textContainer3, tooltipRef)">
                    {{ data["VARIANT_NAME"] ? data["VARIANT_NAME"] : "-" }}
                  </div>
                </td>
                <td align="center">
                  <span *ngIf="data !== undefined && data.INVENTORY_TYPE == 'B'">Both Sellable & Technician Parts</span>
                  <span *ngIf="data !== undefined && data.INVENTORY_TYPE == 'P'">Sellable Inventory</span>
                  <span *ngIf="data !== undefined && data.INVENTORY_TYPE == 'S'">Technician Parts Only</span>
                </td>
                <td align="center">
                  <span *ngIf="
                      data !== undefined && data.INVENTORY_TRACKING_TYPE == 'N'
                    ">None</span>
                  <span *ngIf="
                      data !== undefined && data.INVENTORY_TRACKING_TYPE == 'S'
                    ">Serial No. Wise</span>
                  <span *ngIf="
                      data !== undefined && data.INVENTORY_TRACKING_TYPE == 'B'
                    ">Batch Wise</span>
                </td>
              </tr>
            </tbody>
          </nz-table>
        </div>
      </div>
    </ng-container>
  </nz-drawer>
</div>